{"version":3,"sources":["..\\..\\..\\..\\..\\assets\\scripts\\common/assets\\scripts\\common\\AudioEngine.js"],"names":["GameData","require","AudioEngine","cc","Class","extends","Component","statics","instance","properties","musics","type","AudioClip","default","sounds","init","playMusic","musicID","loop","_audioOpen","audioID","audioEngine","stopMusic","playSound","playEffect","stopSound","stopEffect","stopAllSound","stopAllEffects","setEffectsVolume","value","getEffectsVolume"],"mappings":";;;;;;AAAA;;;;;AAKA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;;AAEA,IAAIC,cAAcC,GAAGC,KAAH,CAAS;AACvBC,aAASF,GAAGG,SADW;;AAGvBC,aAAS;AACLC,kBAAU;AADL,KAHc;;AAOvBC,gBAAY;AACRC,gBAAQ;AACJC,kBAAMR,GAAGS,SADL,EACgB;AACpBC,qBAAS;AAFL,SADA;AAKRC,gBAAQ;AACJH,kBAAMR,GAAGS,SADL,EACgB;AACpBC,qBAAS;AAFL;AALA,KAPW;;AAkBvBE,UAAM,gBAAY;AACdb,oBAAYM,QAAZ,GAAuB,IAAvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACH,KA3BsB;;AA6BvBQ,eAAW,mBAAUC,OAAV,EAAgC;AAAA,YAAbC,IAAa,uEAAN,IAAM;;AACvC,YAAGlB,SAASQ,QAAT,CAAkBW,UAArB,EAAiC;AAC7B,gBAAIC,UAAUjB,GAAGkB,WAAH,CAAeL,SAAf,CAAyB,KAAKN,MAAL,CAAYO,OAAZ,CAAzB,EAA+CC,IAA/C,CAAd;AACA,mBAAOE,OAAP;AACH;AACD,eAAO,CAAC,CAAR;AACH,KAnCsB;;AAqCvBE,eAAW,qBAAY;AACnB,YAAGtB,SAASQ,QAAT,CAAkBW,UAArB,EAAiC;AAC7BhB,eAAGkB,WAAH,CAAeC,SAAf;AACH;AACJ,KAzCsB;;AA2CvBC,eAAW,mBAAUN,OAAV,EAAiC;AAAA,YAAdC,IAAc,uEAAP,KAAO;;AACxC,YAAGlB,SAASQ,QAAT,CAAkBW,UAArB,EAAiC;AAC7B,gBAAIC,UAAUjB,GAAGkB,WAAH,CAAeG,UAAf,CAA0B,KAAKV,MAAL,CAAYG,OAAZ,CAA1B,EAAgDC,IAAhD,CAAd;AACA,mBAAOE,OAAP;AACH;AACD,eAAO,CAAC,CAAR;AACH,KAjDsB;;AAmDvBK,eAAW,mBAAUL,OAAV,EAAmB;AAC1B,YAAGpB,SAASQ,QAAT,CAAkBW,UAArB,EAAiC;AAC7B,gBAAGC,OAAH,EAAY;AACRjB,mBAAGkB,WAAH,CAAeK,UAAf,CAA0BN,OAA1B;AACH;AACJ;AAEJ,KA1DsB;;AA4DvBO,kBAAc,wBAAY;AACtB,YAAG3B,SAASQ,QAAT,CAAkBW,UAArB,EAAiC;AAC7BhB,eAAGkB,WAAH,CAAeO,cAAf;AACH;AACJ,KAhEsB;;AAkEvBC,sBAAkB,0BAAUC,KAAV,EAAiB;AAC/B3B,WAAGkB,WAAH,CAAeQ,gBAAf,CAAgCC,KAAhC;AACH,KApEsB;;AAsEvBC,sBAAkB,4BAAY;AAC1B,eAAO5B,GAAGkB,WAAH,CAAeU,gBAAf,EAAP;AACH;;AAxEsB,CAAT,CAAlB","file":"AudioEngine.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\common","sourcesContent":["/**\n * @fileoverview 音乐播放器\n * @author meifan@gameley.cn (梅凡)\n */\n\nconst GameData = require('GameData');\n\nvar AudioEngine = cc.Class({\n    extends: cc.Component,\n\n    statics: {\n        instance: null,\n    },\n\n    properties: {\n        musics: {\n            type: cc.AudioClip, // use 'type:' to define an array of Texture2D objects\n            default: []\n        },\n        sounds: {\n            type: cc.AudioClip, // use 'type:' to define an array of Texture2D objects\n            default: []\n        },\n    },\n\n    init: function () {\n        AudioEngine.instance = this;\n\n        // const volume = this.getEffectsVolume();\n        // this.setEffectsVolume(0.01);\n        // for(var sound of this.sounds) {\n        //     cc.audioEngine.playEffect(sound, false);\n        // }\n        // this.setEffectsVolume(volume);\n    },\n\n    playMusic: function (musicID, loop = true) {\n        if(GameData.instance._audioOpen) {\n            var audioID = cc.audioEngine.playMusic(this.musics[musicID], loop);\n            return audioID;\n        }\n        return -1;\n    },\n\n    stopMusic: function () {\n        if(GameData.instance._audioOpen) {\n            cc.audioEngine.stopMusic();\n        }\n    },\n\n    playSound: function (musicID, loop = false) {\n        if(GameData.instance._audioOpen) {\n            var audioID = cc.audioEngine.playEffect(this.sounds[musicID], loop);\n            return audioID;\n        }\n        return -1;\n    },\n\n    stopSound: function (audioID) {\n        if(GameData.instance._audioOpen) {\n            if(audioID) {\n                cc.audioEngine.stopEffect(audioID);\n            }\n        }\n\n    },\n\n    stopAllSound: function () {\n        if(GameData.instance._audioOpen) {\n            cc.audioEngine.stopAllEffects();\n        }\n    },\n\n    setEffectsVolume: function (value) {\n        cc.audioEngine.setEffectsVolume(value);\n    },\n\n    getEffectsVolume: function () {\n        return cc.audioEngine.getEffectsVolume();\n    }\n\n});"]}