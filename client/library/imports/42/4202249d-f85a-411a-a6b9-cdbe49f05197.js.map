{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\KeyCount.js"],"names":["PlayerData","require","cc","Class","extends","Component","properties","keys","Node","open","active","instance","hasGetKey","node","keyCount","i","children","show","flyKey","key","setTimeout","a","position","c","add","v2","b","x","y","bezier","runAction","bezierTo","easing","easeIn"],"mappings":";;;;;;AAAA,IAAMA,aAAaC,QAAQ,YAAR,CAAnB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,cAAML,GAAGM;AADD,KAHP;;AAQLC,QARK,gBAQAC,MARA,EAQQ;AACT,YAAI,CAACV,WAAWW,QAAX,CAAoBC,SAAzB,EAAoC;AACpC,aAAKC,IAAL,CAAUH,MAAV,GAAmBA,MAAnB;AACA,YAAII,WAAWd,WAAWW,QAAX,CAAoBG,QAAnC;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,iBAAKR,IAAL,CAAUS,QAAV,CAAmBD,CAAnB,EAAsBL,MAAtB,GAA+BK,IAAID,QAAnC;AACH;AACJ,KAfI;AAiBLG,QAjBK,gBAiBAC,MAjBA,EAiBQ;AAAA;;AACT,aAAKL,IAAL,CAAUH,MAAV,GAAmB,IAAnB;AACA,YAAII,WAAWd,WAAWW,QAAX,CAAoBG,QAAnC;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,iBAAKR,IAAL,CAAUS,QAAV,CAAmBD,CAAnB,EAAsBL,MAAtB,GAA+BK,IAAI,CAAJ,GAAQD,QAAvC;AACH;AACD,YAAIK,MAAM,KAAKZ,IAAL,CAAUS,QAAV,CAAmBF,WAAW,CAA9B,CAAV;AACAM,mBAAW,YAAM;AACbD,gBAAIT,MAAJ,GAAa,IAAb;AACH,SAFD,EAEG,IAFH;;AAIAU,mBAAW,YAAM;AACb,kBAAKP,IAAL,CAAUH,MAAV,GAAmB,KAAnB;AACH,SAFD,EAEG,IAFH;;AAIAU,mBAAW,YAAM;AACb,gBAAIC,IAAIH,OAAOI,QAAf;AACA,gBAAIC,IAAI,MAAKV,IAAL,CAAUS,QAAV,CAAmBE,GAAnB,CAAuBtB,GAAGuB,EAAH,CAAM,MAAMX,WAAW,CAAjB,CAAN,EAA2B,CAA3B,CAAvB,CAAR;AACA,gBAAIY,IAAIxB,GAAGuB,EAAH,CAAMJ,EAAEM,CAAR,EAAWJ,EAAEK,CAAb,CAAR;AACA,gBAAIC,SAAS,CAACR,CAAD,EAAIK,CAAJ,EAAOH,CAAP,CAAb;AACAL,mBAAOY,SAAP,CAAiB5B,GAAG6B,QAAH,CAAY,GAAZ,EAAiBF,MAAjB,EAAyBG,MAAzB,CAAgC9B,GAAG+B,MAAH,CAAU,GAAV,CAAhC,CAAjB;AACH,SAND,EAMG,IANH;AAQH;AAxCI;;AA2CL;AA3CJ","file":"KeyCount.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const PlayerData = require('PlayerData');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        keys: cc.Node,\r\n    },\r\n\r\n\r\n    open(active) {\r\n        if (!PlayerData.instance.hasGetKey) return\r\n        this.node.active = active;\r\n        var keyCount = PlayerData.instance.keyCount;\r\n        for (let i = 0; i < 3; i++) {\r\n            this.keys.children[i].active = i < keyCount;\r\n        }\r\n    },\r\n\r\n    show(flyKey) {\r\n        this.node.active = true;\r\n        var keyCount = PlayerData.instance.keyCount;\r\n        for (let i = 0; i < 3; i++) {\r\n            this.keys.children[i].active = i + 1 < keyCount;\r\n        }\r\n        var key = this.keys.children[keyCount - 1];\r\n        setTimeout(() => {\r\n            key.active = true;\r\n        }, 1600);\r\n\r\n        setTimeout(() => {\r\n            this.node.active = false;\r\n        }, 2000)\r\n\r\n        setTimeout(() => {\r\n            var a = flyKey.position;\r\n            var c = this.node.position.add(cc.v2(50 * (keyCount - 2), 0));\r\n            var b = cc.v2(a.x, c.y);\r\n            var bezier = [a, b, c]\r\n            flyKey.runAction(cc.bezierTo(0.3, bezier).easing(cc.easeIn(1.0)))\r\n        }, 1300);\r\n\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});"]}