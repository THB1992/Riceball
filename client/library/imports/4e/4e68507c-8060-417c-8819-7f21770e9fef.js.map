{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\entity/assets\\scripts\\battle\\entity\\EntityBuff.js"],"names":["Tools","require","EntityBase","cc","Class","extends","properties","attackNode","Node","pickNode","landNode","skinNode","init","state","buffState","skin","children","active","nodeLandCollider","getOrAddComponent","node","buffColliderListener","once","onByPick","recycleSelf"],"mappings":";;;;;;AAAA;;;;;AAKA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;AACA,IAAMC,aAAaD,QAAQ,YAAR,CAAnB;;AAEAE,GAAGC,KAAH,CAAS;AACLC,aAASH,UADJ;;AAGLI,gBAAY;AACRC,oBAAYJ,GAAGK,IADP;AAERC,kBAAUN,GAAGK,IAFL;AAGRE,kBAAUP,GAAGK,IAHL;AAIRG,kBAAUR,GAAGK;AAJL,KAHP;;AAULI,QAVK,gBAUAC,KAVA,EAUO;AACR,aAAKC,SAAL,GAAiBD,KAAjB;AACA,YAAIE,OAAO,KAAKJ,QAAL,CAAcK,QAAd,CAAuBH,KAAvB,CAAX;AACA,YAAIE,IAAJ,EAAU;AACNA,iBAAKE,MAAL,GAAc,IAAd;AACH;AACD,aAAKC,gBAAL,GAAwBlB,MAAMmB,iBAAN,CAAwB,KAAKT,QAA7B,EAAuC,cAAvC,CAAxB;AACA,aAAKQ,gBAAL,CAAsBN,IAAtB,CAA2B,KAAKQ,IAAhC,EAAsC,IAAtC;;AAEA,aAAKC,oBAAL,GAA4BrB,MAAMmB,iBAAN,CAAwB,KAAKC,IAA7B,EAAmC,sBAAnC,CAA5B;AACA,aAAKC,oBAAL,CAA0BT,IAA1B,CAA+B,IAA/B;;AAEA,aAAKQ,IAAL,CAAUE,IAAV,CAAe,UAAf,EAA2B,KAAKC,QAAhC,EAA0C,IAA1C;AACH,KAvBI;;;AAyBLA,cAAU,oBAAY;AAClB,YAAIR,OAAO,KAAKJ,QAAL,CAAcK,QAAd,CAAuB,KAAKF,SAA5B,CAAX;AACA,YAAIC,IAAJ,EAAU;AACNA,iBAAKE,MAAL,GAAc,KAAd;AACH;;AAED,aAAKO,WAAL;AACH;AAhCI,CAAT","file":"EntityBuff.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\entity","sourcesContent":["/**\r\n * @fileoverview buff实体\r\n * @author zhangzhuang@gameley.cn (张庄)\r\n */\r\n\r\nconst Tools = require('Tools');\r\nconst EntityBase = require('EntityBase');\r\n\r\ncc.Class({\r\n    extends: EntityBase,\r\n\r\n    properties: {\r\n        attackNode: cc.Node,\r\n        pickNode: cc.Node,\r\n        landNode: cc.Node,\r\n        skinNode: cc.Node,\r\n    },\r\n\r\n    init(state) {\r\n        this.buffState = state;\r\n        var skin = this.skinNode.children[state];\r\n        if (skin) {\r\n            skin.active = true;\r\n        }\r\n        this.nodeLandCollider = Tools.getOrAddComponent(this.landNode, 'NodeCollider');\r\n        this.nodeLandCollider.init(this.node, true);\r\n\r\n        this.buffColliderListener = Tools.getOrAddComponent(this.node, 'BuffColliderListener');\r\n        this.buffColliderListener.init(this);\r\n\r\n        this.node.once('onByPick', this.onByPick, this);\r\n    },\r\n\r\n    onByPick: function () {\r\n        var skin = this.skinNode.children[this.buffState];\r\n        if (skin) {\r\n            skin.active = false;\r\n        }\r\n\r\n        this.recycleSelf();\r\n    }\r\n});"]}