{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\PanelReward.js"],"names":["AdvertMgr","require","AdverType","PlayerData","PlatformMgr","ConfigData","ShareMgr","ShareType","AddEntitySystem","UIUtil","CustomFunnelEvent","cc","Class","extends","Component","properties","anim","Animation","iconSprite","Sprite","nameLabel","Label","adverBtn","Node","closeBtn","reduceBtn","normalRewardNode","rankRewardNode","heroRewardText","knifeRewardText","freeIcon","shareIcon","adverIcon","normalNode","specialNode","freeIcon_2","shareIcon_2","adverIcon_2","reduceBtn_2","suitNode","suitNameLabel","suitOpenIcon","suitHeroNameLabel","suitKnifeNameLabel","suitSkillLabel","suitHeroFlag","suitKnifeFlag","suitActiveBtn","noThanksLabel","closeLabel","shadowNode","init","data","callback","errCallback","world","string","name","isHeroSkin","instance","heroSkinDatas","indexOf","isSpecial","taskBg","shadowIndex","getBigRankDatasIndex","taskParam","i","children","length","active","isGuideSkin","node","rotation","scale","color","Color","fromHEX","x","unlockWay","stage","getCurStageByPrizeCount","openAdver","UnlockSkin","loadResSprite","url","suit","suitData","getSuitData","heroData","knifeData","isOwnHeroSkin","isOwnKnifeSkin","equipHero","equipKnife","knifeSkin","getKnifeSkinById","isCurEquipKnifeSkin","id","heroSkin","getHeroSkinById","isCurEquipHeroSkin","GREEN","RED","skillTips","openSuitCallback","onEquipKnifeSkin","onEquipHeroSkin","openSuitBtnClick","closeBtnClick","isSecGame","notifyFunnelEvent","NewHeroClose","showBanner","adverBtnClick","self","closeFunc","success","flag","showShare","showAdver","errFunc","share","onShareBtnClick"],"mappings":"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","file":"PanelReward.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\nconst PlayerData = require('PlayerData');\r\nconst PlatformMgr = require('PlatformMgr');\r\nconst ConfigData = require('ConfigData');\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst AddEntitySystem = require('AddEntitySystem');\r\nconst UIUtil = require('UIUtil');\r\nconst CustomFunnelEvent = require('Types').CustomFunnelEvent;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        anim: cc.Animation,\r\n        iconSprite: cc.Sprite,\r\n        nameLabel: cc.Label,\r\n        adverBtn: cc.Node,\r\n        closeBtn: cc.Node,\r\n        reduceBtn: cc.Node,\r\n\r\n        normalRewardNode: cc.Node,\r\n        rankRewardNode: cc.Node,\r\n\r\n        heroRewardText: cc.Node,\r\n        knifeRewardText: cc.Node,\r\n\r\n        freeIcon: cc.Node,\r\n        shareIcon: cc.Node,\r\n        adverIcon: cc.Node,\r\n\r\n        normalNode: cc.Node,\r\n        specialNode: cc.Node,\r\n\r\n        freeIcon_2: cc.Node,\r\n        shareIcon_2: cc.Node,\r\n        adverIcon_2: cc.Node,\r\n        reduceBtn_2: cc.Node,\r\n\r\n        //suit\r\n        suitNode: cc.Node,\r\n        suitNameLabel: cc.Label,\r\n        suitOpenIcon: cc.Node,\r\n        suitHeroNameLabel: cc.Label,\r\n        suitKnifeNameLabel: cc.Label,\r\n        suitSkillLabel: cc.Label,\r\n        suitHeroFlag: cc.Node,\r\n        suitKnifeFlag: cc.Node,\r\n        suitActiveBtn: cc.Node,\r\n        //language\r\n        noThanksLabel: cc.Label,\r\n        closeLabel: cc.Label,\r\n\r\n        shadowNode: cc.Node,\r\n    },\r\n\r\n    init: function (data, callback, errCallback, world) {\r\n        this.data = data;\r\n        this.callback = callback;\r\n        this.errCallback = errCallback;\r\n        this.world = world;\r\n        this.nameLabel.string = data.name;\r\n\r\n\r\n        var isHeroSkin = ConfigData.instance.heroSkinDatas.indexOf(data) !== -1\r\n        this.isHeroSkin = isHeroSkin;\r\n        this.isSpecial = data.taskBg === 1;\r\n        if (this.isSpecial) {\r\n            var shadowIndex = ConfigData.instance.getBigRankDatasIndex(data.taskParam) - 1;\r\n            for (let i = 0; i < this.shadowNode.children.length; i++) {\r\n                this.shadowNode.children[i].active = i === shadowIndex;\r\n            }\r\n        }\r\n\r\n        var isGuideSkin = data.isGuideSkin;\r\n        this.specialNode.active = isGuideSkin;\r\n        this.normalNode.active = !isGuideSkin;\r\n\r\n        // if (isHeroSkin) {\r\n        //     this.isHas = PlayerData.instance.isOwnHeroSkin(data.id);\r\n        // } else {\r\n        //     this.isHas = PlayerData.instance.isOwnKnifeSkin(data.id);\r\n        // }\r\n\r\n\r\n        this.iconSprite.node.rotation = isHeroSkin ? 0 : 90;\r\n        this.iconSprite.node.rotation = this.isSpecial ? 45 : this.iconSprite.node.rotation;\r\n        this.iconSprite.node.scale = isHeroSkin ? 1 : 1.5;\r\n        this.normalRewardNode.active = this.isSpecial ? false : true;\r\n        this.rankRewardNode.active = this.isSpecial ? true : false;\r\n        this.nameLabel.node.color = new cc.Color().fromHEX(this.isSpecial ? '#A24100' : '#ffffff');\r\n\r\n\r\n        this.heroRewardText.active = isHeroSkin ? true : false;\r\n        this.knifeRewardText.active = isHeroSkin ? false : true;\r\n\r\n\r\n        // this.nameLabel.node.color = this.isSpecial ? cc.Color.BLACK : cc.Color.WHITE;\r\n\r\n\r\n        this.freeIcon.x = data.unlockWay === 0 ? 0 : 33;\r\n        this.reduceBtn.active = data.unlockWay !== 0;\r\n        this.shareIcon.active = data.unlockWay === 1;\r\n        this.adverIcon.active = data.unlockWay === 2;\r\n\r\n\r\n        this.stage = ConfigData.instance.getCurStageByPrizeCount(PlayerData.instance);\r\n\r\n        this.freeIcon_2.x = this.stage === 0 ? 0 : 33;\r\n        this.reduceBtn_2.active = this.stage !== 0;\r\n        this.shareIcon_2.active = this.stage === 1;\r\n        this.adverIcon_2.active = this.stage === 2;\r\n        // this.freeIcon_2.x = data.unlockWay === 0 ? 0 : 33;\r\n        // this.reduceBtn_2.active = data.unlockWay !== 0;\r\n        // this.shareIcon_2.active = data.unlockWay === 1;\r\n        // this.adverIcon_2.active = data.unlockWay === 2;\r\n        // if (data.unlockWay === 1) {\r\n        //     if (GameData.instance.isInReview) {\r\n        //         this.shareIcon.active = false;\r\n        //         this.adverIcon.active = true;\r\n        //     } \r\n        // }\r\n\r\n        if (this.adverIcon.active) {\r\n            AdvertMgr.instance.openAdver(AdverType.UnlockSkin);\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n        UIUtil.loadResSprite(this.iconSprite, data.url);\r\n\r\n        this.noThanksLabel.string = 'No,thanks';\r\n        this.closeLabel.string = 'Close';\r\n        // return\r\n        //套装\r\n\r\n        return\r\n        this.suitNode.active = data.suit;\r\n        if (data.suit) {\r\n            var suitData = ConfigData.instance.getSuitData(data.suit);\r\n            var heroData = null;\r\n            var knifeData = null;\r\n            var isOwnHeroSkin = true;\r\n            var isOwnKnifeSkin = true;\r\n            var equipHero = true;\r\n            var equipKnife = true;\r\n            if (isHeroSkin) {\r\n                heroData = data;\r\n                isOwnKnifeSkin = PlayerData.instance.isOwnKnifeSkin(suitData.knifeSkin);\r\n                knifeData = ConfigData.instance.getKnifeSkinById(suitData.knifeSkin);\r\n                equipKnife = PlayerData.instance.isCurEquipKnifeSkin(knifeData.id);\r\n            } else {\r\n                knifeData = data;\r\n                isOwnHeroSkin = PlayerData.instance.isOwnHeroSkin(suitData.heroSkin);\r\n                heroData = ConfigData.instance.getHeroSkinById(suitData.heroSkin);\r\n                equipHero = PlayerData.instance.isCurEquipHeroSkin(heroData.id);\r\n            }\r\n\r\n            this.suitNameLabel.string = suitData.name;\r\n            this.suitHeroNameLabel.string = '英雄：' + heroData.name;\r\n            this.suitHeroNameLabel.node.color = isOwnHeroSkin ? cc.Color.GREEN : cc.Color.RED;\r\n            this.suitKnifeNameLabel.string = '武器：' + knifeData.name;\r\n            this.suitKnifeNameLabel.node.color = isOwnKnifeSkin ? cc.Color.GREEN : cc.Color.RED;\r\n            this.suitSkillLabel.string = suitData.skillTips;\r\n\r\n            this.suitHeroFlag.active = isOwnHeroSkin;\r\n            this.suitKnifeFlag.active = isOwnKnifeSkin;\r\n\r\n            this.suitOpenIcon.active = isOwnHeroSkin && isOwnKnifeSkin && equipHero && equipKnife;\r\n            this.suitActiveBtn.active = (!this.suitOpenIcon.active) && (isOwnHeroSkin && isOwnKnifeSkin);\r\n            // this.completeSuit.active = isOwnHeroSkin && isOwnKnifeSkin;\r\n            // this.notCompleteSuit.active = !this.completeSuit.active;\r\n            this.openSuitCallback = () => {\r\n                if (isHeroSkin) {\r\n                    this.world.onEquipKnifeSkin(knifeData, true)\r\n                } else {\r\n                    this.world.onEquipHeroSkin(heroData, true)\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        // AdvertMgr.instance.showBanner();\r\n    },\r\n\r\n    openSuitBtnClick: function () {\r\n        if (this.openSuitCallback) this.openSuitCallback();\r\n        this.closeBtnClick();\r\n    },\r\n\r\n    closeBtnClick: function () {\r\n        this.node.active = false;\r\n        if (PlayerData.instance.isSecGame()) {\r\n            PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.NewHeroClose);\r\n        }\r\n        if (this.callback) {\r\n            if (this.isSpecial) {\r\n                this.callback(false);\r\n            } else {\r\n                this.callback(true);\r\n            }\r\n        }\r\n        // AdvertMgr.instance.destoryBanner();\r\n        AdvertMgr.instance.showBanner();\r\n    },\r\n\r\n    adverBtnClick: function () {\r\n        var self = this;\r\n        // 关闭广告时回调\r\n        var closeFunc = (success) => {\r\n            if (success) {\r\n                self.node.active = false;\r\n                if (PlayerData.instance.isSecGame()) {\r\n                    PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.NewHeroClose);\r\n                }\r\n                if (self.callback) {\r\n                    self.callback(true);\r\n                }\r\n                // AdvertMgr.instance.destoryBanner();\r\n            }\r\n        }\r\n        var flag = this.data.unlockWay;\r\n        if (this.data.isGuideSkin) {\r\n            flag = this.stage;\r\n        }\r\n        // 打开广告失败时回调,失败回调\r\n        switch (flag) {\r\n            case 0:\r\n                closeFunc(true);\r\n                break;\r\n            case 1:\r\n                // if (GameData.instance.isInReview) {\r\n                //     this.showAdver(closeFunc);\r\n                // } else {\r\n                this.showShare(closeFunc);\r\n                // }\r\n                break;\r\n            case 2:\r\n                this.showAdver(closeFunc);\r\n                break;\r\n        }\r\n    },\r\n\r\n    showAdver: function (closeFunc) {\r\n        var self = this;\r\n        var errFunc = () => {\r\n            self.showShare(closeFunc);\r\n        }\r\n        AdvertMgr.instance.showAdver(AdverType.UnlockSkin, closeFunc, errFunc);\r\n    },\r\n\r\n    showShare: function (closeFunc) {\r\n        ShareMgr.share(ShareType.UnlockSkin, closeFunc);\r\n    },\r\n\r\n\r\n    onShareBtnClick: function () {\r\n        this.showShare()\r\n    },\r\n});"]}