{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\GSHome.js"],"names":["PlayerData","require","UIUtil","GameData","ShareMgr","ShareType","StageType","AdverType","ConfigData","PlatformType","PlatformMgr","Tools","BagItem","ItemType","NFTUnLockType","AdvertMgr","LanguageMgr","TaskType","GSHome","cc","Class","extends","Component","statics","gameClubButton","properties","shopDiamondNode","Node","shopRootNode","indexDownRootNode","panelIndex","panelShop","panelKnifeShop","panelHeroShop","panelTips","panelReward","panelLevelUp","panelSign","panelSignRoot","goldLabel","Label","nameEditBox","EditBox","versionLabel","getMoneyAnim","Animation","getMoreMoneyAnim","getLuckyMoneyNode","world","audioOnNode","audioOffNode","vibrateOnNode","vibrateOffNode","restorePurchaseBtn","noAdsBtn","addKnifeNode","friendRankNode","gameClubNode","myAppNode","_extraKnife","rankBar","rankNameLabel","rankIconSprite","Sprite","rankProgressLabel","rankStarNode","rankNoStarNode","panelCheat","panelCheatBtn","panelRankInfo","panelRankInfoRedDot","panelKnifeShopRedDot","panelKnifeShopNewRedDot","panelHeroShopRedDot","panelHeroShopNewRedDot","panelTryOut","panelTryFrenzy","panelTrySuit","panelDailyTask","panelInvite","panelAddTop","panelHolidayRank","panelRewardDetail","panelPKReward","panelWorldReward","panelPKNotice","panelSubscribe","panelSubscribeReward","panelBuySkin","panelEvaulate","panelRechargeShop","rechargeShopParent","kingNode","kingLabel","panelFriend","signTipsNode","singTipsLabel","signRedDot","panelMatch","panelProperty","panelGetSkin","watchAdverBtn","watchAdverLabel","danceNumberNode","danceNumberLabel","panelGrowUp","panelOfflineGold","settingNode","vibrateBtn","downNode","panelRepay","panelRank","taskRedDot","taskPIKAQI","showMoneyTime","redDotLabel","dailyTaskNode","inviteBtnNode","inviteRedDot","goldCountNode","goldAnimNode","diamondCountNode","diamondCountLabel","addTopBtnNode","addTopRedDot","addTopRootNode","diamondNode","diamondLabel","activeSuitAnim","holidayParentNode","holidayBtn","holidayWorkdBtn","holidayCloseBtn","userinfoBtns","pkNoticeBtn","pkNoticeLabel","selectLanguageNode","nftActivityNode","isNewShop","init","instance","fireBaseEvent","getOpenAdRules","isShowOpenAdCold","showOpenApp","console","log","activeCount","activeGoldNode","activeDiamondNode","string","remainPKDay","active","goldAnim","getComponent","textLabel","langFlag","placeholderLabel","name","showVersion","_audioOpen","_vibrateOpen","isIosApp","getVipWithoutInterstitial","isExtraKnife","getGoldParam","showGold","count","open_nft_moudle","isFirstDay","playCount","PLAY_COUNT","rankData","star","rankStar","levelUpStar","refreshRankStar","loadResSprite","url","platformType","WECHAT","obj","wx","getMenuButtonBoundingClientRect","JSON","stringify","bottom","frameSize","height","y","setTimeout","userInfoBtnState","getItem","callback","res","userInfo","changeName","nickName","updateIconUrl","avatarUrl","setItem","btn","destroy","show","createUserInfoButton","node","onTap","isDuringHolidayRankBtnShowTime","onPanelHolidayRankBtnClick","hide","onWorldNodeBtnClick","close","getUserInfo","success","screenHeight","offset","refreshWatchAdverBtn","refreshRedDot","self","refresh","checkPad","isFristGame","showBanner","isPad","Widget","top","scale","width","ratio","pos","left","parent","convertToWorldSpaceAR","position","x","type","text","style","backgroundColor","color","borderRadius","textAlign","fontSize","lineHeight","startLoadPrefab","logUseTime","loadUIPrefab","resource","onPanelShopBtnClick","event","data","action","moveTo","v2","screenOffset","easing","easeCubicActionOut","followCameraCtrl","runAction","localPlayer","setScale","showNameNode","onPanelHeroShopBtnClick","onPanelKnifeShopBtnClick","destoryBanner","updateNewKnifeSkinCheck","updateNewHeroSkinCheck","onPanelShopClose","isKnfe","onPanelRankInfoBtnClick","onAddKnifeBtnClick","closeFunc","isSuccess","setExtraKnife","changeLocalKnifesCount","knifeSkin","initKnifeCount","stage","getCurStageByPrizeCount","Free","Share","share","AddKnife","Adver","getAdvertUnitId","showAdver","OnEditNameBegan","onEditName","str","filter","showTips","getShowNickName","updateName","inputContent","arrMg","teaword","showContent","i","length","r","RegExp","replace","update","dt","getGoldStr","zongZi","isIOS","flag","isInReview","clientData","hideSpecialSkin","hasGetInviteReward","isApp","hideAddTop","canShowBtnAddTop","onAudioBtnClick","setAudio","onVibrateBtnClick","setVibrate","tips","showReward","errCallback","onShareBtnClick","HOME","refreshGold","_GSHome","onResetToDefault","showPanelSignFlag","resetDataToDefault","restartGame","hideMyAppNode","showPanelLevelUp","showPanelTryOut","closeCallback","showPanelTryFrenzy","showPanelTrySuit","showPanelSign","showWatchAdverCount","changeAdverCount","watchAdverSkinData","getKnifeSkinById","process","getTaskProcess","ADVERCOUNT","taskParam","onCloseBtnClick","knifeSkinDatas","isGet","isOwnKnifeSkin","id","canUnlock","arrContains","completeTaskIds","taskId","heroSkinDatas","isOwnHeroSkin","isNew","newDate","isBeforeOtherTime","getCurTime","hasCheckNewSkin","canGet","inviteDatas","hasNew","checkInviteLength","canGetAddTopReward","isCompleteAllTask","num","tasks","dailyShowTask","isComplete","param","dailyOldTask","completeGuideDailyTask","maxCount","maxRefreshTaskCount","curCount","dayRefreshTaskCount","remainCount","isDuringDuanWuFestival","daySign","signTips","children","signCount","signDatas","lateSignDatas","index","item","createItemWithString","reward","curStar","stars","noStars","interval","isShow","opacity","Math","abs","onPanelSignBtnClick","onPanelDailyTaskBtnClick","onPanelInviteBtnClick","onPanelFriendBtnClick","showPanelMatch","players","cleanUp","closePanelMatch","refreshProperty","isHeroSkin","onPanelGetSkinBtnClick","taskMgr","refreshTaskInHome","uiMgr","onPanelCheatClick","showOfflineMultip","showMultipNode","onSettingBtnClick","isSetLanguage","director","loadScene","onEditLanguage","curIndex","onConnectBtnClick","bitverseWallet","connectBitverse","requestNFTGet","isInit","Number","setLang","refreshOfflineGoldData","refreshData","showPanelRepay","showUnlockGrow","comp","showCallFunc","showPanelAddTop","showPanelInvite","showPanelDailyTask","showGetMoneyEffect","oldRankData","levelUp","final","gold","isLucky","onGetLucky","multip","extraGold","ceil","getStringByFormat","getUITipStr","isMore","onGetMore","onGetNormal","refreshShowData","curType","onPanelRechargeShopBtnClick","onAddTopBtnClick","showActiveSuitEffect","play","showPanelRewardDetail","showPanelPKReward","showPanelWorldReward","showPanelHolidayRank","isPK","hidePanelHolidayUserinfoBtns","onPanelPKNoticeBtnClick","showPanelSubscribeReward","showPanelSubscribe","showPanelBuySkin","showPanelEvaulate","onRestorePurchaseBtnClick","PayMgr","restoreProducts","onNoADsBtnClick","updateVipWithoutInterstitial","errorFunc","payByIndex"],"mappings":"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","file":"GSHome.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const PlayerData = require('PlayerData');\r\nconst UIUtil = require('UIUtil');\r\nconst GameData = require('GameData');\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst StageType = require('Types').StageType;\r\nconst AdverType = require('Types').AdverType;\r\nconst ConfigData = require('ConfigData');\r\nconst PlatformType = require('Types').PlatformType;\r\nconst PlatformMgr = require('PlatformMgr');\r\nconst Tools = require('Tools');\r\nconst BagItem = require('BagItem');\r\nconst ItemType = require('Types').ItemType;\r\nconst NFTUnLockType = require('Types').NFTUnLockType;\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst LanguageMgr = require('LanguageMgr');\r\nconst TaskType = require('Types').TaskType;\r\n\r\n\r\nconst GSHome = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    statics: {\r\n        gameClubButton: null,\r\n        // instance: null,\r\n        // init: function () {\r\n        //     if (GSHome.instance === null) {\r\n        //         GSHome.instance = new GSHome();\r\n        //         GSHome.instance.init();\r\n        //     }\r\n        //     var _global = typeof window === 'undefined' ? global : window;\r\n        //     _global.GSHome = GSHome;\r\n        // },\r\n        // cleanUp: function () {\r\n        //     GSHome.instance = null;\r\n        // },\r\n    },\r\n\r\n    properties: {\r\n        shopDiamondNode: cc.Node,\r\n        shopRootNode: cc.Node,\r\n        indexDownRootNode: cc.Node,\r\n        panelIndex: cc.Node,\r\n        panelShop: cc.Node,\r\n        panelKnifeShop: cc.Node,\r\n        panelHeroShop: cc.Node,\r\n        panelTips: cc.Node,\r\n        panelReward: cc.Node,\r\n        panelLevelUp: cc.Node,\r\n        panelSign: cc.Node,\r\n        panelSignRoot: cc.Node,\r\n        goldLabel: cc.Label,\r\n        nameEditBox: cc.EditBox,\r\n        versionLabel: cc.Label,\r\n        getMoneyAnim: cc.Animation,\r\n        getMoreMoneyAnim: cc.Animation,\r\n        getLuckyMoneyNode: cc.Node,\r\n        world: null,\r\n\r\n        audioOnNode: cc.Node,\r\n        audioOffNode: cc.Node,\r\n        vibrateOnNode: cc.Node,\r\n        vibrateOffNode: cc.Node,\r\n\r\n        restorePurchaseBtn: cc.Node,\r\n        noAdsBtn: cc.Node,\r\n\r\n        addKnifeNode: cc.Node,\r\n        friendRankNode: cc.Node,\r\n        gameClubNode: cc.Node,\r\n        myAppNode: cc.Node,\r\n        _extraKnife: false,\r\n\r\n\r\n        rankBar: cc.Node,\r\n        rankNameLabel: cc.Label,\r\n        rankIconSprite: cc.Sprite,\r\n        rankProgressLabel: cc.Label,\r\n        rankStarNode: cc.Node,\r\n        rankNoStarNode: cc.Node,\r\n\r\n        panelCheat: cc.Node,\r\n        panelCheatBtn: cc.Node,\r\n        panelRankInfo: cc.Node,\r\n\r\n        panelRankInfoRedDot: cc.Node,\r\n        panelKnifeShopRedDot: cc.Node,\r\n        panelKnifeShopNewRedDot: cc.Node,\r\n        panelHeroShopRedDot: cc.Node,\r\n        panelHeroShopNewRedDot: cc.Node,\r\n        panelTryOut: cc.Node,\r\n        panelTryFrenzy: cc.Node,\r\n        panelTrySuit: cc.Node,\r\n        panelDailyTask: cc.Node,\r\n        panelInvite: cc.Node,\r\n        panelAddTop: cc.Node,\r\n        panelHolidayRank: cc.Node,\r\n        panelRewardDetail: cc.Node,\r\n        panelPKReward: cc.Node,\r\n        panelWorldReward: cc.Node,\r\n        panelPKNotice: cc.Node,\r\n        panelSubscribe: cc.Node,\r\n        panelSubscribeReward: cc.Node,\r\n        panelBuySkin: cc.Node,\r\n        panelEvaulate: cc.Node,\r\n        panelRechargeShop: cc.Node,\r\n        rechargeShopParent: cc.Node,\r\n\r\n        kingNode: cc.Node,\r\n        kingLabel: cc.Label,\r\n\r\n        panelFriend: cc.Node,\r\n\r\n        signTipsNode: cc.Node,\r\n        singTipsLabel: cc.Label,\r\n        signRedDot: cc.Node,\r\n\r\n        panelMatch: cc.Node,\r\n        panelProperty: cc.Node,\r\n\r\n        panelGetSkin: cc.Node,\r\n        watchAdverBtn: cc.Node,\r\n        watchAdverLabel: cc.Label,\r\n\r\n        danceNumberNode: cc.Node,\r\n        danceNumberLabel: cc.Label,\r\n        panelGrowUp: cc.Node,\r\n        panelOfflineGold: cc.Node,\r\n\r\n        settingNode: cc.Node,\r\n        vibrateBtn: cc.Node,\r\n\r\n        downNode: cc.Node,\r\n        panelRepay: cc.Node,\r\n\r\n        panelRank: cc.Node,\r\n\r\n        taskRedDot: cc.Node,\r\n        taskPIKAQI: cc.Node,\r\n        // gif: cc.Node,\r\n\r\n        showMoneyTime: 0.5,\r\n\r\n        redDotLabel: cc.Label,\r\n\r\n        dailyTaskNode: cc.Node,\r\n\r\n        inviteBtnNode: cc.Node,\r\n        inviteRedDot: cc.Node,\r\n\r\n        goldCountNode: cc.Node,\r\n        goldAnimNode: cc.Node,\r\n\r\n        diamondCountNode: cc.Node,\r\n        diamondCountLabel: cc.Label,\r\n\r\n        addTopBtnNode: cc.Node,\r\n        addTopRedDot: cc.Node,\r\n        addTopRootNode: cc.Node,\r\n\r\n        diamondNode: cc.Node,\r\n        diamondLabel: cc.Label,\r\n\r\n        activeSuitAnim: cc.Animation,\r\n        holidayParentNode: cc.Node,\r\n        holidayBtn: cc.Node,\r\n        holidayWorkdBtn: cc.Node,\r\n        holidayCloseBtn: cc.Node,\r\n        userinfoBtns: [],\r\n\r\n        pkNoticeBtn: cc.Node,\r\n        pkNoticeLabel: cc.Label,\r\n\r\n        selectLanguageNode: cc.Node,\r\n\r\n        nftActivityNode: cc.Node,\r\n\r\n        isNewShop: true,\r\n    },\r\n\r\n    init(world) {\r\n        // ///////销毁开屏广告////////////\r\n        // AdvertMgr.instance.destroyOpenApp()\r\n        // //////////////////////////////\r\n        // AdvertMgr.instance.loadOpenApp()\r\n        //Loading页加载完成，进入游戏页面\r\n        AdvertMgr.instance.fireBaseEvent(\"app_enter\");\r\n        //准备页得到展示\r\n        AdvertMgr.instance.fireBaseEvent(\"page_show_prepare\");\r\n\r\n        if (AdvertMgr.instance.getOpenAdRules()) {\r\n            //看到主界面时，如果open才加载完，也播放\r\n            if (!PlayerData.instance.isShowOpenAdCold) {\r\n                AdvertMgr.instance.showOpenApp();\r\n            } else {\r\n                console.log(\"already played openAppAd\")\r\n            }\r\n        }\r\n\r\n        //------------------------------\r\n        //测试\r\n        // PlatformMgr.qureyBalance()\r\n        //------------------------------\r\n\r\n        this.world = world;\r\n        this.activeCount = 0;\r\n        this.activeGoldNode(true);\r\n        this.activeDiamondNode(true);\r\n        this.pkNoticeLabel.string = PlayerData.instance.remainPKDay;\r\n\r\n        this.goldCountNode.active = true;\r\n        this.diamondCountNode.active = true;\r\n        this.goldAnim = this.goldAnimNode.getComponent('GoldAnim')\r\n\r\n        this.nameEditBox.textLabel.langFlag = true;\r\n        this.nameEditBox.placeholderLabel.langFlag = true;\r\n        this.nameEditBox.string = PlayerData.instance.name;\r\n\r\n        this.versionLabel.string = GameData.instance.showVersion;\r\n\r\n        this.audioOnNode.active = GameData.instance._audioOpen;\r\n        this.audioOffNode.active = !this.audioOnNode.active;\r\n\r\n        this.vibrateOnNode.active = GameData.instance._vibrateOpen;\r\n        this.vibrateOffNode.active = !this.vibrateOnNode.active;\r\n\r\n        this.restorePurchaseBtn.active = PlatformMgr.isIosApp();\r\n        this.noAdsBtn.active = !PlayerData.instance.getVipWithoutInterstitial();\r\n\r\n        // this.nameEditBox.node.parent.active = !PlatformMgr.isIOS();\r\n        this.friendRankNode.active = false;\r\n        // this.addKnifeNode.active = !GameData.instance.isInReview && !ConfigData.instance.clientData.stopAdverToShare;\r\n        this._extraKnife = PlayerData.instance.isExtraKnife;\r\n\r\n        this.holidayBtn.active = false;\r\n        this.pkNoticeBtn.active = false;\r\n\r\n        if (PlayerData.instance.getGoldParam) {\r\n            PlayerData.instance.showGold -= PlayerData.instance.getGoldParam.count;\r\n        }\r\n        \r\n        //新用户规则\r\n        if(PlatformMgr.open_nft_moudle){\r\n            this.nftActivityNode.active = PlayerData.instance.isFirstDay() && PlayerData.instance.playCount >= NFTUnLockType.PLAY_COUNT\r\n        }\r\n\r\n        var rankData = PlayerData.instance.rankData;\r\n        var star = PlayerData.instance.rankStar;\r\n        this.rankNameLabel.string = rankData.name;\r\n        if (rankData.levelUpStar === 0) {\r\n            this.kingNode.active = true;\r\n            this.refreshRankStar();\r\n            this.kingLabel.string = 'x' + (star - rankData.star);\r\n        } else {\r\n            this.kingNode.active = false;\r\n            this.refreshRankStar();\r\n        }\r\n\r\n        UIUtil.loadResSprite(this.rankIconSprite, rankData.url);\r\n        // AddEntitySystem.instance.loadRankSprite(this.rankIconSprite, rankData.iconIndex);\r\n\r\n        // cc.audioEngine.setVolume(this.audioOnNode.active ? 1 : 0);\r\n\r\n        // this.gif.getComponent('Gif').enableDisplay();\r\n\r\n        // this.panelCheatBtn.active = GameData.instance.isEnvironmentTest();\r\n        // this.panelCheatBtn.active = true\r\n\r\n        // this.addTopBtnNode.y = -100;\r\n        // this.addTopRootNode.y = -100;\r\n        if (PlatformMgr.platformType === PlatformType.WECHAT) {\r\n            var obj = wx.getMenuButtonBoundingClientRect()\r\n            console.log('========getMenuButtonBoundingClientRect=======', JSON.stringify(obj))\r\n            var bottom = 150;\r\n            if (obj.bottom) {\r\n                bottom = obj.bottom / GameData.instance.frameSize.height * 1280 + 50;\r\n            }\r\n            this.addTopRootNode.y = -bottom;\r\n            setTimeout(() => {\r\n                const userInfoBtnState = Tools.getItem('userinfoBtn');\r\n                if (!userInfoBtnState) {\r\n                    var callback = (res) => {\r\n                        if (res.userInfo) {\r\n                            this.changeName(res.userInfo.nickName);\r\n                            PlayerData.instance.updateIconUrl(res.userInfo.avatarUrl);\r\n                            Tools.setItem('userinfoBtn', 1);\r\n                            for (let btn of this.userinfoBtns) {\r\n                                if (btn) btn.destroy();\r\n                            }\r\n                        }\r\n                    }\r\n                    //授权1\r\n                    if (this.userinfoBtns[0]) {\r\n                        this.userinfoBtns[0].show();\r\n                    } else {\r\n                        this.userinfoBtns[0] = this.createUserInfoButton(this.nameEditBox.node);\r\n                        this.userinfoBtns[0].onTap((res) => {\r\n                            callback(res);\r\n                        })\r\n                    }\r\n                    //授权2\r\n                    if (ConfigData.instance.isDuringHolidayRankBtnShowTime()) {\r\n                        if (this.userinfoBtns[1]) {\r\n                            this.userinfoBtns[1].show();\r\n                        } else {\r\n                            this.userinfoBtns[1] = this.createUserInfoButton(this.holidayBtn);\r\n                            this.userinfoBtns[1].onTap((res) => {\r\n                                callback(res);\r\n                                this.onPanelHolidayRankBtnClick();\r\n                            })\r\n                        }\r\n                    }\r\n\r\n                    //授权3\r\n                    if (this.userinfoBtns[2]) {\r\n                        this.userinfoBtns[2].hide();\r\n                    } else {\r\n                        this.userinfoBtns[2] = this.createUserInfoButton(this.holidayWorkdBtn);\r\n                        this.userinfoBtns[2].onTap((res) => {\r\n                            callback(res);\r\n                            this.panelHolidayRank.getComponent('PanelHolidayRank').onWorldNodeBtnClick();\r\n                        })\r\n                        this.userinfoBtns[2].hide();\r\n                    }\r\n                    //授权4\r\n                    if (this.userinfoBtns[3]) {\r\n                        this.userinfoBtns[3].hide();\r\n                    } else {\r\n                        this.userinfoBtns[3] = this.createUserInfoButton(this.holidayCloseBtn);\r\n                        this.userinfoBtns[3].onTap((res) => {\r\n                            callback(res);\r\n                            this.panelHolidayRank.getComponent('PanelHolidayRank').close();\r\n                        })\r\n                        this.userinfoBtns[2].hide();\r\n                    }\r\n\r\n                } else if (userInfoBtnState === 1) {\r\n                    wx.getUserInfo({\r\n                        success: (res) => {\r\n                            if (res) {\r\n                                this.changeName(res.userInfo.nickName);\r\n                                PlayerData.instance.updateIconUrl(res.userInfo.avatarUrl);\r\n                                Tools.setItem('userinfoBtn', 2);\r\n                            }\r\n                        },\r\n                    })\r\n                }\r\n            }, 500)\r\n        }\r\n\r\n        // this.panelRankInfo.getComponent('PanelRankInfo').init(this.world);\r\n        // this.panelOfflineGold.getComponent('PanelOfflineGold').init(this.world);\r\n        this.panelGrowUp.getComponent('PanelGrowUp').init(this.world);\r\n\r\n        this.panelRank.getComponent('PanelRank').init();\r\n\r\n        var height = (GameData.instance.screenHeight - 1280) / 2;\r\n        var offset = height > 40 ? height - 40 : 0;\r\n        this.downNode.y = 144 - offset;\r\n\r\n        this.refreshWatchAdverBtn();\r\n        this.refreshRedDot();\r\n\r\n\r\n        var self = this;\r\n        ShareMgr.refreshRedDot = () => {\r\n            self.refreshRedDot();\r\n            self.panelAddTop.getComponent('PanelAddTop').refresh();\r\n        }\r\n\r\n        this.checkPad();\r\n\r\n        //不是第一次启动的玩家,开屏广告没有的情况下，直接展示\r\n        if (!PlayerData.instance.isFristGame()) {\r\n            //主界面展示banner广告\r\n            console.log(\"showBanner setTimeout GSHome\")\r\n            setTimeout(() => {\r\n                AdvertMgr.instance.showBanner();\r\n            }, 2000)\r\n        }\r\n    },\r\n\r\n    checkPad() {\r\n        this.shopRootNode.y = GameData.instance.isPad() ? -200 : 0;\r\n        this.indexDownRootNode.y = GameData.instance.isPad() ? 250 : 180;\r\n        this.panelDailyTask.y = GameData.instance.isPad() ? -120 : 0;\r\n        this.shopDiamondNode.y = GameData.instance.isPad() ? 430 : 550;\r\n        this.panelSubscribe.y = GameData.instance.isPad() ? -100 : 0;\r\n        this.panelSign.getComponent(cc.Widget).top = GameData.instance.isPad() ? 150 : 0;\r\n        this.panelSignRoot.scale = GameData.instance.isPad() ? 0.9 : 1;\r\n        this.settingNode.width = GameData.instance.isPad() ? 165 : 245;\r\n        this.vibrateBtn.active = !GameData.instance.isPad();\r\n        // this.panelTrySuit.y = GameData.instance.isPad() ? -70 : 0;\r\n        this.panelBuySkin.y = GameData.instance.isPad() ? -100 : 0;\r\n        this.panelTips.y = GameData.instance.isPad() ? 340 : 480;\r\n        this.activeSuitAnim.node.y = GameData.instance.isPad() ? -100 : 0;\r\n        this.panelLevelUp.getComponent(cc.Widget).top = GameData.instance.isPad() ? 150 : 0;\r\n        this.panelGetSkin.getComponent(cc.Widget).top = GameData.instance.isPad() ? 150 : 0;\r\n    },\r\n\r\n\r\n    createUserInfoButton: function (node) {\r\n        var ratio = GameData.instance.ratio;\r\n        var pos, left, top, width, height;\r\n        pos = node.parent.convertToWorldSpaceAR(node.position);\r\n        left = (pos.x - node.width / 2) * ratio;\r\n        top = (GameData.instance.screenHeight - pos.y - node.height / 2) * ratio;\r\n        width = node.width * ratio;\r\n        height = node.height * ratio;\r\n\r\n        var btn = wx.createUserInfoButton({\r\n            type: 'text',\r\n            text: '', //点击任意区域开始游戏\r\n            style: {\r\n                left: left,\r\n                top: top,\r\n                width: width,\r\n                height: height,\r\n                // backgroundColor: '#000000',\r\n                // borderColor: '#000000',\r\n                backgroundColor: '#00000000',\r\n                color: '#00000000',\r\n                borderRadius: 0,\r\n                textAlign: 'center',\r\n                fontSize: 30,\r\n                lineHeight: 40,\r\n            }\r\n        });\r\n\r\n        return btn;\r\n    },\r\n\r\n    startLoadPrefab: function () {\r\n        GameData.instance.logUseTime('start home prefab load');\r\n\r\n        if (!this.panelHeroShop) {\r\n            UIUtil.loadUIPrefab('prefab/ui/gshome/PanelHeroShop' + (this.isNewShop ? '_new' : ''), (resource) => {\r\n                if (resource) {\r\n                    this.panelHeroShop = resource;\r\n                    this.panelHeroShop.parent = this.panelShop;\r\n                    // this.panelHeroShop.getComponent('PanelHeroShop').init(this.world);\r\n                    GameData.instance.logUseTime('panelHeroShop prefab loaded');\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!this.panelKnifeShop) {\r\n            UIUtil.loadUIPrefab('prefab/ui/gshome/PanelKnifeShop' + (this.isNewShop ? '_new' : ''), (resource) => {\r\n                if (resource) {\r\n                    this.panelKnifeShop = resource;\r\n                    this.panelKnifeShop.parent = this.panelShop;\r\n                    // this.panelKnifeShop.getComponent('PanelKnifeShop').init(this.world);\r\n                    GameData.instance.logUseTime('panelKnifeShop prefab loaded');\r\n                }\r\n            });\r\n        }\r\n\r\n        if (!this.panelRechargeShop) {\r\n            UIUtil.loadUIPrefab('prefab/ui/gshome/PanelShop', (resource) => {\r\n                if (resource) {\r\n                    this.panelRechargeShop = resource;\r\n                    this.panelRechargeShop.parent = this.rechargeShopParent;\r\n                    this.panelRechargeShop.active = false;\r\n                    this.panelRechargeShop.y = GameData.instance.isPad() ? -80 : 0;\r\n                    // this.panelKnifeShop.getComponent('PanelKnifeShop').init(this.world);\r\n                    GameData.instance.logUseTime('panelRechargeShop prefab loaded');\r\n                }\r\n            });\r\n        }\r\n    },\r\n\r\n    onPanelShopBtnClick: function (event, data) {\r\n        if (!(this.panelKnifeShop && this.panelHeroShop)) return\r\n        this.panelProperty.active = true;\r\n        if (this.panelHeroShop) this.panelHeroShop.getComponent('PanelHeroShop' + (this.isNewShop ? '_new' : '')).init(this.world);\r\n        if (this.panelKnifeShop) this.panelKnifeShop.getComponent('PanelKnifeShop' + (this.isNewShop ? '_new' : '')).init(this.world);\r\n        var action = cc.moveTo(0.5, cc.v2(0, -300 + GameData.instance.screenOffset / 2)).easing(cc.easeCubicActionOut(3.0));\r\n        this.world.followCameraCtrl.runAction(action);\r\n        action = cc.moveTo(0.5, cc.v2(0, GameData.instance.screenOffset)).easing(cc.easeCubicActionOut(3.0));\r\n        this.panelShop.runAction(action);\r\n        this.panelIndex.active = false;\r\n        this.world.localPlayer.setScale(0.8)\r\n        this.world.localPlayer.showNameNode(false);\r\n        if (data === '1') {\r\n            this.onPanelHeroShopBtnClick()\r\n        } else {\r\n            this.onPanelKnifeShopBtnClick()\r\n        }\r\n\r\n        AdvertMgr.instance.destoryBanner();\r\n    },\r\n\r\n    onPanelKnifeShopBtnClick: function () {\r\n        if (this.panelKnifeShop) this.panelKnifeShop.getComponent('PanelKnifeShop' + (this.isNewShop ? '_new' : '')).init(this.world);\r\n        this.panelKnifeShop.active = true;\r\n        this.panelHeroShop.active = false;\r\n        //皮肤武器页展示\r\n        AdvertMgr.instance.fireBaseEvent(\"page_show_knife\");\r\n        PlayerData.instance.updateNewKnifeSkinCheck();\r\n        this.refreshRedDot();\r\n    },\r\n\r\n    onPanelHeroShopBtnClick: function () {\r\n        if (this.panelHeroShop) this.panelHeroShop.getComponent('PanelHeroShop' + (this.isNewShop ? '_new' : '')).init(this.world);\r\n        this.panelKnifeShop.active = false;\r\n        this.panelHeroShop.active = true;\r\n        //皮肤英雄页展示\r\n        AdvertMgr.instance.fireBaseEvent(\"page_show_hero\");\r\n        PlayerData.instance.updateNewHeroSkinCheck();\r\n        this.refreshRedDot();\r\n\r\n        //------------------------------\r\n        //测试\r\n        //链接钱包\r\n        // PlatformMgr.connectBitverse()\r\n        //------------------------------\r\n    },\r\n\r\n    onPanelShopClose: function (isKnfe) {\r\n        var action = cc.moveTo(0.5, cc.v2(0, -1500)).easing(cc.easeCubicActionOut(3.0));\r\n        this.panelShop.runAction(action);\r\n        this.panelIndex.active = true;\r\n        this.panelProperty.active = false;\r\n        action = cc.moveTo(0.5, cc.v2(0, 0)).easing(cc.easeCubicActionOut(3.0));\r\n        this.world.followCameraCtrl.runAction(action);\r\n        this.world.localPlayer.showNameNode(true);\r\n        this.world.localPlayer.setScale(1)\r\n\r\n        if (isKnfe) {\r\n            this.panelKnifeShop.getComponent('PanelKnifeShop' + (this.isNewShop ? '_new' : '')).close()\r\n        } else {\r\n            this.panelHeroShop.getComponent('PanelHeroShop' + (this.isNewShop ? '_new' : '')).close()\r\n        }\r\n    },\r\n\r\n    // onRandomRankStar: function () {\r\n    //     PlayerData.instance.randomRankStar();\r\n    // },\r\n\r\n\r\n    onPanelRankInfoBtnClick: function () {\r\n        //准备页点击排行榜 按钮\r\n        AdvertMgr.instance.fireBaseEvent(\"click_ranking_btn\");\r\n        this.panelRank.active = true;\r\n        this.panelRank.getComponent('PanelRank').refresh();\r\n        // AdvertMgr.instance.showBanner();\r\n        // this.panelRankInfo.getComponent('PanelRankInfo').init(this.world);\r\n    },\r\n\r\n    onAddKnifeBtnClick: function () {\r\n\r\n        var closeFunc = (isSuccess) => {\r\n            if (isSuccess) {\r\n                PlayerData.instance.setExtraKnife(6);\r\n                this.world.changeLocalKnifesCount(PlayerData.instance.knifeSkin.initKnifeCount);\r\n                this._extraKnife = true;\r\n                this.addKnifeNode.active = false;\r\n            }\r\n        }\r\n\r\n        var stage = ConfigData.instance.getCurStageByPrizeCount(PlayerData.instance);\r\n        switch (stage) {\r\n            case StageType.Free:\r\n                closeFunc(true)\r\n                break;\r\n            case StageType.Share:\r\n                ShareMgr.share(ShareType.AddKnife, closeFunc)\r\n                break;\r\n            case StageType.Adver:\r\n                //点击获取加飞刀数量按钮\r\n                AdvertMgr.instance.fireBaseEvent(\"click_addknives_btn\");\r\n                AdvertMgr.instance.fireBaseEvent(\"click_adv_btn\", \"position_id\", ConfigData.instance.getAdvertUnitId(AdverType.AddKnife));\r\n                AdvertMgr.instance.showAdver(AdverType.AddKnife, closeFunc)\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n    OnEditNameBegan: function () {\r\n        AdvertMgr.instance.destoryBanner();\r\n    },\r\n\r\n    onEditName: function () {\r\n        var str = this.filter(this.nameEditBox.string)\r\n        if (str !== this.nameEditBox.string) {\r\n            this.showTips(21);\r\n        }\r\n        this.changeName(str);\r\n        //加个空格以免自动转化为其他语言\r\n    },\r\n\r\n    changeName: function (str) {\r\n        console.log(\"showBanner changeName \")\r\n        AdvertMgr.instance.showBanner();\r\n        str = Tools.getShowNickName(str);\r\n        PlayerData.instance.updateName(str);\r\n        this.world.localPlayer.changeName(str);\r\n        this.nameEditBox.string = str;\r\n    },\r\n\r\n\r\n    filter: function (inputContent) {\r\n        // 多个敏感词，这里直接以数组的形式展示出来\r\n        var arrMg = ConfigData.instance.teaword;\r\n        // 显示的内容--showContent\r\n        var showContent = inputContent;\r\n        for (var i = 0; i < arrMg.length; i++) {\r\n            // 创建一个正则表达式\r\n            // var r = new RegExp(, \"ig\");\r\n            var r = new RegExp(arrMg[i].replace(/([\\(\\)\\*])/g, '\\\\$1'), 'ig');\r\n            showContent = showContent.replace(r, \"\");\r\n        }\r\n        // 显示的内容--showInput\r\n        return showContent;\r\n    },\r\n\r\n    update: function (dt) {\r\n\r\n\r\n        // var getGoldParam = PlayerData.instance.getGoldParam;\r\n        // if (getGoldParam) {\r\n        //     this.showMoneyTime -= dt;\r\n        //     if (this.showMoneyTime < 0) {\r\n        //         PlayerData.instance.showGold -= getGoldParam.count;\r\n        //         this.showGetMoneyEffect(getGoldParam);\r\n        //         PlayerData.instance.getGoldParam = null;\r\n        //     }\r\n        // }\r\n\r\n\r\n        var count = PlayerData.instance.showGold;\r\n        var str = Tools.getGoldStr(count);\r\n        this.goldLabel.string = str;\r\n        this.diamondLabel.string = PlayerData.instance.zongZi;\r\n        this.diamondCountLabel.string = PlayerData.instance.zongZi;\r\n\r\n        if (this.nameEditBox.node.parent.active !== !PlatformMgr.isIOS()) {\r\n            this.nameEditBox.node.parent.active = !PlatformMgr.isIOS();\r\n            this.world.localPlayer.changeName('我');\r\n        }\r\n\r\n\r\n\r\n\r\n        var flag = !this._extraKnife; // && !GameData.instance.isInReview && !ConfigData.instance.clientData.stopAdverToShare;\r\n        if (this.addKnifeNode.active !== flag) {\r\n            this.addKnifeNode.active = flag;\r\n        }\r\n\r\n        flag = !(GameData.instance.isInReview || ConfigData.instance.clientData.hideSpecialSkin);\r\n        if (this.dailyTaskNode.active !== flag) {\r\n            this.dailyTaskNode.active = flag;\r\n        }\r\n\r\n        flag = !(GameData.instance.isInReview || ConfigData.instance.clientData.hideSpecialSkin || PlayerData.instance.hasGetInviteReward() || PlatformMgr.isApp());\r\n        if (this.inviteBtnNode.active !== flag) {\r\n            this.inviteBtnNode.active = flag;\r\n        }\r\n\r\n        flag = !(GameData.instance.isInReview || ConfigData.instance.clientData.hideAddTop || !PlayerData.instance.canShowBtnAddTop() || PlatformMgr.isIOS() || PlatformMgr.isApp())\r\n        if (this.addTopBtnNode.active !== flag) {\r\n            this.addTopBtnNode.active = flag;\r\n        }\r\n\r\n        // flag = PlayerData.instance.canShowBtnHoliday()\r\n        // if (this.holidayBtn.active !== flag) {\r\n        //     this.holidayBtn.active = flag;\r\n        // }\r\n\r\n        // flag = (Tools.isBeforeOtherTime(ConfigData.instance.holidayDatas.startDate, PlayerData.instance.getCurTime()))\r\n        // if (this.pkNoticeBtn.active !== flag) {\r\n        //     this.pkNoticeBtn.active = flag;\r\n        // }\r\n    },\r\n\r\n    onAudioBtnClick: function () {\r\n        this.audioOnNode.active = !this.audioOnNode.active;\r\n        this.audioOffNode.active = !this.audioOnNode.active;\r\n        GameData.instance.setAudio(this.audioOnNode.active);\r\n    },\r\n\r\n    onVibrateBtnClick: function () {\r\n        this.vibrateOnNode.active = !this.vibrateOnNode.active;\r\n        this.vibrateOffNode.active = !this.vibrateOnNode.active;\r\n        GameData.instance.setVibrate(this.vibrateOnNode.active);\r\n    },\r\n\r\n    showTips: function (tips) {\r\n        this.panelTips.getComponent('PanelTips').init(tips);\r\n    },\r\n\r\n    showReward: function (data, callback, errCallback) {\r\n        this.panelReward.active = true;\r\n        this.panelReward.getComponent('PanelReward').init(data, callback, errCallback, this.world);\r\n    },\r\n\r\n    onShareBtnClick: function () {\r\n        ShareMgr.share(ShareType.HOME, (isSuccess) => {\r\n            if (isSuccess) {\r\n                this.showTips(1);\r\n            }\r\n        })\r\n    },\r\n\r\n\r\n    //老的金币动画\r\n    // showGetMoneyEffect: function (getGoldParam) {\r\n    //     if (getGoldParam.isLucky) {\r\n    //         var animNodes = this.getLuckyMoneyNode.children;\r\n    //         for (let i = 0; i < animNodes.length; i++) {\r\n    //             let node = animNodes[i];\r\n\r\n    //             let anim = node.getComponent(cc.Animation);\r\n    //             anim.once('finished', () => {\r\n    //                 node.active = false;\r\n    //             })\r\n    //             setTimeout(() => {\r\n\r\n    //                 node.active = true;\r\n    //                 anim.play();\r\n    //             }, i * 500)\r\n    //         }\r\n    //         setTimeout(() => {\r\n    //             PlayerData.instance.showGold = PlayerData.instance.gold;\r\n    //         }, 2000);\r\n\r\n    //         var multip = getGoldParam.multip;\r\n    //         if (multip) {\r\n    //             var extraGold = Math.ceil(getGoldParam.count * (multip - 1) / multip);\r\n    //             var str = Tools.getStringByFormat(ConfigData.instance.getUITipStr(2), extraGold)\r\n    //             this.showTips(str);\r\n    //         }\r\n\r\n    //     } else if (getGoldParam.isMore) {\r\n    //         this.getMoreMoneyAnim.once('finished', () => {\r\n    //             this.getMoreMoneyAnim.node.active = false;\r\n    //         })\r\n\r\n    //         this.getMoreMoneyAnim.node.active = true;\r\n    //         this.getMoreMoneyAnim.play();\r\n    //         setTimeout(() => {\r\n    //             PlayerData.instance.showGold = PlayerData.instance.gold;\r\n    //         }, 1100)\r\n\r\n    //         var multip = getGoldParam.multip;\r\n    //         if (multip) {\r\n    //             var extraGold = Math.ceil(getGoldParam.count * (multip - 1) / multip);\r\n    //             var str = Tools.getStringByFormat(ConfigData.instance.getUITipStr(2), extraGold)\r\n    //             this.showTips(str);\r\n    //         }\r\n    //     } else {\r\n    //         this.getMoneyAnim.once('finished', () => {\r\n    //             this.getMoneyAnim.node.active = false;\r\n    //         })\r\n    //         this.getMoneyAnim.node.active = true;\r\n    //         this.getMoneyAnim.play();\r\n\r\n    //         setTimeout(() => {\r\n    //             PlayerData.instance.showGold = PlayerData.instance.gold;\r\n    //         }, 1100)\r\n    //     }\r\n\r\n    //     //刷新成长属性金币数字颜色\r\n    //     if (this.panelGrowUp) {\r\n    //         var comp = this.panelGrowUp.getComponent('PanelGrowUp');\r\n    //         comp.refreshShowData(comp.curType, false);\r\n    //     }\r\n    // },\r\n\r\n    refreshGold: function () {\r\n        this._GSHome.refreshGold();\r\n    },\r\n\r\n    onResetToDefault: function () {\r\n        PlayerData.instance.showPanelSignFlag = false;\r\n        PlayerData.instance.resetDataToDefault();\r\n        this.world.restartGame();\r\n    },\r\n\r\n    hideMyAppNode: function () {\r\n        this.myAppNode.active = false;\r\n    },\r\n\r\n    showPanelLevelUp: function (callback) {\r\n        this.panelLevelUp.active = true;\r\n        this.panelLevelUp.getComponent('PanelLevelUp').init(callback)\r\n    },\r\n\r\n    showPanelTryOut: function (data, callback, closeCallback) {\r\n        this.panelTryOut.active = true;\r\n        this.panelTryOut.getComponent('PanelTryOut').init(data, callback, closeCallback);\r\n    },\r\n\r\n    showPanelTryFrenzy: function (callback) {\r\n        this.panelTryFrenzy.active = true;\r\n        this.panelTryFrenzy.getComponent('PanelTryFrenzy').init(callback);\r\n    },\r\n\r\n    showPanelTrySuit: function (data, callback, closeCallback) {\r\n        this.panelTrySuit.active = true;\r\n        this.panelTrySuit.getComponent('PanelTrySuit').init(data, callback, closeCallback);\r\n    },\r\n\r\n    showPanelSign: function (callback) {\r\n        this.activeGoldNode(false);\r\n        this.activeDiamondNode(false);\r\n        this.panelSign.active = true;\r\n        this.panelSign.getComponent('PanelSign').init(this.world, callback);\r\n    },\r\n\r\n    // showPanelDailyTask: function (callback) {\r\n    //     this.panelDailyTask.active = true;\r\n    //     this.panelDailyTask.getComponent('PanelDailyTask').init(this.world, callback);\r\n    // },\r\n\r\n\r\n    showWatchAdverCount: function () {\r\n        var count = PlayerData.instance.changeAdverCount;\r\n        if (count > 0) {\r\n            PlayerData.instance.changeAdverCount = 0;\r\n            this.danceNumberLabel.string = '+' + count;\r\n            this.danceNumberNode.active = true;\r\n        }\r\n    },\r\n\r\n\r\n    refreshWatchAdverBtn: function () {\r\n        // this.watchAdverBtn.active = false; \r\n        // return;\r\n        this.watchAdverSkinData = ConfigData.instance.getKnifeSkinById(25);\r\n        var process = PlayerData.instance.getTaskProcess(TaskType.ADVERCOUNT);\r\n        if (process >= this.watchAdverSkinData.taskParam) {\r\n            this.watchAdverBtn.active = false;\r\n            this.panelGetSkin.getComponent('PanelGetSkin').onCloseBtnClick();\r\n        } else {\r\n            this.watchAdverBtn.active = true;\r\n            // this.watchAdverLabel.string = process + '/' + this.watchAdverSkinData.taskParam;\r\n        }\r\n\r\n    },\r\n\r\n    refreshRedDot: function () {\r\n        // console.log('正式刷新红点');\r\n        this.panelKnifeShopRedDot.active = false;\r\n        this.panelKnifeShopNewRedDot.active = false;\r\n        this.panelHeroShopRedDot.active = false;\r\n        this.panelHeroShopNewRedDot.active = false;\r\n\r\n        this.panelRankInfoRedDot.active = false;\r\n        //商店可领取红点\r\n        for (const data of ConfigData.instance.knifeSkinDatas) {\r\n            var isGet = PlayerData.instance.isOwnKnifeSkin(data.id);\r\n            var canUnlock = Tools.arrContains(PlayerData.instance.completeTaskIds, data.taskId);\r\n            if (!isGet && canUnlock) {\r\n                this.panelKnifeShopRedDot.active = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (const data of ConfigData.instance.heroSkinDatas) {\r\n            var isGet = PlayerData.instance.isOwnHeroSkin(data.id);\r\n            var canUnlock = Tools.arrContains(PlayerData.instance.completeTaskIds, data.taskId);\r\n            if (!isGet && canUnlock) {\r\n                this.panelHeroShopRedDot.active = true;\r\n                break;\r\n            }\r\n        }\r\n\r\n        //商店新上架红点\r\n        for (const data of ConfigData.instance.knifeSkinDatas) {\r\n            var isNew = data.newDate && Tools.isBeforeOtherTime(data.newDate, PlayerData.instance.getCurTime());\r\n            var id = data.id;\r\n            if (isNew && !Tools.arrContains(PlayerData.instance.hasCheckNewSkin, id)) {\r\n                this.panelKnifeShopNewRedDot.active = true;\r\n                this.panelKnifeShopRedDot.active = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        for (const data of ConfigData.instance.heroSkinDatas) {\r\n            var isNew = data.newDate && Tools.isBeforeOtherTime(data.newDate, PlayerData.instance.getCurTime());\r\n            var id = 10000 + data.id;\r\n            if (isNew && !Tools.arrContains(PlayerData.instance.hasCheckNewSkin, id)) {\r\n                this.panelHeroShopNewRedDot.active = true;\r\n                this.panelHeroShopRedDot.active = false;\r\n                break;\r\n            }\r\n        }\r\n\r\n        //邀请红点\r\n        var canGet = PlayerData.instance.inviteDatas.length >= 3 && !PlayerData.instance.hasGetInviteReward();\r\n        var hasNew = PlayerData.instance.inviteDatas.length > PlayerData.instance.checkInviteLength;\r\n        if (canGet || hasNew) {\r\n            this.inviteRedDot.active = true;\r\n        } else {\r\n            this.inviteRedDot.active = false;\r\n        }\r\n\r\n        //添加置顶红点\r\n        var canGet = PlayerData.instance.canGetAddTopReward();\r\n        this.addTopRedDot.active = canGet;\r\n\r\n\r\n        //段位红点\r\n        // var rankDatas = ConfigData.instance.starRankDatas;\r\n        // for (let i = 0; i <= PlayerData.instance.rankData.id; i++) {\r\n        //     var data = rankDatas[i];\r\n        //     if (data.reward && !Tools.arrContains(PlayerData.instance.completeRankRewardIds, data.id)) {\r\n        //         var item = BagItem.createItemWithString(data.reward);\r\n        //         if (item.type === ItemType.KNIFE_SKIN && PlayerData.instance.isOwnKnifeSkin(item.id)) continue;\r\n        //         this.panelRankInfoRedDot.active = true;\r\n        //         break;\r\n        //     }\r\n        // }\r\n\r\n        //日常任务红点\r\n\r\n        var isCompleteAllTask = true;\r\n        this.taskRedDot.active = false;\r\n        var num = 0;\r\n        let tasks = PlayerData.instance.dailyShowTask;\r\n        for (let data of tasks) {\r\n            // var isComplete = PlayerData.instance.getDailyTaskProcess(data.type) >= data.param;\r\n            var isComplete = data.process >= data.param;\r\n            var isGet = Tools.arrContains(PlayerData.instance.dailyOldTask, data.id) || Tools.arrContains(PlayerData.instance.completeGuideDailyTask, data.id)\r\n            if (isComplete && (!isGet)) {\r\n                this.taskRedDot.active = true;\r\n                num += 1;\r\n            }\r\n            if (!isComplete) isCompleteAllTask = false;\r\n        }\r\n        var maxCount = ConfigData.instance.clientData.maxRefreshTaskCount;\r\n        var curCount = PlayerData.instance.dayRefreshTaskCount;\r\n        var remainCount = maxCount - curCount;\r\n        if (isCompleteAllTask && (remainCount > 0) && num === 0) {\r\n            num = 1;\r\n            this.taskRedDot.active = true;\r\n        }\r\n        this.redDotLabel.string = num;\r\n        this.taskPIKAQI.active = ConfigData.instance.isDuringDuanWuFestival(PlayerData.instance.getCurTime());\r\n\r\n        //签到红点\r\n        var daySign = PlayerData.instance.daySign;\r\n        this.signRedDot.active = !daySign;\r\n        //签到气泡\r\n\r\n        var signTips = this.signTipsNode.children;\r\n        signTips[0].active = false;\r\n        signTips[1].active = false;\r\n        signTips[2].active = false;\r\n        signTips[3].active = false;\r\n        if (this.signRedDot.active) return;\r\n\r\n        var signCount = PlayerData.instance.signCount;\r\n        var signDatas = ConfigData.instance.signDatas;\r\n        if (signCount >= 6) {\r\n            signDatas = ConfigData.instance.lateSignDatas;\r\n        };\r\n        if (signCount === 0) {\r\n            signTips[0].active = true;\r\n        } else if (signCount === 1) {\r\n            signTips[1].active = true;\r\n        } else if (signCount === 5) {\r\n            signTips[2].active = true;\r\n        } else {\r\n            signTips[3].active = true;\r\n            var index = (signCount + 1) % 7;\r\n            var data = signDatas[index];\r\n            var item = BagItem.createItemWithString(data.reward);\r\n            this.singTipsLabel.string = item.num;\r\n        }\r\n\r\n    },\r\n\r\n    refreshRankStar() {\r\n        var curStar = PlayerData.instance.rankStar;\r\n        var rankData = PlayerData.instance.rankData;\r\n        var stars = this.rankStarNode.children;\r\n        var noStars = this.rankNoStarNode.children;\r\n        var interval = 40 / rankData.levelUpStar + 5;\r\n        for (let i = 0; i < stars.length; i++) {\r\n            var isGet = curStar > rankData.star + i;\r\n            var isShow = i < rankData.levelUpStar;\r\n            if (stars[i]) {\r\n                stars[i].opacity = isGet && isShow ? 255 : 0;\r\n                if (rankData.levelUpStar === 1) {\r\n                    stars[i].x = 0;\r\n                    stars[i].y = 0;\r\n                } else {\r\n                    stars[i].x = i * interval * 2 - interval * (rankData.levelUpStar - 1);\r\n                    if (stars[i].x === 0) {\r\n                        stars[i].y = 0;\r\n                    } else {\r\n                        stars[i].y = (Math.abs(stars[i].x)) / 2 - 7.5;\r\n                    }\r\n                }\r\n            }\r\n            // console.log(stars[i].x, stars[i].y)\r\n            if (noStars[i]) {\r\n                noStars[i].opacity = isShow ? 255 : 0;\r\n                noStars[i].x = stars[i].x;\r\n                noStars[i].y = stars[i].y;\r\n            }\r\n        }\r\n    },\r\n\r\n    onPanelSignBtnClick: function () {\r\n        this.activeGoldNode(false);\r\n        this.activeDiamondNode(false);\r\n        this.panelSign.active = true;\r\n        this.panelSign.getComponent('PanelSign').init(this.world);\r\n    },\r\n\r\n    onPanelDailyTaskBtnClick: function () {\r\n        this.panelDailyTask.active = true;\r\n        this.panelDailyTask.getComponent('PanelDailyTask').init(this.world);\r\n        //准备页点击任务 按钮\r\n        AdvertMgr.instance.fireBaseEvent(\"click_messions_btn\");\r\n    },\r\n\r\n\r\n    onPanelInviteBtnClick: function () {\r\n        this.panelInvite.active = true;\r\n        this.panelInvite.getComponent('PanelInvite').init(this.world);\r\n    },\r\n\r\n    onPanelFriendBtnClick: function () {\r\n        this.panelFriend.active = true;\r\n        this.panelFriend.getComponent('PanelFriend').init(this.world);\r\n    },\r\n\r\n    showPanelMatch: function (players, callback) {\r\n        this.panelMatch.active = true;\r\n        this.panelMatch.getComponent('PanelMatch').cleanUp();\r\n        this.panelMatch.getComponent('PanelMatch').init(players, callback);\r\n    },\r\n\r\n    closePanelMatch: function () {\r\n        this.panelMatch.active = false;\r\n    },\r\n\r\n\r\n    refreshProperty: function (data, isHeroSkin) {\r\n        this.panelProperty.getComponent('PanelProperty').refreshProperty(data, isHeroSkin);\r\n    },\r\n\r\n\r\n    onPanelGetSkinBtnClick: function () {\r\n        //点击获取特殊武器按钮\r\n        AdvertMgr.instance.fireBaseEvent(\"click_artifact_btn\");\r\n        const self = this;\r\n        this.panelGetSkin.active = true;\r\n        this.panelGetSkin.getComponent('PanelGetSkin').init(this.watchAdverSkinData, (success) => {\r\n            //刷新任务\r\n            self.refreshWatchAdverBtn();\r\n            self.world.taskMgr.refreshTaskInHome();\r\n            self.world.uiMgr.showTips(3)\r\n\r\n        }, () => {\r\n            self.world.uiMgr.showTips(4)\r\n        });\r\n    },\r\n\r\n    onPanelCheatClick: function () {\r\n        this.panelCheat.active = true;\r\n    },\r\n\r\n    showOfflineMultip: function (callback) {\r\n        this.panelOfflineGold.getComponent('PanelOfflineGold').showMultipNode(callback);\r\n    },\r\n\r\n    onSettingBtnClick: function () {\r\n        //点击设置按钮\r\n        AdvertMgr.instance.fireBaseEvent(\"click_setting_btn\");\r\n        this.settingNode.active = !this.settingNode.active;\r\n        if (!this.settingNode.active) {\r\n            if (this.isSetLanguage) {\r\n                cc.director.loadScene('Battle');\r\n            }\r\n        } else {\r\n            this.onEditLanguage(null, LanguageMgr.curIndex, true)\r\n        }\r\n    },\r\n\r\n    onConnectBtnClick: function () {\r\n        //点击Bitverse链接按钮\r\n        // this.settingNode.active = !this.settingNode.active;\r\n        //判断当前的关卡\r\n        //如果没有钱包地址，链接钱包\r\n        if(PlayerData.instance.bitverseWallet){\r\n            PlatformMgr.connectBitverse()\r\n        }\r\n        else{\r\n            let data = \r\n            {\r\n                \"id\": 202,\r\n                \"sort\": 17,\r\n                \"quality\": 8,\r\n                \"name\": \"NFT2\",\r\n                \"url\": \"texture/hero/player201\",\r\n                \"hexColor\": \"#5e62ff\",\r\n                \"handColor\": \"#362E2E\",\r\n                \"getWay\": 100,\r\n                \"priceType\": 0,\r\n                \"price\": 600000,\r\n                \"introduce\": \"Link wallet to get free !\",\r\n                \"initKnifeCount\": 4,\r\n                \"property\": 0,\r\n                \"propertyParam\": 10,\r\n                \"propertyTips\": \"speed+10%\",\r\n                \"goodsId\" : 202,\r\n                \"goodsName\" : \"Hero#002\",\r\n                \"token\" : \"87391307324056457762808332143355011852238642475825273327608161604337773052904\"\r\n              }\r\n            PlatformMgr.requestNFTGet(data)\r\n        }\r\n    },\r\n\r\n    onEditLanguage: function (event, data, isInit = false) {\r\n        var index = Number(data)\r\n        LanguageMgr.setLang(index);\r\n        for (let i = 0; i < this.selectLanguageNode.children.length; i++) {\r\n            var node = this.selectLanguageNode.children[i]\r\n            if (i === index) {\r\n                node.children[0].active = true;\r\n                node.children[1].active = false;\r\n            } else {\r\n                node.children[0].active = false;\r\n                node.children[1].active = true;\r\n            }\r\n        }\r\n        if (!isInit) this.isSetLanguage = true;\r\n    },\r\n\r\n    refreshOfflineGoldData: function () {\r\n        this.panelOfflineGold.getComponent('PanelOfflineGold').refreshData();\r\n    },\r\n\r\n    showPanelRepay: function (callback) {\r\n        this.panelRepay.active = true;\r\n        this.panelRepay.getComponent('PanelRepay').init(callback, this.world);\r\n    },\r\n\r\n    showUnlockGrow: function (callback) {\r\n        var comp = this.panelGrowUp.getComponent('PanelGrowUp')\r\n        if (comp && comp.showCallFunc) {\r\n            comp.showCallFunc(callback);\r\n            comp.showCallFunc = null;\r\n        } else {\r\n            callback();\r\n        }\r\n    },\r\n\r\n    showPanelAddTop: function (callback) {\r\n        this.panelAddTop.active = true;\r\n        this.panelAddTop.getComponent('PanelAddTop').init(this.world, callback);\r\n    },\r\n\r\n    showPanelInvite: function (callback) {\r\n        this.panelInvite.active = true;\r\n        this.panelInvite.getComponent('PanelInvite').init(this.world, callback);\r\n    },\r\n\r\n    showPanelDailyTask: function (callback) {\r\n        this.panelDailyTask.active = true;\r\n        this.panelDailyTask.getComponent('PanelDailyTask').init(this.world, callback);\r\n    },\r\n\r\n    showGetMoneyEffect: function (getGoldParam, offset = cc.v2(0, -200), activeGoldNode) {\r\n\r\n        if (this.activeCount !== 0) return;\r\n        if (activeGoldNode) {\r\n            this.activeCount++;\r\n            this.activeGoldNode(true);\r\n        }\r\n        var oldRankData = PlayerData.instance.oldRankData;\r\n        var rankData = PlayerData.instance.rankData;\r\n        var levelUp = oldRankData && rankData && oldRankData.id < rankData.id;\r\n\r\n        var final = cc.v2(-195, 565 + GameData.instance.screenHeight / 2 - 640);\r\n\r\n        var callback = () => {\r\n            PlayerData.instance.showGold = PlayerData.instance.gold;\r\n            this.update();\r\n            if (activeGoldNode) {\r\n                setTimeout(() => {\r\n                    this.activeCount--;\r\n                    this.activeGoldNode(false);\r\n                }, 400);\r\n            }\r\n        }\r\n        if (getGoldParam.isLucky) {\r\n            this.goldAnim.onGetLucky(callback, offset, final);\r\n            var multip = getGoldParam.multip;\r\n            if (multip && !levelUp) {\r\n                var extraGold = Math.ceil(getGoldParam.count * (multip - 1) / multip);\r\n                var str = Tools.getStringByFormat(ConfigData.instance.getUITipStr(2), extraGold)\r\n                this.showTips(str);\r\n            }\r\n        } else if (getGoldParam.isMore) {\r\n            this.goldAnim.onGetMore(callback, offset, final);\r\n            var multip = getGoldParam.multip;\r\n            if (multip && !levelUp) {\r\n                var extraGold = Math.ceil(getGoldParam.count * (multip - 1) / multip);\r\n                var str = Tools.getStringByFormat(ConfigData.instance.getUITipStr(2), extraGold)\r\n                this.showTips(str);\r\n            }\r\n        } else {\r\n            this.goldAnim.onGetNormal(callback, offset, final);\r\n        }\r\n\r\n        //刷新成长属性金币数字颜色\r\n        if (this.panelGrowUp) {\r\n            var comp = this.panelGrowUp.getComponent('PanelGrowUp');\r\n            comp.refreshShowData(comp.curType, false);\r\n        }\r\n    },\r\n\r\n\r\n    activeGoldNode: function (active) {\r\n        this.goldCountNode.active = active;\r\n    },\r\n\r\n    activeDiamondNode: function (active) {\r\n        this.diamondCountNode.active = active;\r\n    },\r\n\r\n    onPanelRechargeShopBtnClick: function () {\r\n        this.panelRechargeShop.active = true;\r\n        this.panelRechargeShop.getComponent('PanelShop').init(this.world, () => {\r\n            AdvertMgr.instance.showBanner();\r\n            console.log(\"showBanner onPanelRechargeShopBtnClick \")\r\n        });\r\n        AdvertMgr.instance.destoryBanner();\r\n    },\r\n\r\n    onAddTopBtnClick: function () {\r\n        this.panelAddTop.active = true;\r\n        this.panelAddTop.getComponent('PanelAddTop').init(this.world);\r\n    },\r\n\r\n    showActiveSuitEffect: function () {\r\n        this.activeSuitAnim.play();\r\n    },\r\n\r\n    onPanelHolidayRankBtnClick: function () {\r\n        if (this.panelHolidayRank) {\r\n            this.panelHolidayRank.active = true;\r\n            this.panelHolidayRank.getComponent('PanelHolidayRank').init(this.world);\r\n            for (let i = 2; i < 4; i++) {\r\n                var btn = this.userinfoBtns[i];\r\n                if (btn) btn.show();\r\n            }\r\n        }\r\n    },\r\n\r\n    showPanelRewardDetail: function () {\r\n        if (this.panelRewardDetail) {\r\n            this.panelRewardDetail.active = true;\r\n            this.panelRewardDetail.getComponent('PanelRewardDetail').init(this.world);\r\n        }\r\n    },\r\n\r\n\r\n    showPanelPKReward: function (data, callback) {\r\n        if (this.panelPKReward) {\r\n            this.panelPKReward.active = true;\r\n            this.panelPKReward.getComponent('PanelPkReward').init(data, callback, this.world);\r\n        }\r\n    },\r\n\r\n    showPanelWorldReward: function (data, callback) {\r\n        if (this.panelWorldReward) {\r\n            this.panelWorldReward.active = true;\r\n            this.panelWorldReward.getComponent('PanelWorldReward').init(data, callback, this.world);\r\n        }\r\n    },\r\n\r\n    showPanelHolidayRank: function (isPK, callback) {\r\n        if (this.panelHolidayRank) {\r\n            this.panelHolidayRank.active = true;\r\n            var comp = this.panelHolidayRank.getComponent('PanelHolidayRank')\r\n            comp.init(this.world, isPK, callback);\r\n            for (let i = 2; i < 4; i++) {\r\n                var btn = this.userinfoBtns[i];\r\n                if (btn) btn.show();\r\n            }\r\n        }\r\n    },\r\n\r\n    hidePanelHolidayUserinfoBtns: function () {\r\n        for (let i = 2; i < 4; i++) {\r\n            var btn = this.userinfoBtns[i];\r\n            if (btn) btn.hide()\r\n        }\r\n    },\r\n\r\n    onPanelPKNoticeBtnClick: function () {\r\n        this.panelPKNotice.active = true;\r\n    },\r\n\r\n    showPanelSubscribeReward: function (callback) {\r\n        this.panelSubscribeReward.active = true;\r\n        this.panelSubscribeReward.getComponent('PanelSubscribeReward').init(this.world, callback);\r\n\r\n    },\r\n\r\n    showPanelSubscribe: function (callback) {\r\n        this.panelSubscribe.active = true;\r\n        this.panelSubscribe.getComponent('PanelSubscribe').init(this.world, callback);\r\n    },\r\n\r\n    showPanelBuySkin: function (callback) {\r\n        this.panelBuySkin.active = true;\r\n        this.panelBuySkin.getComponent('PanelBuySkin').init(callback, this.world);\r\n    },\r\n\r\n    showPanelEvaulate: function (callback) {\r\n        this.panelEvaulate.active = true;\r\n        this.panelEvaulate.getComponent('PanelEvaulate').init(callback, this.world);\r\n    },\r\n\r\n\r\n    onRestorePurchaseBtnClick() {\r\n        var closeFunc = () => {\r\n            this.noAdsBtn.active = !PlayerData.instance.getVipWithoutInterstitial();\r\n            this.showTips(22);\r\n        }\r\n        PayMgr.instance.restoreProducts(closeFunc);\r\n    },\r\n\r\n    onNoADsBtnClick() {\r\n        var closeFunc = (isSuccess) => {\r\n            if (isSuccess) {\r\n                PlayerData.instance.updateVipWithoutInterstitial()\r\n                this.noAdsBtn.active = !PlayerData.instance.getVipWithoutInterstitial();\r\n            }\r\n        }\r\n\r\n        var errorFunc = () => {\r\n            this.showTips(23);\r\n        }\r\n\r\n        PayMgr.instance.payByIndex(100, closeFunc, errorFunc);\r\n    },\r\n});"]}