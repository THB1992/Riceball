{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\PanelSign.js"],"names":["UIUtil","require","ConfigData","PlayerData","ShareMgr","ShareType","AdvertMgr","AdverType","Tools","BagItem","ItemType","StageType","cc","Class","extends","Component","properties","goldNode","Node","skinNode","closeNode","itemSignPrefab","Prefab","itemParent","shareIcon","adverIcon","goldShareIcon","goldAdverIcon","itemPool","refuseSkinLabel","Label","refuseGoldLabel","init","world","callback","signCount","instance","daySign","signDatas","lateSignDatas","i","data","itemNode","instantiate","parent","x","y","Math","floor","position","v2","isGet","item","createItemWithString","reward","type","HERO_SKIN","isOwnHeroSkin","id","KNIFE_SKIN","isOwnKnifeSkin","itemComp","getComponent","isCheck","checkItem","refresh","fireBaseEvent","isGold","MONEY","active","stage","getCurStageByPrizeCount","func","hasAdver","openAdver","Sign","Free","Share","Adver","loadAdver","string","onGetSkinBtnClick","self","skinId","closeFunc","success","addHeroSkin","getHeroSkinById","onEquipHeroSkin","uiMgr","showReward","addKnifeSkin","getKnifeSkinById","onEquipKnifeSkin","onReceive","showShare","showAdver","errFunc","getAdvertUnitId","share","onReduceSkinBtnClick","close","node","activeGoldNode","activeDiamondNode","onMultipGoldBtnClick","count","num","updateGold","showGold","param","isMore","isLucky","showGetMoneyEffect","onNormalGoldBtnClick","updateSignCount","refreshRedDot"],"mappings":"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","file":"PanelSign.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const UIUtil = require('UIUtil');\r\nconst ConfigData = require('ConfigData');\r\nconst PlayerData = require('PlayerData');\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\nconst Tools = require('Tools');\r\nconst BagItem = require('BagItem');\r\nconst ItemType = require('Types').ItemType;\r\nconst StageType = require('Types').StageType;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        goldNode: cc.Node,\r\n        skinNode: cc.Node,\r\n        closeNode: cc.Node,\r\n\r\n        itemSignPrefab: cc.Prefab,\r\n        itemParent: cc.Node,\r\n\r\n        //皮肤领取按钮\r\n        shareIcon: cc.Node,\r\n        adverIcon: cc.Node,\r\n        //金币领取按钮\r\n        goldShareIcon: cc.Node,\r\n        goldAdverIcon: cc.Node,\r\n\r\n        itemPool: [],\r\n\r\n        //language\r\n        refuseSkinLabel: cc.Label,\r\n        refuseGoldLabel: cc.Label,\r\n    },\r\n\r\n    init: function (world, callback) {\r\n        this.world = world;\r\n        this.callback = callback;\r\n\r\n\r\n        var signCount = PlayerData.instance.signCount;\r\n        var daySign = PlayerData.instance.daySign;\r\n        var signDatas = ConfigData.instance.signDatas;\r\n\r\n        if (signCount >= 7) {\r\n            signDatas = ConfigData.instance.lateSignDatas;\r\n        };\r\n\r\n        for (let i = 0; i < 7; i++) {\r\n            var data = signDatas[i];\r\n            var itemNode = this.itemPool[i];\r\n            if (!itemNode) {\r\n                itemNode = cc.instantiate(this.itemSignPrefab);\r\n                this.itemPool[i] = itemNode;\r\n            }\r\n\r\n            itemNode.parent = this.itemParent;\r\n            itemNode.x = i % 3 * 235;\r\n            itemNode.y = Math.floor(i / 3) * -240;\r\n            if (i === 6) {\r\n                itemNode.position = cc.v2(235, -480);\r\n            }\r\n\r\n            var isGet = signCount % 7 > i || (signCount % 7 === i && daySign)\r\n            var item = BagItem.createItemWithString(data.reward);\r\n            switch (item.type) {\r\n                case ItemType.HERO_SKIN:\r\n                    isGet = PlayerData.instance.isOwnHeroSkin(item.id);\r\n                    break;\r\n                case ItemType.KNIFE_SKIN:\r\n                    isGet = PlayerData.instance.isOwnKnifeSkin(item.id);\r\n                    break;\r\n            }\r\n\r\n\r\n\r\n            const itemComp = itemNode.getComponent('ItemSign');\r\n            var isCheck = false;\r\n            if (signCount % 7 === i) {\r\n                if (isGet) {\r\n                    this.checkItem = null;\r\n                    PlayerData.instance.daySign = true;\r\n                } else {\r\n                    this.checkItem = itemComp;\r\n                    isCheck = true;\r\n                }\r\n            }\r\n\r\n            itemComp.init(data, item, i);\r\n            itemComp.refresh(isGet, isCheck);\r\n\r\n        }\r\n\r\n        AdvertMgr.instance.fireBaseEvent(\"page_show_login_reward\");\r\n\r\n        if (this.checkItem) {\r\n            var isGold = this.checkItem.item.type === ItemType.MONEY;\r\n            this.goldNode.active = isGold;\r\n            this.skinNode.active = !isGold;\r\n            // this.closeNode.active = true;\r\n            // this.receiveNode.active = false;\r\n            this.stage = ConfigData.instance.getCurStageByPrizeCount(PlayerData.instance);\r\n\r\n            var func = (hasAdver) => {\r\n                this.adverIcon.active = hasAdver;\r\n                this.shareIcon.active = !hasAdver;\r\n                this.goldAdverIcon.active = hasAdver;\r\n                this.goldShareIcon.active = !hasAdver;\r\n\r\n                if (hasAdver) {\r\n                    AdvertMgr.instance.openAdver(AdverType.Sign);\r\n                }\r\n            }\r\n\r\n            switch (this.stage) {\r\n                case StageType.Free:\r\n                    break;\r\n                case StageType.Share:\r\n                    func(false);\r\n                    break;\r\n                case StageType.Adver:\r\n                    AdvertMgr.instance.loadAdver(AdverType.Sign, func);\r\n                    break;\r\n            }\r\n\r\n        } else {\r\n            // this.closeNode.active = true;\r\n            this.goldNode.active = false;\r\n            this.skinNode.active = false;\r\n        }\r\n        // this.skinNode.active =true;\r\n        // AdvertMgr.instance.showBanner();\r\n\r\n        // this.stage = ConfigData.instance.getCurStage(PlayerData.instance.playCount, ConfigData.instance.clientData.multipGoldLimit);\r\n\r\n        this.refuseSkinLabel.string = \"No,thanks\";\r\n        this.refuseGoldLabel.string = 'Get';\r\n\r\n    },\r\n\r\n    onGetSkinBtnClick: function () {\r\n        var self = this;\r\n        // 关闭广告时回调\r\n        var itemComp = self.checkItem;\r\n        var skinId = itemComp.item.id;\r\n        var closeFunc = function (success) {\r\n            if (success) {\r\n                switch (itemComp.item.type) {\r\n                    case ItemType.HERO_SKIN:\r\n                        PlayerData.instance.addHeroSkin(skinId);\r\n                        //装备上\r\n                        var data = ConfigData.instance.getHeroSkinById(skinId);\r\n                        self.world.onEquipHeroSkin(data, true);\r\n                        //展示出来\r\n                        self.world.uiMgr.showReward(data);\r\n                        break;\r\n                    case ItemType.KNIFE_SKIN:\r\n                        PlayerData.instance.addKnifeSkin(skinId);\r\n                        //装备上\r\n                        var data = ConfigData.instance.getKnifeSkinById(skinId);\r\n                        self.world.onEquipKnifeSkin(data, true);\r\n                        //展示出来\r\n                        self.world.uiMgr.showReward(data);\r\n                        break;\r\n                }\r\n                self.onReceive();\r\n            }\r\n        }\r\n\r\n\r\n        if (this.shareIcon.active) {\r\n            this.showShare(closeFunc)\r\n        } else if (this.adverIcon.active) {\r\n            this.showAdver(closeFunc)\r\n        } else {\r\n            closeFunc(true);\r\n        }\r\n    },\r\n\r\n    showAdver: function (closeFunc) {\r\n        var errFunc = () => {\r\n            this.showShare(closeFunc);\r\n        }\r\n        \r\n        AdvertMgr.instance.fireBaseEvent(\"click_adv_btn\",\"position_id\",ConfigData.instance.getAdvertUnitId(AdverType.Sign));\r\n        \r\n        AdvertMgr.instance.showAdver(AdverType.Sign, closeFunc, errFunc);\r\n    },\r\n\r\n    showShare: function (closeFunc) {\r\n        ShareMgr.share(ShareType.Sign, closeFunc);\r\n    },\r\n\r\n    onReduceSkinBtnClick: function () {\r\n        this.close()\r\n        if (this.callback) this.callback();\r\n    },\r\n\r\n    close() {\r\n        this.node.active = false;\r\n        this.world.uiMgr.activeGoldNode(true);\r\n        this.world.uiMgr.activeDiamondNode(true);\r\n    },\r\n\r\n    onMultipGoldBtnClick: function () {\r\n        var self = this;\r\n        var item = self.checkItem.item;\r\n        // 关闭广告时回调\r\n        var closeFunc = (success) => {\r\n            if (success) {\r\n                var count = item.num * 3;\r\n                PlayerData.instance.updateGold(count);\r\n                PlayerData.instance.showGold -= count;\r\n                var param = {\r\n                    count: count,\r\n                    isMore: true,\r\n                    isLucky: false,\r\n                }\r\n                self.world.uiMgr.showGetMoneyEffect(param);\r\n                self.onReceive();\r\n            }\r\n        }\r\n\r\n        if (this.goldShareIcon.active) {\r\n            this.showShare(closeFunc)\r\n        } else if (this.goldAdverIcon.active) {\r\n            this.showAdver(closeFunc)\r\n        } else {\r\n            closeFunc(true);\r\n        }\r\n    },\r\n\r\n    onNormalGoldBtnClick: function () {\r\n        var item = this.checkItem.item;\r\n        var count = item.num;\r\n        PlayerData.instance.updateGold(count);\r\n        PlayerData.instance.showGold -= count;\r\n        var param = {\r\n            count: count,\r\n            isMore: false,\r\n            isLucky: false,\r\n        }\r\n        this.world.uiMgr.showGetMoneyEffect(param);\r\n\r\n        this.onReceive();\r\n\r\n    },\r\n\r\n    onReceive: function () {\r\n        PlayerData.instance.updateSignCount();\r\n        this.checkItem.refresh(true, false);\r\n        this.world.uiMgr.refreshRedDot();\r\n        this.close()\r\n        if (this.callback) this.callback();\r\n    },\r\n});"]}