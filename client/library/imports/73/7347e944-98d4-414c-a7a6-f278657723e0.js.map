{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\PanelHolidayRank.js"],"names":["Tools","require","ConfigData","PlayerData","AdvertMgr","AdverType","ShareMgr","ShareType","TaskType","GameData","PlatformMgr","CHECK_COLOR","cc","Color","fromHEX","PanelHolidayRank","Class","extends","Component","properties","pkNode","Node","pkScrollView","pkRankPrefab","Prefab","pkRewardNode","pkRewardScrollView","pkRewardPrefab","pkCountDownLabel","Label","pkBtn","pkCheckNode","pkNotCheckNode","pkTitleNode","pkRoundLabel","pkMyRankParent","worldNode","worldScrollView","worldRankPrefab","worldRewardNode","worldRewardScrollView","worldRewardPrefab","worldCountDownLabel","worldBtn","worldCheckNode","worldNotCheckNode","worldTitleNode","worldRoundLabel","worldMyRankParent","leftPageBtn","rightPageBtn","worldRewardBg","worldRewardDetailBtn","worldEmptyNode","worldEffect","Animation","worldRefreshTips","pkRollAnim","pkRollNode","daySpan","init","world","isPK","callback","_pkRewardScrollView","getOrAddComponent","instance","holidayPKRewardDatas","itemPrefab","className","startX","gapX","gapY","perLine","_worldRewardScrollView","holidayWorldRewardDatas","startUpdate","refreshPKRank","isDuringHolidayRankTime","getCurTime","onPKNodeBtnClick","onWorldNodeBtnClick","active","x","node","getHolidayPKRank","data","mineData","string","round","rankInfo","pkMyRankNode","instantiate","parent","pkMyRankComp","getComponent","isShowLog","console","error","_pkScrollView","itemPKPool","index","setTimeout","stopAllActions","runAction","moveBy","v2","easing","easeBackOut","refreshPKRollAnim","refreshWorldRank","getHolidayWorldRank","isHourSpanRefresh","worldRound","worldMyRankNode","worldMyRankComp","_worldScrollView","itemWorldPool","maxWorldRound","scrollToRank","rank","length","playWorldEffect","play","color","WHITE","onPKRewardBtnClick","onPKRewardCloseBtnClick","onWorldRewardBtnClick","playerWorldRewardDetail","rewardInfo","height","onWorldRewardCloseBtnClick","showPanelRewardDetail","uiMgr","close","hidePanelHolidayUserinfoBtns","turnPageLeft","turnPageRight","onbtn1","setHolidayScore","onbtn2","getHolidayPKReward","onbtn3","getHolidayWorldReward","onbtn4","getHolidayWorldRewardInfo","update","dt","pkSurplusTime","time","timeOffset","getCountDownTime","hour","minute","second","date","Date","h","getHours","m","getMinutes","curHour","log","str","holidayDatas","refreshWorldTime","nextHour","clearHolidayData","updateWorldRewardDetail","pdata","showPanelPKReward","wdata","showPanelWorldReward","curData","myPKRankData","oldData","myOldPKRankData","comp","position","moveTo"],"mappings":"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","file":"PanelHolidayRank.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["/**\r\n * @fileoverview PanelHolidayRank\r\n * @author <zhangzhuang@gameley.cn> (张庄)\r\n */\r\nconst Tools = require('Tools');\r\nconst ConfigData = require('ConfigData');\r\nconst PlayerData = require('PlayerData');\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst TaskType = require('Types').TaskType;\r\nconst GameData = require('GameData');\r\nconst PlatformMgr = require('PlatformMgr');\r\n\r\nconst CHECK_COLOR = new cc.Color().fromHEX('#bb3a07');\r\n\r\n//假期排行\r\nconst PanelHolidayRank = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        pkNode: cc.Node,\r\n        pkScrollView: cc.Node,\r\n        pkRankPrefab: cc.Prefab,\r\n        pkRewardNode: cc.Node,\r\n        pkRewardScrollView: cc.Node,\r\n        pkRewardPrefab: cc.Prefab,\r\n        pkCountDownLabel: cc.Label,\r\n        pkBtn: cc.Node,\r\n        pkCheckNode: cc.Node,\r\n        pkNotCheckNode: cc.Node,\r\n        pkTitleNode: cc.Node,\r\n        pkRoundLabel: cc.Label,\r\n\r\n        pkMyRankParent: cc.Node,\r\n\r\n        worldNode: cc.Node,\r\n        worldScrollView: cc.Node,\r\n        worldRankPrefab: cc.Prefab,\r\n        worldRewardNode: cc.Node,\r\n        worldRewardScrollView: cc.Node,\r\n        worldRewardPrefab: cc.Prefab,\r\n        worldCountDownLabel: cc.Label,\r\n        worldBtn: cc.Node,\r\n        worldCheckNode: cc.Node,\r\n        worldNotCheckNode: cc.Node,\r\n        worldTitleNode: cc.Node,\r\n        worldRoundLabel: cc.Label,\r\n\r\n        // worldMyRankBar: cc.Node,\r\n        worldMyRankParent: cc.Node,\r\n\r\n        leftPageBtn: cc.Node,\r\n        rightPageBtn: cc.Node,\r\n\r\n        worldRewardBg: cc.Node,\r\n        worldRewardDetailBtn: cc.Node,\r\n        worldEmptyNode: cc.Node,\r\n        worldEffect: cc.Animation,\r\n        worldRefreshTips: cc.Label,\r\n\r\n        pkRollAnim: cc.Animation,\r\n        pkRollNode: cc.Node,\r\n        daySpan: false,\r\n    },\r\n    // LIFE-CYCLE CALLBACKS:\r\n    // onLoad () {},\r\n\r\n    //isPK代表是展示pk榜还是世界榜\r\n\r\n    init(world, isPK = true, callback) {\r\n        this.world = world;\r\n        this.isPK = isPK;\r\n        this.callback = callback;\r\n        //小组排行奖励\r\n        this._pkRewardScrollView = Tools.getOrAddComponent(this.pkRewardScrollView, 'MyScrollView');\r\n        this._pkRewardScrollView.init(ConfigData.instance.holidayPKRewardDatas, {\r\n            itemPrefab: this.pkRewardPrefab,\r\n            className: 'ItemPKReward',\r\n            startX: 0,\r\n            gapX: 15,\r\n            gapY: 5,\r\n            perLine: 1,\r\n        })\r\n        // this._pkRewardScrollView.scrollToRank(0)\r\n        //世界排行奖励\r\n        this._worldRewardScrollView = Tools.getOrAddComponent(this.worldRewardScrollView, 'MyScrollView');\r\n        this._worldRewardScrollView.init(ConfigData.instance.holidayWorldRewardDatas, {\r\n            itemPrefab: this.worldRewardPrefab,\r\n            className: 'ItemWorldReward',\r\n            startX: 0,\r\n            gapX: 15,\r\n            gapY: 10,\r\n            perLine: 1,\r\n        })\r\n        // this._worldRewardScrollView.scrollToRank(0)\r\n        this.startUpdate = false;\r\n        // console.log('时间：', new Date(PlayerData.instance.getCurTime()));\r\n\r\n        this.refreshPKRank()\r\n        if (ConfigData.instance.isDuringHolidayRankTime(PlayerData.instance.getCurTime())) {\r\n            // if (false) {\r\n            if (isPK) {\r\n                this.onPKNodeBtnClick();\r\n            } else {\r\n                this.onWorldNodeBtnClick();\r\n            }\r\n            this.pkBtn.active = true;\r\n            this.worldBtn.x = 170;\r\n            this.worldRefreshTips.node.active = true;\r\n            this.worldCountDownLabel.node.active = true;\r\n        } else {\r\n            this.onWorldNodeBtnClick();\r\n            this.pkBtn.active = false;\r\n            this.worldBtn.x = 0;\r\n            this.worldRefreshTips.node.active = false;\r\n            this.worldCountDownLabel.node.active = false;\r\n        }\r\n    },\r\n\r\n    // closePKBtn() {\r\n\r\n    // },\r\n\r\n    refreshPKRank() {\r\n        PlayerData.instance.getHolidayPKRank((data, mineData) => {\r\n            this.pkRoundLabel.string = '(第' + data.round + '轮)';\r\n            this.worldRoundLabel.string = '(第' + data.round + '轮)';\r\n            // this.pkSurplusTime = data.surplusTime;\r\n            var rankInfo = data.rankInfo;\r\n            //排序\r\n\r\n            //我的小组排行\r\n            if (mineData) {\r\n                var pkMyRankNode = cc.instantiate(this.pkRankPrefab);\r\n                pkMyRankNode.parent = this.pkMyRankParent;\r\n                this.pkMyRankComp = pkMyRankNode.getComponent('ItemPKRank');\r\n                this.pkMyRankComp.init(mineData);\r\n            } else {\r\n                if (GameData.instance.isShowLog()) {\r\n                    console.error('我的小组排行为空');\r\n                }\r\n            }\r\n\r\n\r\n            //小组排行\r\n            this._pkScrollView = Tools.getOrAddComponent(this.pkScrollView, 'MyScrollView');\r\n            this.itemPKPool = this._pkScrollView.init(rankInfo, {\r\n                itemPrefab: this.pkRankPrefab,\r\n                className: 'ItemPKRank',\r\n                startX: 0,\r\n                gapX: 15,\r\n                gapY: 10,\r\n                perLine: 1,\r\n            }, (index, node) => {\r\n                setTimeout(() => {\r\n                    node.stopAllActions();\r\n                    node.x = 1000;\r\n                    node.runAction(cc.moveBy(0.5, cc.v2(-1000, 0)).easing(cc.easeBackOut(1.0)));\r\n                }, index * 100)\r\n            })\r\n            this.refreshPKRollAnim();\r\n            this.refreshWorldRank(0);\r\n        })\r\n    },\r\n\r\n\r\n    refreshWorldRank(round) {\r\n        PlayerData.instance.getHolidayWorldRank(round, (data, mineData, isHourSpanRefresh) => {\r\n            var rankInfo = data.rankInfo;\r\n            this.worldRound = data.round;\r\n            this.worldRoundLabel.string = '(第' + data.round + '轮)';\r\n            // this.worldSurplusTime = data.surplusTime;\r\n            // 我的世界排行\r\n            if (mineData) {\r\n                var worldMyRankNode = cc.instantiate(this.pkRankPrefab);\r\n                worldMyRankNode.parent = this.worldMyRankParent;\r\n                this.worldMyRankComp = worldMyRankNode.getComponent('ItemPKRank');\r\n                this.worldMyRankComp.init(mineData);\r\n            } else {\r\n                if (GameData.instance.isShowLog()) {\r\n                    console.error('我的世界排行为空');\r\n                }\r\n            }\r\n            //世界排行\r\n            this._worldScrollView = Tools.getOrAddComponent(this.worldScrollView, 'MyScrollView');\r\n            this.itemWorldPool = this._worldScrollView.init(rankInfo, {\r\n                itemPrefab: this.pkRankPrefab,\r\n                className: 'ItemPKRank',\r\n                startX: 0,\r\n                gapX: 15,\r\n                gapY: 10,\r\n                perLine: 1,\r\n            }, (index, node) => {\r\n                setTimeout(() => {\r\n                    node.stopAllActions();\r\n                    node.x = 1000;\r\n                    node.runAction(cc.moveBy(0.5, cc.v2(-1000, 0)).easing(cc.easeBackOut(1.0)));\r\n                }, index * 100)\r\n            })\r\n\r\n            if (this.worldRound === PlayerData.instance.maxWorldRound && mineData) {\r\n                this._worldScrollView.scrollToRank(mineData.rank, 0.5);\r\n            }\r\n\r\n            this.leftPageBtn.active = data.round !== 1;\r\n            this.rightPageBtn.active = data.round !== PlayerData.instance.maxWorldRound;\r\n            this.worldMyRankParent.active = data.round === PlayerData.instance.maxWorldRound;\r\n            this.worldEmptyNode.active = !(rankInfo && rankInfo.length);\r\n\r\n\r\n\r\n\r\n            if (isHourSpanRefresh) {\r\n                if (mineData.rank === -1) {\r\n                    //如果是自动弹出的则关闭\r\n                    // if (!this.isPK) this.close();\r\n                    // this.playWorldEffect();\r\n                } else {\r\n                    this.playWorldEffect();\r\n                }\r\n            }\r\n\r\n\r\n            this.startUpdate = true;\r\n        })\r\n    },\r\n\r\n    playWorldEffect: function () {\r\n        this.worldEffect.play();\r\n    },\r\n\r\n    onPKNodeBtnClick() {\r\n        this.pkNode.active = true;\r\n        this.worldNode.active = false;\r\n        this.pkCheckNode.active = true;\r\n        this.pkNotCheckNode.active = false;\r\n        this.worldCheckNode.active = false;\r\n        this.worldNotCheckNode.active = true;\r\n        this.pkTitleNode.color = CHECK_COLOR;\r\n        this.worldTitleNode.color = cc.Color.WHITE;\r\n        this.pkRoundLabel.node.color = CHECK_COLOR;\r\n        this.worldRoundLabel.node.color = cc.Color.WHITE;\r\n        // for (let i = 0, l = this.itemPKPool.length; i < l; i++) {\r\n        //     var node = this.itemPKPool[i];\r\n        //     if (node) {\r\n        //         node.x = 1000;\r\n        //         setTimeout(() => {\r\n        //             node.stopAllActions();\r\n        //             node.runAction(cc.moveBy(0.5, cc.v2(-1000, 0)).easing(cc.easeBackOut(1.0)));\r\n        //         }, i * 50)\r\n        //     }\r\n        // }\r\n    },\r\n\r\n    onWorldNodeBtnClick() {\r\n        this.pkNode.active = false;\r\n        this.worldNode.active = true;\r\n        this.pkCheckNode.active = false;\r\n        this.pkNotCheckNode.active = true;\r\n        this.worldCheckNode.active = true;\r\n        this.worldNotCheckNode.active = false;\r\n        this.pkTitleNode.color = cc.Color.WHITE;\r\n        this.worldTitleNode.color = CHECK_COLOR;\r\n        this.pkRoundLabel.node.color = cc.Color.WHITE;\r\n        this.worldRoundLabel.node.color = CHECK_COLOR;\r\n        // if (this.worldRound === PlayerData.instance.maxWorldRound) {\r\n        //     this._worldScrollView.scrollToRank(PlayerData.instance.myWorldRankData.rank, 0.5, true);\r\n        // }\r\n\r\n        // for (let i = 0, l = this.itemWorldPool.length; i < l; i++) {\r\n        //     var node = this.itemWorldPool[i];\r\n        //     if (node) {\r\n        //         node.x = 1000;\r\n        //         setTimeout(() => {\r\n        //             node.stopAllActions();\r\n        //             node.runAction(cc.moveBy(0.5, cc.v2(-1000, 0)).easing(cc.easeBackOut(1.0)));\r\n        //         }, i * 50)\r\n        //     }\r\n        // }\r\n    },\r\n\r\n    onPKRewardBtnClick() {\r\n        this.pkRewardNode.active = true;\r\n    },\r\n\r\n    onPKRewardCloseBtnClick() {\r\n        this.pkRewardNode.active = false;\r\n    },\r\n\r\n    onWorldRewardBtnClick() {\r\n        this.worldRewardNode.active = true;\r\n        var data = PlayerData.instance.playerWorldRewardDetail;\r\n        if (!data) return;\r\n\r\n        if (data.rewardInfo && data.rewardInfo.length) {\r\n            this.worldRewardBg.height = 500;\r\n            this.worldRewardDetailBtn.active = true;\r\n        } else {\r\n            this.worldRewardBg.height = 380;\r\n            this.worldRewardDetailBtn.active = false;\r\n        }\r\n    },\r\n\r\n    onWorldRewardCloseBtnClick() {\r\n        this.worldRewardNode.active = false;\r\n    },\r\n\r\n    showPanelRewardDetail() {\r\n        this.world.uiMgr.showPanelRewardDetail();\r\n    },\r\n\r\n    close() {\r\n        this.node.active = false;\r\n        this.world.uiMgr.hidePanelHolidayUserinfoBtns();\r\n        if (this.callback) {\r\n            this.callback();\r\n        }\r\n    },\r\n\r\n    turnPageLeft() {\r\n        if (this.worldRound > 1) {\r\n            this.worldRound--;\r\n            this.refreshWorldRank(this.worldRound);\r\n        }\r\n    },\r\n\r\n    turnPageRight() {\r\n        if (this.worldRound < PlayerData.instance.maxWorldRound) {\r\n            this.worldRound++;\r\n            this.refreshWorldRank(this.worldRound);\r\n        }\r\n    },\r\n    onbtn1: function () {\r\n        PlatformMgr.setHolidayScore(4)\r\n    },\r\n    onbtn2: function () {\r\n        PlatformMgr.getHolidayPKReward();\r\n    },\r\n    onbtn3: function () {\r\n        PlatformMgr.getHolidayWorldReward();\r\n    },\r\n    onbtn4: function () {\r\n        PlatformMgr.getHolidayWorldRewardInfo();\r\n    },\r\n\r\n    update(dt) {\r\n\r\n        if (!this.startUpdate) return;\r\n\r\n        if (PlayerData.instance.pkSurplusTime) {\r\n            var time = PlayerData.instance.pkSurplusTime - PlayerData.instance.timeOffset;\r\n            if (time > 0) {\r\n                var time = Tools.getCountDownTime(time);\r\n                this.pkCountDownLabel.string = '今日本组PK结束时间剩余：' + time.hour + ':' + time.minute + ':' + time.second;\r\n                this.worldCountDownLabel.string = '今日世界PK结束时间剩余：' + time.hour + ':' + time.minute + ':' + time.second;\r\n            }\r\n        }\r\n\r\n        var date = new Date(PlayerData.instance.getCurTime());\r\n        var h = date.getHours();\r\n        var m = date.getMinutes();\r\n        if (GameData.instance.isShowLog()) {\r\n            if (h !== this.curHour) {\r\n                this.curHour = h;\r\n                console.log('---------------------------当前小时：' + h);\r\n            }\r\n        }\r\n        if (h >= 21) {\r\n            var str = '将于24点结算最终名次';\r\n            if (str !== this.worldRefreshTips.string) this.worldRefreshTips.string = '将于24点结算最终名次';\r\n        } else {\r\n            for (let hour of ConfigData.instance.holidayDatas.refreshWorldTime) {\r\n                if (h < hour) {\r\n                    h = hour;\r\n                    if (GameData.instance.isShowLog()) {\r\n                        if (h !== this.nextHour) {\r\n                            this.nextHour = h;\r\n                            console.log('---------------------------下次更新小时：' + h);\r\n                        }\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n            if (h !== this.h) {\r\n                console.log('---------------------------update上次更新小时：' + this.h);\r\n                this.h = h;\r\n                var str = '将于' + h + ':00更新排行';;\r\n                this.worldRefreshTips.string = str;\r\n                // this.worldRefreshTips.node.active = true;\r\n                if (this.curHour === 0 && m < 2 ) {\r\n                    this.worldRefreshTips.node.active = false;\r\n                    this.daySpan = true;\r\n                } else {\r\n                    PlayerData.instance.clearHolidayData();\r\n                    this.init(this.world);\r\n                }\r\n            }\r\n\r\n            if (this.daySpan) {\r\n                if (m < 2) {\r\n                    this.worldCountDownLabel.string = '正在结算中，两分钟后将公布上轮成绩';\r\n                } else {\r\n                    PlayerData.instance.updateWorldRewardDetail()\r\n                    PlatformMgr.getHolidayPKReward((pdata) => {\r\n                        this.world.uiMgr.showPanelPKReward(pdata, () => {\r\n                            PlatformMgr.getHolidayWorldReward((wdata) => {\r\n                                this.world.uiMgr.showPanelWorldReward(wdata);\r\n                            });\r\n                        })\r\n                    })\r\n                    PlayerData.instance.clearHolidayData();\r\n                    this.init(this.world);\r\n\r\n                    this.daySpan = false;\r\n                    this.worldRefreshTips.node.active = true;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n\r\n\r\n    refreshPKRollAnim: function () {\r\n        var curData = PlayerData.instance.myPKRankData;\r\n        var oldData = PlayerData.instance.myOldPKRankData;\r\n        var comp = this.pkRollNode.getComponent('ItemPKRank');\r\n\r\n        if (curData && oldData && curData.rank < oldData.rank) {\r\n            comp.init(oldData);\r\n            this._pkScrollView.scrollToRank(oldData.rank, 0.1);\r\n            this.pkRollAnim.play('ani-holiday-rank-1');\r\n            this.pkRollAnim.node.position = cc.v2(0, 0);\r\n            setTimeout(() => {\r\n                this._pkScrollView.scrollToRank(curData.rank, 0.5);\r\n                if (curData.rank <= 3) {\r\n                    this.pkRollAnim.node.runAction(cc.moveTo(0.5, cc.v2(0, 70 * (4 - curData.rank))));\r\n                }\r\n            }, 500);\r\n            setTimeout(() => {\r\n                this.pkRollAnim.play('ani-holiday-rank-2');\r\n                PlayerData.instance.myOldPKRankData = null;\r\n            }, 1000);\r\n        } else {\r\n            if (curData) this._pkScrollView.scrollToRank(curData.rank, 0.5);\r\n        }\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});"]}