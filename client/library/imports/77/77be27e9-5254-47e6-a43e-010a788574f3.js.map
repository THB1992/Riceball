{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\ItemHeroSkin.js"],"names":["ListItemBase","require","UIUtil","Tools","cc","Class","extends","properties","lockNode","Node","barNode","checkNode","equipNode","priceNode","priceLabel","Label","iconSprite","Sprite","taskLabel","needCheckNode","canUnLockNode","propertyNode","propertyLabel","newNode","goldIcon","diamondIcon","suitNode","init","data","price","string","getGoldStr","propertyTips","active","priceType","loadResSprite","url","i","children","length","suit","refresh","isGet","canUnLock","needCheck","isNew","processStr","node","opacity","getWay","y","one","taskShortOne","two","taskShortTwo","str","setCheck","isCheck","setEquip","isEquip"],"mappings":"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","file":"ItemHeroSkin.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["/**\r\n * @fileoverview 刀的商店皮肤item\r\n * @author zhangzhuang@gameley.cn (张庄)\r\n */\r\nconst ListItemBase = require('ListItemBase')\r\n// const AddEntitySystem = require('AddEntitySystem');\r\nconst UIUtil = require('UIUtil');\r\nconst Tools = require('Tools');\r\ncc.Class({\r\n    extends: ListItemBase,\r\n\r\n    properties: {\r\n        lockNode: cc.Node,\r\n        barNode: cc.Node,\r\n        checkNode: cc.Node,\r\n        equipNode: cc.Node,\r\n        priceNode: cc.Node,\r\n        priceLabel: cc.Label,\r\n        iconSprite: cc.Sprite,\r\n        taskLabel: cc.Label,\r\n        needCheckNode: cc.Node,\r\n        canUnLockNode: cc.Node,\r\n\r\n        propertyNode: cc.Node,\r\n        propertyLabel: cc.Label,\r\n        newNode: cc.Node,\r\n\r\n        goldIcon: cc.Node,\r\n        diamondIcon: cc.Node,\r\n\r\n        suitNode: cc.Node,\r\n    },\r\n\r\n    init: function (data) {\r\n        this.data = data;\r\n        if (data.price) this.priceLabel.string = Tools.getGoldStr(data.price);\r\n        if (data.propertyTips) this.propertyLabel.string = data.propertyTips;\r\n        this.goldIcon.active = data.priceType === 0;\r\n        this.diamondIcon.active = data.priceType === 1;\r\n\r\n        // AddEntitySystem.instance.loadHeroSkinSprite(this.iconSprite, data.skinIndex);\r\n        UIUtil.loadResSprite(this.iconSprite, data.url);\r\n        // cc.loader.loadRes(data.url, cc.SpriteFrame, (error, resource) => {\r\n        //     if (error) {\r\n        //         cc.error(error);\r\n        //     } else if (resource) {\r\n        //         this.iconSprite.spriteFrame = resource;\r\n        //     }\r\n        // })\r\n        for (let i = 0; i < this.suitNode.children.length; i++) {\r\n            if (this.suitNode.children[i]) {\r\n                this.suitNode.children[i].active = (i + 1) == data.suit;\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    refresh: function (isGet, canUnLock, needCheck, isNew, processStr) {\r\n        this.isGet = isGet;\r\n        this.lockNode.active = isGet || canUnLock ? false : true;\r\n        // this.iconSprite.setState(isGet || canUnLock ? cc.Sprite.State.NORMAL : cc.Sprite.State.GRAY);\r\n        this.iconSprite.node.opacity = isGet || canUnLock ? 255 : 153;\r\n        this.barNode.active = isGet || canUnLock ? false : true;\r\n        this.priceNode.active = isGet || this.data.getWay === 1 ? false : true;\r\n        this.taskLabel.node.active = !isGet && this.data.getWay === 1 && !canUnLock ? true : false;\r\n        this.needCheckNode.active = isGet && needCheck ? true : false;\r\n        this.canUnLockNode.active = !isGet && canUnLock ? true : false;\r\n\r\n\r\n        this.propertyNode.active = this.data.propertyTips ? true : false;\r\n        this.propertyNode.y = isGet || canUnLock ? -65 : 65;\r\n        this.suitNode.y = isGet || canUnLock ? -65 : 65;\r\n        this.newNode.active = !isGet && isNew ? true : false;\r\n\r\n        if (processStr || processStr === '') {\r\n            var one = this.data.taskShortOne ? this.data.taskShortOne : '';\r\n            var two = this.data.taskShortTwo ? this.data.taskShortTwo : '';\r\n            var str = '';\r\n            this.taskLabel.string = one;\r\n            str = this.taskLabel.string + processStr;\r\n            this.taskLabel.string = two;\r\n            str += this.taskLabel.string;\r\n            this.taskLabel.string = str\r\n        }\r\n    },\r\n\r\n    setCheck: function (isCheck) {\r\n        this.checkNode.active = isCheck;\r\n    },\r\n\r\n    setEquip: function (isEquip) {\r\n        this.equipNode.active = isEquip;\r\n    },\r\n});"]}