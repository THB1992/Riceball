{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\ItemHeroSkin_new.js"],"names":["ListItemBase","require","UIUtil","Tools","cc","Class","extends","properties","lockNodeBg","Node","lockNode","barNode","checkNode","equipNode","priceNode","priceLabel","Label","restNode","restLabel","iconSprite","Sprite","taskLabel","needCheckNode","canUnLockNode","propertyNode","propertyLabel","newNode","goldIcon","diamondIcon","suitNode","nullNode","leftHandNode","rightHandNode","handAni","Animation","canBuyNode","onLoad","animTime","getRandomInt","init","data","node","active","price","string","getGoldStr","priceType","loadResSprite","url","color","Color","fromHEX","handColor","i","children","length","suit","refresh","isGet","canUnLock","needCheck","isNew","processStr","canBuy","getWay","propertyTips","y","one","taskShortOne","two","taskShortTwo","str","rest","setCheck","isCheck","setEquip","isEquip","setCanBuy","update","dt","play","Math","random"],"mappings":"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","file":"ItemHeroSkin_new.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["/**\r\n * @fileoverview 刀的商店皮肤item\r\n * @author zhangzhuang@gameley.cn (张庄)\r\n */\r\nconst ListItemBase = require('ListItemBase')\r\n// const AddEntitySystem = require('AddEntitySystem');\r\nconst UIUtil = require('UIUtil');\r\nconst Tools = require('Tools');\r\ncc.Class({\r\n    extends: ListItemBase,\r\n\r\n    properties: {\r\n        lockNodeBg: cc.Node,\r\n        lockNode: cc.Node,\r\n        barNode: cc.Node,\r\n        checkNode: cc.Node,\r\n        equipNode: cc.Node,\r\n        priceNode: cc.Node,\r\n        priceLabel: cc.Label,\r\n        restNode: cc.Node,\r\n        restLabel: cc.Label,\r\n        iconSprite: cc.Sprite,\r\n        taskLabel: cc.Label,\r\n        needCheckNode: cc.Node,\r\n        canUnLockNode: cc.Node,\r\n\r\n        propertyNode: cc.Node,\r\n        propertyLabel: cc.Label,\r\n        newNode: cc.Node,\r\n\r\n        goldIcon: cc.Node,\r\n        diamondIcon: cc.Node,\r\n\r\n        suitNode: cc.Node,\r\n        nullNode: cc.Node,\r\n\r\n        leftHandNode: cc.Node,\r\n        rightHandNode: cc.Node,\r\n        handAni: cc.Animation,\r\n\r\n        canBuyNode: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        this.animTime = Tools.getRandomInt(5, 10);\r\n\r\n    },\r\n\r\n    init: function (data) {\r\n        this.node.active = true;\r\n        if (!data) {\r\n            this.nullNode.active = true;\r\n            return;\r\n        } else {\r\n            this.nullNode.active = false;\r\n        }\r\n\r\n        this.data = data;\r\n        if (data.price) this.priceLabel.string = Tools.getGoldStr(data.price);\r\n        // if (data.propertyTips) this.propertyLabel.string = data.propertyTips;\r\n        this.goldIcon.active = data.priceType === 0;\r\n        this.diamondIcon.active = data.priceType === 1;\r\n\r\n        // AddEntitySystem.instance.loadHeroSkinSprite(this.iconSprite, data.skinIndex);\r\n        UIUtil.loadResSprite(this.iconSprite, data.url);\r\n        this.leftHandNode.color = new cc.Color().fromHEX(data.handColor);\r\n        this.rightHandNode.color = new cc.Color().fromHEX(data.handColor);\r\n\r\n        for (let i = 0; i < this.suitNode.children.length; i++) {\r\n            if (this.suitNode.children[i]) {\r\n                this.suitNode.children[i].active = (i + 1) == data.suit;\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    refresh: function (isGet, canUnLock, needCheck, isNew, processStr, canBuy) {\r\n        this.isGet = isGet;\r\n        this.lockNode.active = isGet || canUnLock ? false : true;\r\n        this.lockNodeBg.active = isGet || canUnLock ? false : true;\r\n        // this.iconSprite.setState(isGet || canUnLock ? cc.Sprite.State.NORMAL : cc.Sprite.State.GRAY);\r\n        // this.iconSprite.node.opacity = isGet || canUnLock ? 255 : 153;\r\n        // this.barNode.active = isGet || canUnLock ? false : true;\r\n        this.priceNode.active = isGet || (this.data.getWay === 1 || this.data.getWay==100) ? false : true;\r\n        this.taskLabel.node.active = !isGet && this.data.getWay === 1 && !canUnLock ? true : false;\r\n        this.needCheckNode.active = isGet && needCheck ? true : false;\r\n        this.canUnLockNode.active = !isGet && canUnLock ? true : false;\r\n        // this.canBuyNode.active = !isGet && canBuy;\r\n        this.canBuyNode.active = false;\r\n        this.propertyNode.active = this.data.propertyTips ? true : false;\r\n        // this.propertyNode.y = isGet || canUnLock ? -65 : 65;\r\n        this.suitNode.y = isGet || canUnLock ? -85 : -45;\r\n        this.newNode.active = !isGet && isNew ? true : false;\r\n        if (processStr || processStr === '') {\r\n            var one = this.data.taskShortOne ? this.data.taskShortOne : '';\r\n            var two = this.data.taskShortTwo ? this.data.taskShortTwo : '';\r\n            var str = '';\r\n            this.taskLabel.string = one;\r\n            str = this.taskLabel.string + processStr;\r\n            this.taskLabel.string = two;\r\n            str += this.taskLabel.string;\r\n            this.taskLabel.string = str\r\n        }\r\n\r\n        //NFT测试显示余额\r\n        if (this.restNode && this.restLabel) {\r\n            this.restNode.active = this.data.getWay == 100 && !isGet\r\n            if (this.restNode.active) {\r\n                this.restLabel.string = this.data.rest || 1000\r\n            }\r\n        }\r\n    },\r\n\r\n    setCheck: function (isCheck) {\r\n        this.checkNode.active = isCheck;\r\n    },\r\n\r\n    setEquip: function (isEquip) {\r\n        this.equipNode.active = isEquip;\r\n    },\r\n\r\n    setCanBuy: function (canBuy) {\r\n        this.canBuyNode.active = canBuy;\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.isGet) return;\r\n        this.animTime -= dt;\r\n        if (this.animTime < 0) {\r\n            this.handAni.play();\r\n            this.animTime = Tools.getRandomInt(5, 15) + Math.random();\r\n        }\r\n    }\r\n});"]}