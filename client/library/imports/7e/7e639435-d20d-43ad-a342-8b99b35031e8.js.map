{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\PanelNotice.js"],"names":["NoticeType","require","cc","Class","extends","Component","properties","notice","Node","isOpen","onLoad","noticeArr","index","time","timeLimit","timeInterval","update","dt","isIn","actionOut","fadeOut","curType","curNotice","runAction","splice","length","actionIn","fadeIn","addSpecialNotice","type","showImportantNotice","opacity","close"],"mappings":";;;;;;AAAA,IAAMA,aAAaC,QAAQ,OAAR,EAAiBD,UAApC;;AAEAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQ,CAACL,GAAGM,IAAJ,CADA;AAERC,gBAAQ;AAFA,KAHP;;AASLC,YAAQ,kBAAY;AAChB,aAAKC,SAAL,GAAiB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAjB;AACA,aAAKC,KAAL,GAAa,CAAb;AACA,aAAKC,IAAL,GAAY,GAAZ;AACA,aAAKC,SAAL,GAAiB,CAAjB;AACA,aAAKC,YAAL,GAAoB,CAApB;AACA,aAAKN,MAAL,GAAc,KAAd;AACH,KAhBI;;AAkBLO,YAAQ,gBAAUC,EAAV,EAAc;AAClB,aAAKJ,IAAL,IAAaI,EAAb;;AAEA,YAAI,KAAKJ,IAAL,IAAa,KAAKC,SAAlB,IAA+B,KAAKI,IAAxC,EAA8C;AAC1C,iBAAKA,IAAL,GAAY,KAAZ;AACA,gBAAIC,YAAYjB,GAAGkB,OAAH,CAAW,CAAX,CAAhB;AACA,gBAAI,KAAKC,OAAL,GAAe,CAAnB,EAAsB;AAClBF,4BAAYjB,GAAGkB,OAAH,CAAW,CAAX,CAAZ;AACH;AACD,iBAAKX,MAAL,GAAc,KAAd;AACA,gBAAI,KAAKa,SAAT,EAAoB,KAAKA,SAAL,CAAeC,SAAf,CAAyBJ,SAAzB;AACvB;;AAED,YAAI,KAAKN,IAAL,IAAc,KAAKE,YAAL,GAAoB,KAAKD,SAA3C,EAAuD;AACnD,iBAAKD,IAAL,GAAY,CAAZ;AACA,iBAAKK,IAAL,GAAY,IAAZ;AACA,iBAAKG,OAAL,GAAe,KAAKV,SAAL,CAAe,KAAKC,KAApB,CAAf;AACA,iBAAKU,SAAL,GAAiB,KAAKf,MAAL,CAAY,KAAKc,OAAjB,CAAjB;;AAEA,gBAAI,KAAKV,SAAL,CAAe,KAAKC,KAApB,IAA6B,CAAjC,EAAoC;AAChC,qBAAKD,SAAL,CAAea,MAAf,CAAsB,KAAKZ,KAA3B,EAAkC,CAAlC;AACH,aAFD,MAEO;AACH,qBAAKA,KAAL;AACH;AACD,gBAAI,KAAKA,KAAL,IAAc,KAAKD,SAAL,CAAec,MAAjC,EAAyC,KAAKb,KAAL,GAAa,CAAb;AACzC,gBAAIc,WAAWxB,GAAGyB,MAAH,CAAU,CAAV,CAAf;AACA,gBAAI,KAAKN,OAAL,GAAe,CAAnB,EAAsB;AAClBK,2BAAWxB,GAAGyB,MAAH,CAAU,CAAV,CAAX;AACH;;AAED,iBAAKlB,MAAL,GAAc,IAAd;AACA,iBAAKa,SAAL,CAAeC,SAAf,CAAyBG,QAAzB;AACH;AAEJ,KApDI;;AAsDLE,sBAAkB,0BAAUC,IAAV,EAAgB;AAC9B;AACA,aAAKlB,SAAL,CAAea,MAAf,CAAsB,KAAKZ,KAA3B,EAAkC,CAAlC,EAAqCiB,IAArC;AACA;AACH,KA1DI;;AA4DLC,yBAAqB,6BAAUD,IAAV,EAAgB;AACjC,aAAKD,gBAAL,CAAsBC,IAAtB;AACA,aAAKhB,IAAL,IAAa,IAAb;AACA,YAAI,KAAKS,SAAT,EAAoB,KAAKA,SAAL,CAAeS,OAAf,GAAyB,CAAzB;AACvB,KAhEI;;AAkELC,WAAO,iBAAY;AACf,YAAI,KAAKV,SAAT,EAAoB,KAAKA,SAAL,CAAeS,OAAf,GAAyB,CAAzB;AACpB,aAAKtB,MAAL,GAAc,KAAd;AACH;AACD;AAtEK,CAAT","file":"PanelNotice.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const NoticeType = require('Types').NoticeType;\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        notice: [cc.Node],\r\n        isOpen: false,\r\n    },\r\n\r\n\r\n    onLoad: function () {\r\n        this.noticeArr = [0, 1, 2, 3];\r\n        this.index = 0;\r\n        this.time = 999;\r\n        this.timeLimit = 5;\r\n        this.timeInterval = 3;\r\n        this.isOpen = false;\r\n    },\r\n\r\n    update: function (dt) {\r\n        this.time += dt;\r\n\r\n        if (this.time >= this.timeLimit && this.isIn) {\r\n            this.isIn = false;\r\n            var actionOut = cc.fadeOut(1);\r\n            if (this.curType > 8) {\r\n                actionOut = cc.fadeOut(0);\r\n            }\r\n            this.isOpen = false;\r\n            if (this.curNotice) this.curNotice.runAction(actionOut);\r\n        }\r\n\r\n        if (this.time >= (this.timeInterval + this.timeLimit)) {\r\n            this.time = 0;\r\n            this.isIn = true;\r\n            this.curType = this.noticeArr[this.index];\r\n            this.curNotice = this.notice[this.curType];\r\n\r\n            if (this.noticeArr[this.index] > 3) {\r\n                this.noticeArr.splice(this.index, 1);\r\n            } else {\r\n                this.index++;\r\n            }\r\n            if (this.index >= this.noticeArr.length) this.index = 0;\r\n            var actionIn = cc.fadeIn(1);\r\n            if (this.curType > 8) {\r\n                actionIn = cc.fadeIn(0);\r\n            }\r\n\r\n            this.isOpen = true;\r\n            this.curNotice.runAction(actionIn);\r\n        }\r\n\r\n    },\r\n\r\n    addSpecialNotice: function (type) {\r\n        // console.log(this.noticeArr)\r\n        this.noticeArr.splice(this.index, 0, type);\r\n        // console.log(this.noticeArr)\r\n    },\r\n\r\n    showImportantNotice: function (type) {\r\n        this.addSpecialNotice(type);\r\n        this.time += 9999;\r\n        if (this.curNotice) this.curNotice.opacity = 0;\r\n    },\r\n\r\n    close: function () {\r\n        if (this.curNotice) this.curNotice.opacity = 0;\r\n        this.isOpen = false;\r\n    }\r\n    // update (dt) {},\r\n});"]}