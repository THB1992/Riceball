{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\component\\knife/assets\\scripts\\battle\\component\\knife\\KnifeOwnerComponent.js"],"names":["KnifeOwnerComponent","cc","Class","extends","Component","properties","owner","isDirty","onLoad","node","on","updateOwner","noticeOwnerLeave","addKnife","addBuff","stopParentRotate","localHeroCollision","isCollCircleWall","resetDirty","onAttackBox","detail","oldOwner","emit","buffId","state"],"mappings":";;;;;;AAAA;;;;AAIA,IAAMA,sBAAsBC,GAAGC,KAAH,CAAS;AACjCC,aAASF,GAAGG,SADqB;AAEjCC,gBAAY;AACRC,eAAO,IADC;AAERC,iBAAS;AAFD,KAFqB;;AAOjCC,YAAQ,kBAAY;AAChB,aAAKC,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA4B,KAAKC,WAAjC,EAA8C,IAA9C;AACA,aAAKF,IAAL,CAAUC,EAAV,CAAa,kBAAb,EAAiC,KAAKE,gBAAtC,EAAwD,IAAxD;AACA,aAAKH,IAAL,CAAUC,EAAV,CAAa,UAAb,EAAyB,KAAKG,QAA9B,EAAwC,IAAxC;AACA,aAAKJ,IAAL,CAAUC,EAAV,CAAa,SAAb,EAAwB,KAAKI,OAA7B,EAAsC,IAAtC;AACA,aAAKL,IAAL,CAAUC,EAAV,CAAa,kBAAb,EAAiC,KAAKK,gBAAtC,EAAwD,IAAxD;AACA,aAAKN,IAAL,CAAUC,EAAV,CAAa,oBAAb,EAAmC,KAAKM,kBAAxC,EAA4D,IAA5D;AACA,aAAKP,IAAL,CAAUC,EAAV,CAAa,kBAAb,EAAiC,KAAKO,gBAAtC,EAAwD,IAAxD;AACA,aAAKR,IAAL,CAAUC,EAAV,CAAa,YAAb,EAA2B,KAAKQ,UAAhC,EAA4C,IAA5C;AACA,aAAKT,IAAL,CAAUC,EAAV,CAAa,aAAb,EAA4B,KAAKS,WAAjC,EAA8C,IAA9C;AAEH,KAlBgC;;AAoBjCR,iBAAa,qBAAUS,MAAV,EAAkB;AAC3B,aAAKd,KAAL,GAAac,MAAb;AACA,aAAKC,QAAL,GAAgBD,MAAhB;AACA,aAAKb,OAAL,GAAe,IAAf;AACH,KAxBgC;;AA0BjCK,sBAAkB,4BAAY;AAC1B,YAAI,KAAKN,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWgB,IAAX,CAAgB,aAAhB,EAA+B,KAAKb,IAApC;AACA,iBAAKH,KAAL,GAAa,IAAb;AACH;AACJ,KA/BgC;;AAiCjCO,cAAU,kBAAUJ,IAAV,EAAgB;AACtB,YAAI,KAAKH,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWgB,IAAX,CAAgB,UAAhB,EAA4Bb,IAA5B;AACH;AACJ,KArCgC;;AAuCjCK,aAAS,iBAAUS,MAAV,EAAkB;AACvB,YAAI,KAAKjB,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWgB,IAAX,CAAgB,SAAhB,EAA2BC,MAA3B;AACH;AACJ,KA3CgC;;AA6CjCJ,iBAAa,qBAAUV,IAAV,EAAgB;AACzB,YAAI,KAAKH,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWgB,IAAX,CAAgB,aAAhB,EAA+Bb,IAA/B;AACH;AACJ,KAjDgC;;AAmDjCM,sBAAkB,4BAAY;AAC1B,YAAI,KAAKT,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWgB,IAAX,CAAgB,kBAAhB;AACH;AACJ,KAvDgC;;AAyDjCN,wBAAoB,8BAAY;AAC5B,YAAI,KAAKV,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWgB,IAAX,CAAgB,oBAAhB;AACH;AACJ,KA7DgC;;AA+DjCL,sBAAkB,0BAAUO,KAAV,EAAiB;AAC/B,YAAI,KAAKlB,KAAT,EAAgB;AACZ,iBAAKA,KAAL,CAAWgB,IAAX,CAAgB,kBAAhB,EAAoCE,KAApC;AACH;AACJ,KAnEgC;;AAsEjCN,gBAAY,sBAAY;AACpB,aAAKX,OAAL,GAAe,KAAf;AACH;AAxEgC,CAAT,CAA5B","file":"KnifeOwnerComponent.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\component\\knife","sourcesContent":["/**\n * @fileoverview 刀拥有者组件，同时控制与刀主人的一些交互\n * @author jinhaitao@gameley.cn (金海涛)\n */\nconst KnifeOwnerComponent = cc.Class({\n    extends: cc.Component,\n    properties: {\n        owner: null,\n        isDirty: false,\n    },\n\n    onLoad: function () {\n        this.node.on('updateOwner', this.updateOwner, this);\n        this.node.on('noticeOwnerLeave', this.noticeOwnerLeave, this);\n        this.node.on('addKnife', this.addKnife, this);\n        this.node.on('addBuff', this.addBuff, this);\n        this.node.on('stopParentRotate', this.stopParentRotate, this);\n        this.node.on('localHeroCollision', this.localHeroCollision, this);\n        this.node.on('isCollCircleWall', this.isCollCircleWall, this);\n        this.node.on('resetDirty', this.resetDirty, this);\n        this.node.on('onAttackBox', this.onAttackBox, this);\n\n    },\n\n    updateOwner: function (detail) {\n        this.owner = detail;\n        this.oldOwner = detail;\n        this.isDirty = true;\n    },\n\n    noticeOwnerLeave: function () {\n        if (this.owner) {\n            this.owner.emit('reduceKnife', this.node);\n            this.owner = null;\n        }\n    },\n\n    addKnife: function (node) {\n        if (this.owner) {\n            this.owner.emit('addKnife', node);\n        }\n    },\n\n    addBuff: function (buffId) {\n        if (this.owner) {\n            this.owner.emit('addBuff', buffId);\n        }\n    },\n\n    onAttackBox: function (node) {\n        if (this.owner) {\n            this.owner.emit('onAttackBox', node);\n        }\n    },\n    \n    stopParentRotate: function () {\n        if (this.owner) {\n            this.owner.emit('stopParentRotate');\n        }\n    },\n\n    localHeroCollision: function () {\n        if (this.owner) {\n            this.owner.emit('localHeroCollision');\n        }\n    },\n\n    isCollCircleWall: function (state) {\n        if (this.owner) {\n            this.owner.emit('isCollCircleWall', state);\n        }\n    },\n\n\n    resetDirty: function () {\n        this.isDirty = false;\n    }\n})"]}