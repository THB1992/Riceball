{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\component\\player/assets\\scripts\\battle\\component\\player\\HeroScale.js"],"names":["BuffState","require","cc","Class","extends","Component","properties","scaleMultip","newScaleMultip","init","player","node","on","changeScaleMultip","multip","scalePer","updateGameLogic","dt","length","followPlayer","knivesCmp","knives","newScale","scale"],"mappings":";;;;;;AAAA,IAAMA,YAAYC,QAAQ,OAAR,EAAiBD,SAAnC;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa,CADL;AAERC,wBAAgB;AAFR,KAHP;;AASLC,UAAM,cAAUC,MAAV,EAAkB;AACpB,aAAKA,MAAL,GAAcA,MAAd;AACA,aAAKC,IAAL,CAAUC,EAAV,CAAa,mBAAb,EAAkC,KAAKC,iBAAvC,EAA0D,IAA1D;AACH,KAZI;;AAcLA,uBAAmB,2BAAUC,MAAV,EAAkB;AACjC,aAAKN,cAAL,GAAsBM,MAAtB;AACA,aAAKC,QAAL,GAAiB,KAAKP,cAAL,GAAsB,KAAKD,WAA5C;AACH,KAjBI;;AAoBLS,mBApBK,2BAoBWC,EApBX,EAoBe;;AAEhB,YAAI,KAAKT,cAAL,KAAwB,KAAKD,WAAjC,EAA8C;AAC1C,iBAAKA,WAAL,IAAoB,KAAKQ,QAAL,GAAgBE,EAApC;;AAEA,gBAAI,KAAKF,QAAL,GAAgB,CAApB,EAAuB;AACnB,oBAAI,KAAKR,WAAL,GAAmB,KAAKC,cAA5B,EAA4C;AACxC,yBAAKD,WAAL,GAAmB,KAAKC,cAAxB;AACH;AACJ,aAJD,MAIO;AACH,oBAAI,KAAKD,WAAL,GAAmB,KAAKC,cAA5B,EAA4C;AACxC,yBAAKD,WAAL,GAAmB,KAAKC,cAAxB;AACH;AACJ;AACJ;;AAGD,YAAIU,SAAS,KAAKR,MAAL,CAAYS,YAAZ,CAAyBC,SAAzB,CAAmCC,MAAnC,CAA0CH,MAAvD;AACA,YAAII,WAAW,CAACJ,SAAS,CAAT,GAAa,CAAb,GAAiBA,SAAS,CAA3B,IAAgC,KAAhC,GAAwC,CAAvD;AACA,YAAII,WAAW,GAAf,EAAoBA,WAAW,GAAX;AACpBA,mBAAWA,WAAW,KAAKf,WAA3B;AACA,YAAI,KAAKI,IAAL,CAAUY,KAAV,KAAoBD,QAAxB,EAAkC;AAC9B,iBAAKX,IAAL,CAAUY,KAAV,GAAkBD,QAAlB;AACH;AACJ;AA5CI,CAAT","file":"HeroScale.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\component\\player","sourcesContent":["const BuffState = require('Types').BuffState;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        scaleMultip: 1,\r\n        newScaleMultip: 1,\r\n    },\r\n\r\n\r\n    init: function (player) {\r\n        this.player = player;\r\n        this.node.on('changeScaleMultip', this.changeScaleMultip, this);\r\n    },\r\n\r\n    changeScaleMultip: function (multip) {\r\n        this.newScaleMultip = multip;\r\n        this.scalePer = (this.newScaleMultip - this.scaleMultip);\r\n    },\r\n\r\n\r\n    updateGameLogic(dt) {\r\n\r\n        if (this.newScaleMultip !== this.scaleMultip) {\r\n            this.scaleMultip += this.scalePer * dt;\r\n\r\n            if (this.scalePer > 0) {\r\n                if (this.scaleMultip > this.newScaleMultip) {\r\n                    this.scaleMultip = this.newScaleMultip;\r\n                }\r\n            } else {\r\n                if (this.scaleMultip < this.newScaleMultip) {\r\n                    this.scaleMultip = this.newScaleMultip;\r\n                }\r\n            }\r\n        }\r\n\r\n\r\n        var length = this.player.followPlayer.knivesCmp.knives.length;\r\n        var newScale = (length < 8 ? 0 : length - 8) * 0.125 + 1;\r\n        if (newScale > 2.5) newScale = 2.5;\r\n        newScale = newScale * this.scaleMultip;\r\n        if (this.node.scale !== newScale) {\r\n            this.node.scale = newScale;\r\n        }\r\n    },\r\n\r\n});"]}