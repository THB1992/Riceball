{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\ItemKnifeSkin_new.js"],"names":["ListItemBase","require","Tools","PlatformMgr","cc","Class","extends","properties","lockNode","Node","checkNode","equipNode","priceNode","priceLabel","Label","restNode","restLabel","iconSprite","Sprite","taskLabel","needCheckNode","canUnLockNode","propertyNode","propertyLabel","newNode","goldIcon","diamondIcon","suitNode","nullNode","canBuyNode","init","data","active","price","string","getGoldStr","priceType","loader","loadRes","url","SpriteFrame","error","resource","spriteFrame","i","children","length","suit","refresh","isGet","canUnLock","needCheck","isNew","processStr","canBuy","getWay","node","propertyTips","y","one","taskShortOne","two","taskShortTwo","str","rest","setCheck","isCheck","setEquip","isEquip","setCanBuy"],"mappings":"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","file":"ItemKnifeSkin_new.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["/**\r\n * @fileoverview 刀的商店皮肤item\r\n * @author zhangzhuang@gameley.cn (张庄)\r\n */\r\nconst ListItemBase = require('ListItemBase')\r\nconst Tools = require('Tools');\r\nconst PlatformMgr = require('PlatformMgr');\r\n\r\ncc.Class({\r\n    extends: ListItemBase,\r\n\r\n    properties: {\r\n        lockNode: cc.Node,\r\n        checkNode: cc.Node,\r\n        equipNode: cc.Node,\r\n        priceNode: cc.Node,\r\n        priceLabel: cc.Label,\r\n        restNode: cc.Node,\r\n        restLabel: cc.Label,\r\n        iconSprite: cc.Sprite,\r\n        taskLabel: cc.Label,\r\n        needCheckNode: cc.Node,\r\n        canUnLockNode: cc.Node,\r\n\r\n        propertyNode: cc.Node,\r\n        propertyLabel: cc.Label,\r\n\r\n        newNode: cc.Node,\r\n\r\n        goldIcon: cc.Node,\r\n        diamondIcon: cc.Node,\r\n        suitNode: cc.Node,\r\n\r\n        nullNode: cc.Node,\r\n        canBuyNode: cc.Node,\r\n    },\r\n\r\n    init: function (data) {\r\n        if (!data) {\r\n            this.nullNode.active = true;\r\n            return;\r\n        } else {\r\n            this.nullNode.active = false;\r\n        }\r\n\r\n        this.data = data;\r\n        if (data.price) this.priceLabel.string = Tools.getGoldStr(data.price);\r\n        // if (data.propertyTips) this.propertyLabel.string = data.propertyTips;\r\n        this.goldIcon.active = data.priceType === 0;\r\n        this.diamondIcon.active = data.priceType === 1;\r\n\r\n        cc.loader.loadRes(data.url, cc.SpriteFrame, (error, resource) => {\r\n            if (error) {\r\n                cc.error(error);\r\n            } else if (resource) {\r\n                this.iconSprite.spriteFrame = resource;\r\n            }\r\n        })\r\n\r\n        for (let i = 0; i < this.suitNode.children.length; i++) {\r\n            if (this.suitNode.children[i]) {\r\n                this.suitNode.children[i].active = (i + 1) == data.suit;\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    refresh: function (isGet, canUnLock, needCheck, isNew, processStr, canBuy) {\r\n        this.isGet = isGet;\r\n        this.lockNode.active = isGet || canUnLock ? false : true;\r\n        // this.iconSprite.setState(isGet || canUnLock ? cc.Sprite.State.NORMAL : cc.Sprite.State.GRAY);\r\n        // this.iconSprite.node.opacity = isGet || canUnLock ? 255 : 153;\r\n        this.priceNode.active = isGet || (this.data.getWay === 1 || this.data.getWay==100) ? false : true;\r\n        this.taskLabel.node.active = !isGet && this.data.getWay === 1 && !canUnLock ? true : false;\r\n        this.needCheckNode.active = isGet && needCheck ? true : false;\r\n        this.canUnLockNode.active = !isGet && canUnLock ? true : false;\r\n        // this.canBuyNode.active = !isGet && canBuy;\r\n        this.canBuyNode.active = false;\r\n\r\n        this.propertyNode.active = this.data.propertyTips ? true : false;\r\n        // this.propertyNode.y = isGet ? -50 : 50;\r\n        this.suitNode.y = isGet || canUnLock ? -50 : -10;\r\n        this.newNode.active = !isGet && isNew ? true : false;\r\n        if (processStr || processStr === '') {\r\n            var one = this.data.taskShortOne ? this.data.taskShortOne : '';\r\n            var two = this.data.taskShortTwo ? this.data.taskShortTwo : '';\r\n            var str = '';\r\n            this.taskLabel.string = one;\r\n            str = this.taskLabel.string + processStr;\r\n            this.taskLabel.string = two;\r\n            str += this.taskLabel.string;\r\n            this.taskLabel.string = str\r\n        }\r\n\r\n        //NFT测试显示余额\r\n        if(this.restNode && this.restLabel){\r\n            this.restNode.active = this.data.getWay==100 && !isGet\r\n            if(this.restNode.active){\r\n                this.restLabel.string = this.data.rest || 1000\r\n            }\r\n        }\r\n    },\r\n\r\n    setCheck: function (isCheck) {\r\n        this.checkNode.active = isCheck;\r\n    },\r\n\r\n    setEquip: function (isEquip) {\r\n        this.equipNode.active = isEquip;\r\n    },\r\n\r\n    setCanBuy: function (canBuy) {\r\n        this.canBuyNode.active = canBuy;\r\n    },\r\n});"]}