{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\system/assets\\scripts\\battle\\system\\AttackBoxCollisionHandleSystem.js"],"names":["BaseCollisionHandleSystem","require","AttackBoxCollisionHandleSystem","cc","Class","extends","properties","_eventListName","default","override","handelCollisionEvent","event","other","self","isStay","node","emit","updateGameLogic","dt","_super","_collisionEventMgr","clearAttackBoxEvent"],"mappings":";;;;;;AAAA;;;;AAIA,IAAMA,4BAA4BC,QAAQ,2BAAR,CAAlC;;AAEA;;;;AAIA,IAAIC,iCAAiCC,GAAGC,KAAH,CAAS;AAC1CC,aAASL,yBADiC;;AAG1CM,gBAAY;AACRC,wBAAgB;AACZC,qBAAS,0BADG;AAEZC,sBAAU;AAFE;AADR,KAH8B;AAS1C;AACAC,0BAAsB,8BAAUC,KAAV,EAAiB;AACnC,YAAIC,QAAQD,MAAM,CAAN,CAAZ;AACA,YAAIE,OAAOF,MAAM,CAAN,CAAX;AACA,YAAIG,SAASH,MAAM,CAAN,CAAb;;AAEA,YAAIG,MAAJ,EAAY;AACRD,iBAAKE,IAAL,CAAUC,IAAV,CAAe,WAAf,EAA4B,CAAC,eAAD,EAAkB,CAACH,IAAD,EAAOD,KAAP,EAAc,KAAKG,IAAnB,CAAlB,CAA5B;AACH,SAFD,MAEO;AACH;AACA;AACAF,iBAAKE,IAAL,CAAUC,IAAV,CAAe,WAAf,EAA4B,CAAC,UAAD,EAAa,CAACH,IAAD,EAAOD,KAAP,EAAc,KAAKG,IAAnB,CAAb,CAA5B;AACH;;AAGD;;AAEA;;AAEA;;AAEA;AACH,KA/ByC;;AAiC1CE,qBAAiB,yBAAUC,EAAV,EAAc;AAC3B,aAAKC,MAAL,CAAYD,EAAZ;AACA,aAAKE,kBAAL,CAAwBC,mBAAxB;AACH;;AApCyC,CAAT,CAArC","file":"AttackBoxCollisionHandleSystem.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\system","sourcesContent":["/**\r\n * @fileoverview box碰撞事件处理系统\r\n * @author zhangzhuang@gameley.cn (张庄)\r\n */\r\nconst BaseCollisionHandleSystem = require('BaseCollisionHandleSystem');\r\n\r\n/**\r\n * 专门处理玩家碰撞系统\r\n */\r\n\r\nvar AttackBoxCollisionHandleSystem = cc.Class({\r\n    extends: BaseCollisionHandleSystem,\r\n\r\n    properties: {\r\n        _eventListName: {\r\n            default: '_attackBoxCollisionEvent',\r\n            override: true,\r\n        },\r\n    },\r\n    /** @override */\r\n    handelCollisionEvent: function (event) {\r\n        var other = event[0];\r\n        var self = event[1];\r\n        var isStay = event[2];\r\n\r\n        if (isStay) {\r\n            self.node.emit('emitEvent', ['onCollByBlock', [self, other, this.node]]);\r\n        } else {\r\n            // other.node.emit('emitEvent', ['onAttackBox']);\r\n            // self.node.emit('emitEvent', ['onCollByKnife', [self, other, this.node]]);\r\n            self.node.emit('emitEvent', ['onAttack', [self, other, this.node]]);\r\n        }\r\n\r\n\r\n        // if (self.node.parent.getComponent('EntityBox').blood > 0) {\r\n\r\n        // } else {\r\n\r\n        // }\r\n\r\n        // other.node.emit('emitEvent', ['onAttackBox']);\r\n    },\r\n\r\n    updateGameLogic: function (dt) {\r\n        this._super(dt);\r\n        this._collisionEventMgr.clearAttackBoxEvent();\r\n    }\r\n\r\n\r\n});"]}