{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\PanelAddTop.js"],"names":["PlayerData","require","BagItem","cc","Class","extends","Component","properties","canNotReceiveNode","Node","canReceiveNode","hasReceiveNode","init","world","callback","refresh","canGet","instance","canGetAddTopReward","hasGet","hasGetAddTopReward","active","onReceiveClick","item","createItemWithString","isOwnKnifeSkin","id","addKnifeSkin","onEquipKnifeSkin","itemData","uiMgr","showReward","refreshRedDot","onClose","node"],"mappings":";;;;;;AACA,IAAMA,aAAaC,QAAQ,YAAR,CAAnB;AACA,IAAMC,UAAUD,QAAQ,SAAR,CAAhB;AACAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,2BAAmBL,GAAGM,IADd;AAERC,wBAAgBP,GAAGM,IAFX;AAGRE,wBAAgBR,GAAGM;AAHX,KAHP;;AASLG,QATK,gBASAC,KATA,EASOC,QATP,EASiB;AAClB,aAAKD,KAAL,GAAaA,KAAb;AACA,aAAKC,QAAL,GAAgBA,QAAhB;AACA,aAAKC,OAAL;AACH,KAbI;AAeLA,WAfK,qBAeK;AACN,YAAIC,SAAShB,WAAWiB,QAAX,CAAoBC,kBAApB,EAAb;AACA,YAAIC,SAASnB,WAAWiB,QAAX,CAAoBG,kBAApB,EAAb,CAAsD;AACtD,aAAKZ,iBAAL,CAAuBa,MAAvB,GAAgC,CAACL,MAAjC;AACA,aAAKN,cAAL,CAAoBW,MAApB,GAA6BL,UAAU,CAACG,MAAxC;AACA;AACH,KArBI;;;AAwBLG,oBAAgB,0BAAY;AACxB,YAAIC,OAAOrB,QAAQsB,oBAAR,CAA6B,QAA7B,CAAX;AACA,YAAI,CAACxB,WAAWiB,QAAX,CAAoBQ,cAApB,CAAmCF,KAAKG,EAAxC,CAAL,EAAkD;AAC9C1B,uBAAWiB,QAAX,CAAoBU,YAApB,CAAiCJ,KAAKG,EAAtC;AACA;AACA,iBAAKb,KAAL,CAAWe,gBAAX,CAA4BL,KAAKM,QAAjC,EAA2C,IAA3C;AACH;AACD;AACA,aAAKhB,KAAL,CAAWiB,KAAX,CAAiBC,UAAjB,CAA4BR,KAAKM,QAAjC;AACA,aAAKhB,KAAL,CAAWiB,KAAX,CAAiBE,aAAjB;AACA,aAAKjB,OAAL;AACH,KAnCI;;AAqCLkB,WArCK,qBAqCK;AACN,aAAKC,IAAL,CAAUb,MAAV,GAAmB,KAAnB;AACA,YAAI,KAAKP,QAAT,EAAmB;AACf,iBAAKA,QAAL;AACH;AACJ;;AAED;;AA5CK,CAAT","file":"PanelAddTop.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["\r\nconst PlayerData = require('PlayerData');\r\nconst BagItem = require('BagItem');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        canNotReceiveNode: cc.Node,\r\n        canReceiveNode: cc.Node,\r\n        hasReceiveNode: cc.Node,\r\n    },\r\n\r\n    init(world, callback) {\r\n        this.world = world;\r\n        this.callback = callback;\r\n        this.refresh()\r\n    },\r\n\r\n    refresh() {\r\n        var canGet = PlayerData.instance.canGetAddTopReward();\r\n        var hasGet = PlayerData.instance.hasGetAddTopReward();;\r\n        this.canNotReceiveNode.active = !canGet;\r\n        this.canReceiveNode.active = canGet && !hasGet;\r\n        // this.hasReceiveNode.active = canGet && hasGet;\r\n    },\r\n\r\n\r\n    onReceiveClick: function () {\r\n        var item = BagItem.createItemWithString('1,32,1');\r\n        if (!PlayerData.instance.isOwnKnifeSkin(item.id)) {\r\n            PlayerData.instance.addKnifeSkin(item.id);\r\n            //装备上\r\n            this.world.onEquipKnifeSkin(item.itemData, true);\r\n        }\r\n        //展示出来\r\n        this.world.uiMgr.showReward(item.itemData);\r\n        this.world.uiMgr.refreshRedDot();\r\n        this.refresh()\r\n    },\r\n\r\n    onClose() {\r\n        this.node.active = false;\r\n        if (this.callback) {\r\n            this.callback();\r\n        }\r\n    }\r\n\r\n    // update (dt) {},\r\n});"]}