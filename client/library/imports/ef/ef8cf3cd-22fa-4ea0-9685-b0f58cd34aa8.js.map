{"version":3,"sources":["..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui/assets\\scripts\\battle\\ui\\ItemPKRank.js"],"names":["ListItemBase","require","ConfigData","UIUtil","MY_COLOR","cc","color","fromHEX","Tools","PlayerData","Class","extends","properties","bgNode","Node","rankNode","rankLabel","Label","nameLabel","iconSprite","Sprite","killLabel","init","data","i","children","active","rank","node","string","score","spriteFrame","realPlayer","iconUrl","id","loadAIPortrait","getShowNickName","instance","getAINickById","isLocal","loadFriendPortrait","name","headUrl","Color","WHITE"],"mappings":"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","file":"ItemPKRank.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const ListItemBase = require('ListItemBase')\r\nconst ConfigData = require('ConfigData')\r\nconst UIUtil = require('UIUtil')\r\nconst MY_COLOR = new cc.color().fromHEX('#FFFA77')\r\nconst Tools = require('Tools');\r\nconst PlayerData = require('PlayerData');\r\ncc.Class({\r\n    extends: ListItemBase,\r\n\r\n    properties: {\r\n        bgNode: cc.Node,\r\n        rankNode: cc.Node,\r\n        rankLabel: cc.Label,\r\n        nameLabel: cc.Label,\r\n        iconSprite: cc.Sprite,\r\n        killLabel: cc.Label,\r\n    },\r\n\r\n\r\n    init(data) {\r\n        for (let i = 0; i < 2; i++) {\r\n            this.bgNode.children[i].active = (data.rank + i) % 2;\r\n        }\r\n        for (let i = 0; i < 3; i++) {\r\n            this.rankNode.children[i].active = (i + 1) === data.rank;\r\n        }\r\n\r\n\r\n        if (data.rank === -1) {\r\n            this.rankLabel.node.active = true;\r\n            this.rankLabel.string = '未上榜';\r\n        } else {\r\n            this.rankLabel.node.active = data.rank > 3;\r\n            this.rankLabel.string = data.rank;\r\n        }\r\n\r\n        this.killLabel.string = data.score;\r\n        this.iconSprite.spriteFrame = null;\r\n        if (data.realPlayer === 0) {\r\n            this.iconSprite.iconUrl = data.id;\r\n            UIUtil.loadAIPortrait(this.iconSprite, data.id);\r\n            this.nameLabel.string = Tools.getShowNickName(ConfigData.instance.getAINickById(data.id));\r\n        } else {\r\n            if (data.isLocal) {\r\n                this.iconSprite.iconUrl = PlayerData.instance.iconUrl;\r\n                UIUtil.loadFriendPortrait(this.iconSprite, PlayerData.instance.iconUrl);\r\n                this.nameLabel.string = Tools.getShowNickName(PlayerData.instance.name);\r\n            } else {\r\n                this.iconSprite.iconUrl = data.headUrl;\r\n                UIUtil.loadFriendPortrait(this.iconSprite, data.headUrl);\r\n                this.nameLabel.string = Tools.getShowNickName(data.name);\r\n            }\r\n\r\n        }\r\n\r\n\r\n\r\n        this.bgNode.children[2].active = data.isLocal;\r\n        this.rankLabel.node.color = data.isLocal ? MY_COLOR : cc.Color.WHITE;\r\n        this.nameLabel.node.color = data.isLocal ? MY_COLOR : cc.Color.WHITE;\r\n        this.killLabel.node.color = data.isLocal ? MY_COLOR : cc.Color.WHITE;\r\n    },\r\n\r\n    // update (dt) {},\r\n});"]}