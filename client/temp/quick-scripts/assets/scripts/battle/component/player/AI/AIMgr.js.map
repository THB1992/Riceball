{"version":3,"sources":["AIMgr.js"],"names":["ConditionCfg","FreshProtect","Tools","require","ConfigData","PlayerData","AICfgType","GameData","AIFreshCfgType","AIMgr","cc","Class","extends","Component","properties","_conditionFindeNextPos","_actionMove","_curAction","_actionSeq","init","moveSpeed","level","entityPlayer","instance","isShowLog","console","log","cfg","freshCfg","getOrAddComponent","node","AINear","_conditionNearAnotherAI","_conditionFindEscapePos","Slow","_conditionAISlow","_conditionNearBlock","_conditionFindNoDangerPos","_conditionNearLocalHero","_conditionInThenOutLocalHero","HeroDefence","_conditionLocalHeroDefence","_conditionRandomBool","_condtionLastTimeHeroDefence","_condtionLastTimeNearLocalHero","_heroDefenceThinkTime","HeroDefenceThinking","LowKnife","_conditionLowKnifeNum","KnifeLess","_conditionKnifeLessThenLocalHero","_conditionLastTimeHeroAttack","lessKnifeEscape","_conditionLastTimeAttackLocalHero","PickKnife","_conditionNearKnife","_conditionHighKnifeNum","_conditionHighKnifeNumNoPick","NoPickKnifeNum","freshToward","removeToward","playCount","TowardHero","_conditionTowardLocalHero","HeroDefenceSilly","_conditionLocalHeroDefenceSilly","_conditionHighKnifeNumLocalHero","KnifeMoreSilly","_conditionKnifeMoreSilly","_conditionKnifeMoreThenLocalHero","moreKnifeToward","_conditionKnifeMuchMoreThenLocalHero","addComponent","_conditionLowKnifeNumLocalHero","peace","_conditionLastTimePeace","_conditionLastTimeToward","_towardTime","towardTime","_conditionHasToward","noPickNum","_conditionNoMoreKnife","_conditionKilled","ReviveTotal","_conditionReviveTotal","_actionDefence","DefenceTime","noDefence","_doOneTimeCondition","doResult","isTrue","emit","result","setNextPos","doResultWithParam","updateGameLogic","dt","_switchCurAction","_updateCurAction","_checkNextAction","endAction","clearResult","push","reset","shift","startAction","position","isActionEnd","getNextPos","setRoutePos","getRandomFloat","length","addNearOther","other","isLocal","leaveOther","addNearBlock","block","addNearKnife","knife","setLocalHero","hero","getNoMoreKnifeNum","initWalls","type","onDie","getReviveTotal"],"mappings":"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","file":"AIMgr.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\component\\player\\AI","sourcesContent":["/**\n * @fileoverview AI控制器（行为树）\n * @author meifan@gameley.cn (梅凡)\n */\n\nconst ConditionCfg = [\n    [true, false, 0.5, false, 0, false, false, 0, false, true, true, true, 2, false, false, true, 0],\n    [true, false, 0.5, false, 0.5, false, false, 0, false, true, true, true, 2, false, false, true, 0],\n    [true, false, 0.5, false, 0.5, true, true, 12, true, true, true, true, 2, false, false, true, 0],\n    [false, true, 0.5, false, 2.0, true, true, 18, true, false, false, true, 2, false, false, true, 0],\n    [false, true, 0.5, true, 2.0, true, true, 24, true, false, false, true, 2, true, false, true, 1],\n    [false, true, 0.5, true, 2.5, true, true, 30, true, false, false, true, 3, true, true, true, 1],\n    [false, true, 0.5, true, 3.0, true, true, 36, true, false, false, false, 4, true, true, false, 1]\n];\nconst FreshProtect = [\n    [\n        [2, 2, 2, 3, 4, 5],\n        [0.01, 0.01, 0.01],\n        [true, true, true]\n    ],\n    [\n        [3, 3, 3, 4, 5, 6],\n        [0.01, 0.01, 0.01],\n        [true, true, true]\n    ],\n    [\n        [5, 5, 5, 6, 7, 8],\n        [0.01, 0.01, 0.01],\n        [true, true, true]\n    ],\n    [\n        [6, 6, 6, 7, 8, 9],\n        [0.01, 0.01, 0.01],\n        [true, true, true]\n    ],\n    [\n        [8, 8, 8, 9, 10, 11],\n        [0.01, 0.01, 0.01],\n        [true, true, false]\n    ],\n    [\n        [9, 9, 9, 10, 11, 12],\n        [0.01, 0.01, 0.01],\n        [true, true, false]\n    ],\n    [\n        [10, 10, 10, 11, 12, 13],\n        [0.01, 0.01, 0.01],\n        [true, true, false]\n    ]\n];\n\nconst Tools = require('Tools');\nconst ConfigData = require('ConfigData');\nconst PlayerData = require('PlayerData');\nconst AICfgType = require('Types').AICfgType;\nconst GameData = require('GameData');\nconst AIFreshCfgType = require('Types').AIFreshCfgType;\n\nconst AIMgr = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _conditionFindeNextPos: null,\n        _actionMove: null,\n        _curAction: null,\n        _actionSeq: [],\n    },\n\n    /**\n     * \n     * @param {*} moveSpeed \n     * @param {*} level 0-6暂时来源于tid从2-8\n     * @param {*} defenceTime \n     */\n    init: function (moveSpeed, level, entityPlayer) {\n        // const levelCfg = ConfigData.instance.getLevelCfg(PlayerData.instance.level);\n\n        // level = level < levelCfg.strongNum ? ConditionCfg.length - 1 : level;\n        // level = level >= ConditionCfg.length - levelCfg.weakNum ? 0 : level;\n\n        if (GameData.instance.isShowLog()) {\n            console.log('ai level:' + level);\n        }\n\n        const cfg = ConditionCfg[level];\n        const freshCfg = FreshProtect[level];\n\n        this._conditionFindeNextPos = Tools.getOrAddComponent(this.node, 'ConditionFindNextPos');\n        this._conditionFindeNextPos.init(moveSpeed);\n\n        if (cfg[AICfgType.AINear]) {\n            this._conditionNearAnotherAI = Tools.getOrAddComponent(this.node, 'ConditionNearAnotherAI');\n            this._conditionNearAnotherAI.init();\n        }\n\n        this._conditionFindEscapePos = Tools.getOrAddComponent(this.node, 'ConditionFindEscapePos');\n        this._conditionFindEscapePos.init();\n\n        if (cfg[AICfgType.Slow]) {\n            this._conditionAISlow = Tools.getOrAddComponent(this.node, 'ConditionAISlow');\n        }\n\n        this._conditionNearBlock = Tools.getOrAddComponent(this.node, 'ConditionNearBlock');\n        this._conditionNearBlock.init();\n\n        this._conditionFindNoDangerPos = Tools.getOrAddComponent(this.node, 'ConditionFindNoDangerPos');\n        this._conditionFindNoDangerPos.init(moveSpeed);\n\n        this._conditionNearLocalHero = Tools.getOrAddComponent(this.node, 'ConditionNearLocalHero');\n        this._conditionNearLocalHero.init();\n\n        this._conditionInThenOutLocalHero = Tools.getOrAddComponent(this.node, 'ConditionInThenOutLocalHero');\n        this._conditionInThenOutLocalHero.init();\n\n        if (cfg[AICfgType.HeroDefence]) {\n            this._conditionLocalHeroDefence = Tools.getOrAddComponent(this.node, 'ConditionLocalHeroDefence');\n            this._conditionLocalHeroDefence.init();\n        }\n\n        this._conditionRandomBool = Tools.getOrAddComponent(this.node, 'ConditionRandomBool');\n        this._conditionRandomBool.init();\n\n        this._condtionLastTimeHeroDefence = Tools.getOrAddComponent(this.node, 'ConditionLastTimeHeroDefence');\n        this._condtionLastTimeHeroDefence.init();\n\n        // if () {\n        // }\n        this._condtionLastTimeNearLocalHero = Tools.getOrAddComponent(this.node, 'CondtionLastTimeNearLocalHero');\n        this._condtionLastTimeNearLocalHero.init();\n        this._heroDefenceThinkTime = cfg[AICfgType.HeroDefenceThinking];\n\n        if (cfg[AICfgType.LowKnife]) {\n            this._conditionLowKnifeNum = Tools.getOrAddComponent(this.node, 'ConditionLowKnifeNum');\n            this._conditionLowKnifeNum.init(entityPlayer);\n        }\n\n        if (cfg[AICfgType.KnifeLess]) {\n            this._conditionKnifeLessThenLocalHero = Tools.getOrAddComponent(this.node, 'ConditionKnifeLessThenLocalHero');\n            this._conditionKnifeLessThenLocalHero.init(entityPlayer);\n        }\n\n        this._conditionLastTimeHeroAttack = Tools.getOrAddComponent(this.node, 'ConditionLastTimeHeroAttack');\n        this._conditionLastTimeHeroAttack.init();\n\n        if (cfg[AICfgType.lessKnifeEscape]) {\n            this._conditionLastTimeAttackLocalHero = Tools.getOrAddComponent(this.node, 'ConditionLastTimeAttackLocalHero');\n            this._conditionLastTimeAttackLocalHero.init();\n        }\n\n        if (cfg[AICfgType.PickKnife]) {\n            this._conditionNearKnife = Tools.getOrAddComponent(this.node, 'ConditionNearKnife');\n            this._conditionNearKnife.init();\n        }\n\n        this._conditionHighKnifeNum = Tools.getOrAddComponent(this.node, 'ConditionHighKnifeNum');\n        this._conditionHighKnifeNum.init(entityPlayer);\n\n        this._conditionHighKnifeNumNoPick = Tools.getOrAddComponent(this.node, 'ConditionHignKnifeNumNoPick');\n        this._conditionHighKnifeNumNoPick.init(entityPlayer, cfg[AICfgType.NoPickKnifeNum]);\n\n        const freshToward = !freshCfg[AIFreshCfgType.removeToward] || !freshCfg[AIFreshCfgType.removeToward][PlayerData.instance.playCount];\n        if (cfg[AICfgType.TowardHero] && freshToward) {\n            this._conditionTowardLocalHero = Tools.getOrAddComponent(this.node, 'ConditionTowardLocalHero');\n            this._conditionTowardLocalHero.init();\n        }\n\n        if (cfg[AICfgType.HeroDefenceSilly]) {\n            this._conditionLocalHeroDefenceSilly = Tools.getOrAddComponent(this.node, 'ConditionLocalHeroDefenceSilly');\n            this._conditionLocalHeroDefenceSilly.init();\n        }\n\n        this._conditionHighKnifeNumLocalHero = Tools.getOrAddComponent(this.node, 'ConditionHighKnifeNumLocalHero');\n        this._conditionHighKnifeNumLocalHero.init();\n\n        if (cfg[AICfgType.KnifeMoreSilly]) {\n            this._conditionKnifeMoreSilly = Tools.getOrAddComponent(this.node, 'ConditionKnifeMoreSilly');\n            this._conditionKnifeMoreSilly.init();\n        }\n\n        this._conditionKnifeMoreThenLocalHero = Tools.getOrAddComponent(this.node, 'ConditionKnifeMoreThenLocalHero');\n        this._conditionKnifeMoreThenLocalHero.init(entityPlayer);\n\n        if (cfg[AICfgType.moreKnifeToward]) {\n            this._conditionKnifeMuchMoreThenLocalHero = this.node.addComponent('ConditionKnifeMoreThenLocalHero');\n            this._conditionKnifeMuchMoreThenLocalHero.init(entityPlayer, 4);\n\n            this._conditionLowKnifeNumLocalHero = Tools.getOrAddComponent(this.node, 'ConditionLowKnifeNumLocalHero');\n            this._conditionLowKnifeNumLocalHero.init();\n        }\n\n        if (cfg[AICfgType.peace]) {\n            this._conditionLastTimePeace = Tools.getOrAddComponent(this.node, 'ConditionLastTimePeace');\n            this._conditionLastTimePeace.init();\n        }\n\n        this._conditionLastTimeToward = Tools.getOrAddComponent(this.node, 'ConditionLastTimeToward');\n        this._conditionLastTimeToward.init();\n        this._towardTime = cfg[AICfgType.towardTime];\n\n        this._conditionHasToward = Tools.getOrAddComponent(this.node, 'ConditionHasToward');\n        // this._conditionHasToward.init();\n\n        if (freshCfg[AIFreshCfgType.noPickNum] && freshCfg[AIFreshCfgType.noPickNum][PlayerData.instance.playCount]) {\n            this._conditionNoMoreKnife = Tools.getOrAddComponent(this.node, 'ConditionNoMoreKnife');\n            this._conditionNoMoreKnife.init(freshCfg[AIFreshCfgType.noPickNum][PlayerData.instance.playCount]);\n        }\n\n        this._conditionKilled = Tools.getOrAddComponent(this.node, 'ConditionKilled');\n        this._conditionKilled.init(entityPlayer);\n\n        if (cfg[AICfgType.ReviveTotal]) {\n            this._conditionReviveTotal = Tools.getOrAddComponent(this.node, 'ConditionReviveTotal');\n            this._conditionReviveTotal.init(cfg[AICfgType.ReviveTotal]);\n        }\n\n        this._actionMove = Tools.getOrAddComponent(this.node, 'ActionMove');\n        this._actionMove.init();\n\n        this._actionDefence = Tools.getOrAddComponent(this.node, 'ActionDefence');\n        this._actionDefence.init(cfg[AICfgType.DefenceTime]);\n        if (freshCfg[AIFreshCfgType.noDefence] && freshCfg[AIFreshCfgType.noDefence][PlayerData.instance.playCount]) {\n            this._actionDefence.init(freshCfg[AIFreshCfgType.noDefence][PlayerData.instance.playCount]);\n        }\n\n\n        this._doOneTimeCondition();\n    },\n\n    _doOneTimeCondition: function () {\n        if (this._conditionAISlow) {\n            this._conditionAISlow.doResult();\n            if (this._conditionAISlow.isTrue()) {\n                // if (this._actionMove) {\n                // this._actionMove.initWithParam(this._conditionAISlow.result);\n                // }\n                this.node.emit('changeSpeedRate', this._conditionAISlow.result);\n            }\n        }\n\n        if (this._conditionFindeNextPos) {\n            this._conditionFindeNextPos.doResult();\n            if (this._conditionFindeNextPos.isTrue()) {\n                this._actionMove.setNextPos(this._conditionFindeNextPos.result);\n            }\n        }\n\n        if (this._conditionLastTimePeace) {\n            this._conditionLastTimePeace.doResultWithParam(10.0);\n        }\n    },\n\n    // updateGameLogic: function (dt) {}\n\n    updateGameLogic: function (dt) {\n        this._switchCurAction(dt);\n        this._updateCurAction(dt);\n        this._checkNextAction(dt);\n    },\n\n    _switchCurAction: function (dt) {\n\n        if (this._conditionInThenOutLocalHero && this._conditionInThenOutLocalHero.isTrue()) {\n            // 判断我先离玩家近之后玩家离开了我的碰撞范围，立刻暂停当前的行为\n            this._actionSeq = [];\n            if (this._curAction) {\n                this._curAction.endAction();\n            }\n            this._conditionInThenOutLocalHero.clearResult();\n        }\n\n\n        if (this._conditionNearLocalHero && this._conditionNearLocalHero.isTrue()) {\n            if (this._conditionLowKnifeNum) {\n                this._conditionLowKnifeNum.doResult();\n                if (this._conditionLowKnifeNum.isTrue()) {\n                    // 刀的数量较少 逃跑\n\n                    if (this._conditionFindEscapePos) {\n\n                        this._conditionFindEscapePos.doResultWithParam([this._conditionNearLocalHero.result]);\n                        if (this._conditionFindEscapePos.isTrue()) {\n                            this._actionSeq = [];\n\n                            this._actionMove.setNextPos(this._conditionFindEscapePos.result);\n                            this._actionSeq.push(this._actionMove);\n                            this._actionDefence.reset();\n                            this._actionSeq.push(this._actionDefence);\n\n                            this._curAction = this._actionSeq.shift();\n                            this._curAction.startAction();\n\n                            this._conditionNearLocalHero.clearResult();\n                            this._conditionFindEscapePos.clearResult();\n                            return;\n                        }\n                    }\n                }\n            }\n\n            if (this._conditionLocalHeroDefence) {\n                this._conditionLocalHeroDefence.doResult();\n                if (this._conditionLocalHeroDefence.isTrue()) {\n                    if (this._condtionLastTimeNearLocalHero) {\n                        this._condtionLastTimeNearLocalHero.doResultWithParam(this._heroDefenceThinkTime);\n                    }\n                    if (!this._condtionLastTimeNearLocalHero || this._condtionLastTimeNearLocalHero.isTrue()) {\n                        // 玩家处于龟缩\n                        if (this._condtionLastTimeHeroDefence && this._condtionLastTimeHeroDefence.isTrue()) {\n                            this._condtionLastTimeHeroDefence.doResultWithParam(0.5);\n                            // 触发本次思考\n                            if (!this._conditionLastTimePeace || this._conditionLastTimePeace.isTrue()) {\n                                if (this._conditionLowKnifeNumLocalHero) {\n                                    this._conditionLowKnifeNumLocalHero.doResult();\n                                    if (this._conditionLowKnifeNumLocalHero.isTrue()) {\n                                        if (this._conditionKnifeMuchMoreThenLocalHero) {\n                                            this._conditionKnifeMuchMoreThenLocalHero.doResult();\n                                            if (this._conditionKnifeMuchMoreThenLocalHero.isTrue()) {\n                                                // 玩家刀不超过3把 ai刀比玩家多不少 直接冲过去杀人\n                                                this._actionSeq = [];\n                                                this._actionMove.setNextPos(this._conditionNearLocalHero.result.node.position);\n                                                this._actionSeq.push(this._actionMove);\n\n                                                this._curAction = this._actionSeq.shift();\n                                                this._curAction.startAction();\n                                                this._conditionNearLocalHero.clearResult();\n\n                                                return;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n\n                            if (this._conditionRandomBool) {\n                                this._conditionRandomBool.doResult();\n                                if (this._conditionRandomBool.isTrue()) {\n                                    // 龟缩\n                                    // 玩家离我很近，玩家又处于龟缩，思考了0.5s后，随机进入龟缩，至少持续2s再做下次判断\n                                    this._actionSeq = [];\n                                    this._actionMove.setNextPos(this.node.position);\n                                    this._actionSeq.push(this._actionMove);\n                                    this._actionDefence.reset();\n                                    this._actionSeq.push(this._actionDefence);\n\n                                    this._curAction = this._actionSeq.shift();\n                                    this._curAction.startAction();\n\n                                    this._conditionNearLocalHero.clearResult();\n                                    return;\n                                }\n\n                                this._conditionRandomBool.doResult();\n                                if (this._conditionRandomBool.isTrue()) {\n                                    // 玩家离我很近，玩家又处于龟缩，思考了0.5s后，决定找一个附近的位置磨蹭一下，0.5s后再判断\n                                    // this._condtionLastTimeHeroDefence.doResultWithParam(0.5);\n\n                                    if (this._conditionFindNoDangerPos && this._actionMove && !this._actionMove.isActionEnd()) {\n\n                                        this._conditionFindNoDangerPos.doResultWithParam([\n                                            [this._conditionNearLocalHero.result.node], this._actionMove.getNextPos()\n                                        ]);\n                                        if (this._conditionFindNoDangerPos.isTrue()) {\n                                            // 周围有障碍物，通过我的目的地和与障碍物的相对位置，确定一个临时路点 并朝临时路点前进\n                                            this._actionSeq = [];\n\n                                            this._actionMove.setRoutePos(this._conditionFindNoDangerPos.result);\n                                            this._actionSeq.push(this._actionMove);\n                                            this._actionDefence.reset();\n                                            this._actionSeq.push(this._actionDefence);\n\n                                            this._curAction = this._actionSeq.shift();\n                                            this._curAction.startAction();\n\n                                            this._conditionNearLocalHero.clearResult();\n                                            this._conditionFindNoDangerPos.clearResult();\n                                            return;\n                                        }\n                                    }\n                                } else {\n                                    // 逃跑\n                                    // 玩家离我很近，玩家又处于龟缩，思考了0.5s后，随机进入逃跑，至少持续2s再做下次判断\n                                    if (this._conditionFindEscapePos) {\n\n                                        this._conditionFindEscapePos.doResultWithParam([this._conditionNearLocalHero.result]);\n                                        if (this._conditionFindEscapePos.isTrue()) {\n                                            this._actionSeq = [];\n\n                                            this._actionMove.setNextPos(this._conditionFindEscapePos.result);\n                                            this._actionSeq.push(this._actionMove);\n                                            this._actionDefence.reset();\n                                            this._actionSeq.push(this._actionDefence);\n\n                                            this._curAction = this._actionSeq.shift();\n                                            this._curAction.startAction();\n\n                                            this._conditionNearLocalHero.clearResult();\n                                            this._conditionFindEscapePos.clearResult();\n                                        }\n                                    }\n                                }\n                            }\n\n                        } else {\n                            this._conditionNearLocalHero.clearResult();\n                        }\n                        return;\n                    }\n                } else {\n                    if (this._condtionLastTimeHeroDefence) {\n                        this._condtionLastTimeHeroDefence.clearResult();\n                    }\n\n                    if (this._condtionLastTimeNearLocalHero) {\n                        this._condtionLastTimeNearLocalHero.clearResult();\n                    }\n                }\n            }\n\n            if (this._conditionLocalHeroDefenceSilly) {\n                this._conditionLocalHeroDefenceSilly.doResult();\n                if (this._conditionLocalHeroDefenceSilly.isTrue()) {\n                    if (this._conditionHighKnifeNumLocalHero) {\n                        this._conditionHighKnifeNumLocalHero.doResult();\n                        if (this._conditionHighKnifeNumLocalHero.isTrue()) {\n                            // 玩家离我很近 且处于龟缩 且刀子数量够 直接冲过去\n                            this._actionSeq = [];\n                            this._actionMove.setNextPos(this._conditionNearLocalHero.result.node.position);\n                            this._actionSeq.push(this._actionMove);\n\n                            this._curAction = this._actionSeq.shift();\n                            this._curAction.startAction();\n                            this._conditionNearLocalHero.clearResult();\n\n                            return;\n                        }\n                    }\n                }\n            }\n\n            if (this._conditionKnifeLessThenLocalHero) {\n                this._conditionKnifeLessThenLocalHero.doResult();\n                if (this._conditionKnifeLessThenLocalHero.isTrue()) {\n                    // 刀的数量较玩家较少 随机选择防守或逃跑\n                    if (this._conditionLastTimeAttackLocalHero) {\n                        this._conditionLastTimeAttackLocalHero.doResultWithParam(0.5);\n                    }\n                    if (!this._conditionLastTimeAttackLocalHero || this._conditionLastTimeAttackLocalHero.isTrue()) {\n\n                        if (this._conditionLastTimeHeroAttack && this._conditionLastTimeHeroAttack.isTrue()) {\n                            this._conditionLastTimeHeroAttack.doResultWithParam(1.5);\n                            // 触发本次思考\n                            if (this._conditionRandomBool) {\n                                this._conditionRandomBool.doResult();\n                                if (this._conditionRandomBool.isTrue()) {\n                                    // 龟缩\n                                    // 玩家离我很近，玩家又处于龟缩，思考了0.5s后，随机进入龟缩，至少持续2s再做下次判断\n                                    this._actionSeq = [];\n                                    this._actionMove.setNextPos(this.node.position);\n                                    this._actionSeq.push(this._actionMove);\n                                    this._actionDefence.reset();\n                                    this._actionSeq.push(this._actionDefence);\n\n                                    this._curAction = this._actionSeq.shift();\n                                    this._curAction.startAction();\n\n                                    this._conditionNearLocalHero.clearResult();\n\n                                } else {\n                                    // 逃跑\n                                    // 玩家离我很近，玩家又处于龟缩，思考了0.5s后，随机进入逃跑，至少持续2s再做下次判断\n                                    if (this._conditionFindEscapePos) {\n\n                                        this._conditionFindEscapePos.doResultWithParam([this._conditionNearLocalHero.result]);\n                                        if (this._conditionFindEscapePos.isTrue()) {\n                                            this._actionSeq = [];\n\n                                            this._actionMove.setNextPos(this._conditionFindEscapePos.result);\n                                            this._actionSeq.push(this._actionMove);\n                                            this._actionDefence.reset();\n                                            this._actionSeq.push(this._actionDefence);\n\n                                            this._curAction = this._actionSeq.shift();\n                                            this._curAction.startAction();\n\n                                            this._conditionNearLocalHero.clearResult();\n                                            this._conditionFindEscapePos.clearResult();\n                                        }\n                                    }\n                                }\n                            }\n                        } else {\n                            this._conditionNearLocalHero.clearResult();\n                        }\n                        return;\n                    }\n                }\n            }\n\n            if (this._conditionKnifeMoreSilly && this._conditionKnifeMoreSilly.isTrue()) {\n                if (this._conditionKnifeMoreThenLocalHero) {\n                    this._conditionKnifeMoreThenLocalHero.doResult();\n                    if (this._conditionKnifeMoreThenLocalHero.isTrue()) {\n                        // 刀比玩家多 人傻 逃跑\n                        if (this._conditionFindEscapePos) {\n\n                            this._conditionFindEscapePos.doResultWithParam([this._conditionNearLocalHero.result]);\n                            if (this._conditionFindEscapePos.isTrue()) {\n                                this._actionSeq = [];\n\n                                this._actionMove.setNextPos(this._conditionFindEscapePos.result);\n                                this._actionSeq.push(this._actionMove);\n                                this._actionDefence.reset();\n                                this._actionSeq.push(this._actionDefence);\n\n                                this._curAction = this._actionSeq.shift();\n                                this._curAction.startAction();\n\n                                this._conditionNearLocalHero.clearResult();\n                                this._conditionFindEscapePos.clearResult();\n                                return;\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (!this._conditionLastTimePeace || this._conditionLastTimePeace.isTrue()) {\n                if (this._conditionHasToward && !this._conditionHasToward.isTrue()) {\n                    if (this._conditionTowardLocalHero && this._conditionTowardLocalHero.isTrue()) {\n                        if (this._conditionLastTimeToward) {\n                            this._conditionLastTimeToward.doResultWithParam(Tools.getRandomFloat(this._towardTime, this._towardTime + 1));\n\n                            if (this._conditionLastTimeToward.isTrue()) {\n                                this._conditionHasToward.doResultWithParam(true);\n                                this._actionSeq = [];\n                                if (this._curAction) {\n                                    this._curAction.endAction();\n                                }\n                            } else {\n                                // 玩家离我很近，玩家没有龟缩，直接朝玩家发起进攻\n                                this._actionSeq = [];\n                                this._actionMove.setNextPos(this._conditionNearLocalHero.result.node.position);\n                                this._actionSeq.push(this._actionMove);\n                                // this._actionDefence.reset();\n                                // this._actionSeq.push(this._actionDefence);\n\n                                this._curAction = this._actionSeq.shift();\n                                this._curAction.startAction();\n                                this._conditionNearLocalHero.clearResult();\n\n                                return;\n                            }\n                        }\n                    }\n                }\n            }\n\n            this._conditionNearLocalHero.clearResult();\n\n        } else {\n            if (this._condtionLastTimeNearLocalHero) {\n                this._condtionLastTimeNearLocalHero.clearResult();\n            }\n            if (this._conditionLastTimeAttackLocalHero) {\n                this._conditionLastTimeAttackLocalHero.clearResult();\n            }\n            if (this._conditionLastTimeToward) {\n                this._conditionLastTimeToward.clearResult();\n            }\n            if (this._conditionHasToward) {\n                this._conditionHasToward.clearResult();\n            }\n        }\n\n        //判断周围是否有障碍\n        if (this._conditionNearBlock && this._conditionNearBlock.isTrue()) {\n            if (this._conditionFindNoDangerPos && this._actionMove && !this._actionMove.isActionEnd()) {\n\n                this._conditionFindNoDangerPos.doResultWithParam([this._conditionNearBlock.result, this._actionMove.getNextPos()]);\n                if (this._conditionFindNoDangerPos.isTrue()) {\n                    // 周围有障碍物，通过我的目的地和与障碍物的相对位置，确定一个临时路点 并朝临时路点前进\n                    this._actionSeq = [];\n\n                    this._actionMove.setRoutePos(this._conditionFindNoDangerPos.result);\n                    this._actionSeq.push(this._actionMove);\n                    this._actionDefence.reset();\n                    this._actionSeq.push(this._actionDefence);\n\n                    this._curAction = this._actionSeq.shift();\n                    this._curAction.startAction();\n\n                    this._conditionNearBlock.clearResult();\n                    this._conditionFindNoDangerPos.clearResult();\n                    return;\n                } else {\n                    // 周围有障碍物，通过我的目的地和与障碍物的相对位置，确定不出临时路点，打断当前行为，期望再次寻路离开障碍\n                    this._actionSeq = [];\n                    if (this._curAction) {\n                        this._curAction.endAction();\n                    }\n                }\n            }\n        }\n\n        //判断周围是否有其他AI\n        if (this._conditionNearAnotherAI && this._conditionNearAnotherAI.isTrue()) {\n            if (!this._conditionHighKnifeNum || !this._conditionHighKnifeNum.isTrue()) {\n                // 附近有ai 我刀还不够多 避让\n                if (this._conditionFindEscapePos) {\n\n                    this._conditionFindEscapePos.doResultWithParam(this._conditionNearAnotherAI.result);\n                    if (this._conditionFindEscapePos.isTrue()) {\n                        // 周围有其他AI 通过与其他AI的相对位置，反向逃跑\n                        this._actionSeq = [];\n\n                        this._actionMove.setNextPos(this._conditionFindEscapePos.result);\n                        this._actionSeq.push(this._actionMove);\n                        this._actionDefence.reset();\n                        this._actionSeq.push(this._actionDefence);\n\n                        this._curAction = this._actionSeq.shift();\n                        this._curAction.startAction();\n\n                        this._conditionNearAnotherAI.clearResult();\n                        this._conditionFindEscapePos.clearResult();\n                        return;\n                    }\n                }\n            }\n        }\n\n        if (!this._curAction) {\n            // 没有行动 根据优先级、条件、决定当前行动\n\n            if (this._conditionNearKnife && this._conditionNearKnife.isTrue()) {\n                if (this._conditionHighKnifeNumNoPick && !this._conditionHighKnifeNumNoPick.isTrue()) {\n                    this._actionMove.setNextPos(this._conditionNearKnife.result.node.position);\n                    this._actionSeq.push(this._actionMove);\n\n                    this._curAction = this._actionSeq.shift();\n                    this._curAction.startAction();\n\n                    this._conditionNearKnife.clearResult();\n                    return;\n                }\n\n            }\n\n            // 寻路自己移动\n            if (this._conditionFindeNextPos) {\n                this._conditionFindeNextPos.doResult();\n                if (this._conditionFindeNextPos.isTrue()) {\n                    this._actionMove.setNextPos(this._conditionFindeNextPos.result);\n                    this._actionSeq.push(this._actionMove);\n                    this._actionDefence.reset();\n                    this._actionSeq.push(this._actionDefence);\n\n                    this._curAction = this._actionSeq.shift();\n                    this._curAction.startAction();\n                }\n            }\n        } else {\n\n\n        }\n    },\n\n    _updateCurAction: function (dt) {\n        if (this._curAction) {\n            this._curAction.updateGameLogic(dt);\n        }\n    },\n\n    _checkNextAction: function (dt) {\n        if (this._curAction) {\n\n            if (this._curAction.isActionEnd()) {\n                // 当前行为结束 下一帧换成新的行为\n                if (this._actionSeq.length > 0) {\n                    this._curAction = this._actionSeq.shift();\n                    this._curAction.startAction();\n                } else {\n                    this._curAction = null;\n                }\n            }\n        }\n    },\n\n    addNearOther: function (other) {\n        if (other.isLocal) {\n            if (this._conditionNearLocalHero) {\n                this._conditionNearLocalHero.doResultWithParam(other);\n            }\n\n            if (this._conditionInThenOutLocalHero) {\n                this._conditionInThenOutLocalHero.doResultWithParam(true);\n            }\n        } else {\n            if (this._conditionNearAnotherAI) {\n                this._conditionNearAnotherAI.doResultWithParam(other);\n            }\n        }\n    },\n\n    leaveOther: function (other) {\n        if (other.isLocal) {\n            if (this._conditionInThenOutLocalHero) {\n                this._conditionInThenOutLocalHero.doResultWithParam(false);\n            }\n        }\n    },\n\n    addNearBlock: function (block) {\n        if (this._conditionNearBlock) {\n            this._conditionNearBlock.doResultWithParam(block);\n        }\n    },\n\n    addNearKnife: function (knife) {\n        if (this._conditionNearKnife) {\n            this._conditionNearKnife.doResultWithParam(knife);\n        }\n    },\n\n    setLocalHero: function (hero) {\n        if (this._conditionLocalHeroDefence) {\n            this._conditionLocalHeroDefence.setLocalHero(hero);\n        }\n\n        if (this._conditionLocalHeroDefenceSilly) {\n            this._conditionLocalHeroDefenceSilly.setLocalHero(hero);\n        }\n\n        if (this._conditionHighKnifeNumLocalHero) {\n            this._conditionHighKnifeNumLocalHero.setLocalHero(hero);\n        }\n\n        if (this._conditionKnifeLessThenLocalHero) {\n            this._conditionKnifeLessThenLocalHero.setLocalHero(hero);\n        }\n\n        if (this._conditionKnifeMoreThenLocalHero) {\n            this._conditionKnifeMoreThenLocalHero.setLocalHero(hero);\n        }\n\n        if (this._conditionKnifeMuchMoreThenLocalHero) {\n            this._conditionKnifeMuchMoreThenLocalHero.setLocalHero(hero);\n        }\n\n        if (this._conditionLowKnifeNumLocalHero) {\n            this._conditionLowKnifeNumLocalHero.setLocalHero(hero);\n        }\n    },\n\n    getNoMoreKnifeNum: function () {\n        if (this._conditionNoMoreKnife) {\n            return this._conditionNoMoreKnife.result;\n        }\n        return 999;\n    },\n\n    initWalls: function (type) {\n        if (type === 1) {\n            // 圆形地图\n            this.node.emit('initWalls', type);\n        }\n    },\n\n    onDie: function () {\n\n        if (this._conditionKilled) {\n            this._conditionKilled.doResult();\n            if (this._conditionKilled.isTrue()) {\n                this._actionSeq = [];\n                if (this._curAction) {\n                    this._curAction.endAction();\n                }\n                this._conditionKilled.clearResult();\n            }\n        }\n    },\n\n    getReviveTotal: function () {\n        if( this._conditionReviveTotal) {\n            return this._conditionReviveTotal.result;\n        }\n        return 0;\n    }\n\n\n\n});"]}