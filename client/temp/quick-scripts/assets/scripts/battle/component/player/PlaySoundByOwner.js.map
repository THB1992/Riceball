{"version":3,"sources":["PlaySoundByOwner.js"],"names":["AudioEngine","require","SoundID","PlaySoundByOwner","cc","Class","extends","Component","properties","player","_isDefence","audioID","init","entityPlayer","update","dt","isDead","instance","stopSound","isDefence","playSound","Spin"],"mappings":";;;;;;AAAA;;;;;AAKA,IAAMA,cAAcC,QAAQ,aAAR,CAApB;AACA,IAAMC,UAAUD,QAAQ,OAAR,EAAiBC,OAAjC;;AAEA,IAAMC,mBAAmBC,GAAGC,KAAH,CAAS;AAC9BC,aAASF,GAAGG,SADkB;;AAG9BC,gBAAY;AACRC,gBAAQ,IADA;AAERC,oBAAY,IAFJ;AAGRC,iBAAS;AAHD,KAHkB;;AAS9BC,UAAM,cAAUC,YAAV,EAAwB;AAC1B,aAAKJ,MAAL,GAAcI,YAAd;AACH,KAX6B;;AAa9BC,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAG,KAAKN,MAAL,CAAYO,MAAf,EAAuB;AACnB,gBAAG,KAAKN,UAAR,EAAoB;AAChB,qBAAKA,UAAL,GAAkB,KAAlB;AACAV,4BAAYiB,QAAZ,CAAqBC,SAArB,CAA+B,KAAKP,OAApC;AACA,qBAAKA,OAAL,GAAe,IAAf;AACH;AACD;AACH;;AAED,YAAG,KAAKD,UAAL,KAAoB,KAAKD,MAAL,CAAYU,SAAnC,EAA8C;AAC1C,iBAAKT,UAAL,GAAkB,KAAKD,MAAL,CAAYU,SAA9B;;AAEA,gBAAG,KAAKT,UAAR,EAAoB;AAChB,qBAAKC,OAAL,GAAeX,YAAYiB,QAAZ,CAAqBG,SAArB,CAA+BlB,QAAQmB,IAAvC,EAA6C,IAA7C,CAAf;AACH,aAFD,MAEO;AACHrB,4BAAYiB,QAAZ,CAAqBC,SAArB,CAA+B,KAAKP,OAApC;AACA,qBAAKA,OAAL,GAAe,IAAf;AACH;AACJ;AACJ;;AAjC6B,CAAT,CAAzB","file":"PlaySoundByOwner.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\component\\player","sourcesContent":["/**\n * @fileoverview PlaySoundByOwner\n * @author meifan@gameley.cn (梅凡)\n */\n\nconst AudioEngine = require('AudioEngine');\nconst SoundID = require('Types').SoundID;\n\nconst PlaySoundByOwner = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        player: null,\n        _isDefence: true,\n        audioID: null,\n    },\n\n    init: function (entityPlayer) {\n        this.player = entityPlayer;\n    },\n\n    update: function (dt) {\n        if(this.player.isDead) {\n            if(this._isDefence) {\n                this._isDefence = false;\n                AudioEngine.instance.stopSound(this.audioID);\n                this.audioID = null;\n            }\n            return;\n        }\n\n        if(this._isDefence !== this.player.isDefence) {\n            this._isDefence = this.player.isDefence;\n            \n            if(this._isDefence) {\n                this.audioID = AudioEngine.instance.playSound(SoundID.Spin, true);\n            } else {\n                AudioEngine.instance.stopSound(this.audioID);\n                this.audioID = null;\n            }\n        }\n    }\n\n});"]}