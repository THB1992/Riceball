{"version":3,"sources":["GuideSystem.js"],"names":["Tools","require","KnifeState","ConfigData","PlayerData","cc","Class","extends","Component","properties","init","world","uiMgr","state","localPlayer","players","knifes","landKnifes","captureTime","fixTime","killTime","releaseTime","defenceTime","dir","wall","guideWall","active","opacity","width","height","guideData","instance","updateGameLogic","dt","allComplete","flag","showGuideStart","knife","node","position","v2","getRandomInt","_arrowEffect","fixHeroMove","length","followPlayer","knivesCmp","knives","knifeLength","str","extraKnifeCount","refreshGuideProcess","fixKnife","onComplete","isDead","add","emit","firstSpeed","fixAIMove","isComplete","showGuideSpecial","flag_2","isDefence","stopControl","setTimeout","secondSpeed","on","Node","EventType","TOUCH_START","guideGameOverCallF","showGuideEnd","player","_collider","colliderNode","getComponent","Collider","heroRadius","radius","parent","scale","distanceX","Math","abs","x","distanceY","y","ai","local","sub","normalize","dPos","knifeStateComp","Normal"],"mappings":"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","file":"GuideSystem.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\system","sourcesContent":["const Tools = require('Tools');\r\nconst KnifeState = require('Types').KnifeState;\r\nconst ConfigData = require('ConfigData');\r\nconst PlayerData = require('PlayerData');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n    },\r\n\r\n    init(world) {\r\n        this.world = world;\r\n        this.uiMgr = world.uiMgr;\r\n        this.state = 0;\r\n        this.localPlayer = world.localPlayer;\r\n        this.players = world.players;\r\n        this.knifes = world.landKnifes;\r\n        this.captureTime = 0;\r\n        this.fixTime = 0;\r\n        this.killTime = 0;\r\n        this.releaseTime = 0;\r\n        this.defenceTime = 0;\r\n\r\n        this.dir = 1;\r\n        this.wall = world.guideWall;\r\n        this.wall.active = true;\r\n        this.wall.opacity = 100;\r\n        this.wall.width = 1520;\r\n        this.wall.height = 2640;\r\n        this.guideData = ConfigData.instance.guideData;\r\n    },\r\n\r\n    updateGameLogic(dt) {\r\n        //第一阶段 捡刀，数量达到指定值则成功\r\n\r\n        //第二阶段，击杀\r\n\r\n        //第三阶段，进入防御状态\r\n\r\n        //第四阶段，防御击杀\r\n\r\n        //结束返回\r\n        if (this.allComplete) return;\r\n\r\n        if (!this.flag) {\r\n            this.uiMgr.showGuideStart(0);\r\n            for (const knife of this.knifes) {\r\n                knife.node.position = cc.v2(Tools.getRandomInt(-360, 360), Tools.getRandomInt(-640, 640));\r\n                knife._arrowEffect.position = knife.node.position;\r\n            }\r\n            this.flag = true;\r\n        }\r\n        this.fixHeroMove(this.localPlayer);\r\n        switch (this.state) {\r\n            case 0:\r\n                this.captureTime += dt;\r\n                var length = this.localPlayer.followPlayer.knivesCmp.knives.length;\r\n                if (length !== this.knifeLength) {\r\n                    this.knifeLength = length;\r\n                    var str = length + '/' + (12 + PlayerData.instance.extraKnifeCount);\r\n                    this.uiMgr.refreshGuideProcess(str)\r\n                    this.captureTime = 0;\r\n                }\r\n\r\n                if (this.captureTime > 5) {\r\n                    this.fixKnife(dt);\r\n                } else if (this.captureTime === 0) {\r\n                    for (const knife of this.knifes) {\r\n                        knife._arrowEffect.active = false;\r\n                    }\r\n                }\r\n\r\n                if (length >= 12 + PlayerData.instance.extraKnifeCount) {\r\n                    this.onComplete();\r\n                }\r\n                break;\r\n            case 1:\r\n                this.killTime += dt;\r\n                var node = this.players[1].node;\r\n                var isDead = this.players[1].isDead;\r\n                if (!node.active && !isDead) {\r\n                    node.active = true;\r\n                    this.players[1].followPlayer.node.active = true;\r\n                    node.position = this.localPlayer.node.position.add(cc.v2(0, 1000));\r\n                    node.emit('changeSpeedRate', this.guideData.firstSpeed);\r\n                }\r\n                this.fixAIMove(this.players[1], this.localPlayer);\r\n                if (isDead) {\r\n                    this.onComplete();\r\n                }\r\n                if (this.killTime > 5 && !this.isComplete) {\r\n                    this.uiMgr.showGuideSpecial(this.state);\r\n                    this.killTime = 2;\r\n                }\r\n                break;\r\n            case 2:\r\n                if (this.flag_2) break;\r\n                this.releaseTime += dt;\r\n                var isDefence = this.localPlayer.isDefence;\r\n                if (isDefence && this.releaseTime > 2) {\r\n                    this.flag_2 = true;\r\n                    this.localPlayer.stopControl();\r\n                    setTimeout(() => {\r\n                        this.onComplete();\r\n                    }, 1000);\r\n                }\r\n\r\n                if (this.releaseTime > 5 && !this.isComplete) {\r\n                    this.uiMgr.showGuideSpecial(this.state);\r\n                    this.releaseTime = 2;\r\n                }\r\n                break;\r\n            case 3:\r\n                this.defenceTime += dt;\r\n                var node = this.players[2].node;\r\n                if (!node.active && !this.players[2].isDead) {\r\n                    node.active = true;\r\n                    this.players[2].followPlayer.node.active = true;\r\n                    node.position = this.localPlayer.node.position.add(cc.v2(500, 1000));\r\n                    node.emit('changeSpeedRate', this.guideData.secondSpeed);\r\n                }\r\n                node = this.players[3].node;\r\n\r\n                if (!node.active && !this.players[3].isDead) {\r\n                    node.active = true;\r\n                    this.players[3].followPlayer.node.active = true;\r\n                    node.position = this.localPlayer.node.position.add(cc.v2(-500, -1000));\r\n                    node.emit('changeSpeedRate', this.guideData.secondSpeed);\r\n                }\r\n\r\n                if (this.defenceTime > 2) {\r\n                    this.fixAIMove(this.players[2], this.localPlayer);\r\n                    this.fixAIMove(this.players[3], this.localPlayer);\r\n                }\r\n\r\n\r\n\r\n                var isDead = this.players[2].isDead && this.players[3].isDead;\r\n                if (isDead) {\r\n                    this.onComplete();\r\n                }\r\n\r\n                this.localPlayer.node.on(cc.Node.EventType.TOUCH_START, () => {\r\n                    if (!this.isComplete) this.uiMgr.showGuideSpecial(this.state);\r\n                }, this)\r\n                break;\r\n            case 4:\r\n                this.allComplete = true;\r\n                this.world.guideGameOverCallF();\r\n                break;\r\n        }\r\n\r\n    },\r\n\r\n    onComplete: function () {\r\n        if (this.isComplete) return;\r\n        this.isComplete = true;\r\n        this.uiMgr.showGuideEnd(this.state)\r\n        if (this.state > 3) return;\r\n        setTimeout(() => {\r\n            this.state++;\r\n            this.uiMgr.showGuideStart(this.state);\r\n            this.isComplete = false;\r\n        }, 2000)\r\n    },\r\n\r\n    fixHeroMove: function (player) {\r\n        this.wall.opacity = 100;\r\n        var node = player.node;\r\n        var _collider = player.colliderNode.getComponent(cc.Collider);\r\n\r\n\r\n        var heroRadius = _collider.radius * _collider.node.parent.scale;\r\n        var distanceX = (this.wall.width - 80) / 2 - heroRadius - Math.abs(node.position.x);\r\n        if (distanceX < 0) {\r\n            this.wall.opacity = 255;\r\n            this.uiMgr.showGuideSpecial(this.state);\r\n            node.x += node.x > 0 ? distanceX : -distanceX;\r\n        }\r\n        var distanceY = (this.wall.height - 80) / 2 - heroRadius - Math.abs(node.position.y);\r\n        if (distanceY < 0) {\r\n            this.wall.opacity = 255;\r\n            this.uiMgr.showGuideSpecial(this.state);\r\n            node.y += node.y > 0 ? distanceY : -distanceY;\r\n        }\r\n    },\r\n\r\n\r\n    fixAIMove: function (ai, local) {\r\n        var dir = local.node.position.sub(ai.node.position).normalize();\r\n        ai.node.emit('onMoveBy', {\r\n            dPos: dir,\r\n        });\r\n    },\r\n\r\n    fixKnife: function (dt) {\r\n        for (const knife of this.knifes) {\r\n            if (knife.knifeStateComp.state === KnifeState.Normal) {\r\n                if (!knife._arrowEffect.active) {\r\n                    knife._arrowEffect.active = true;\r\n                }\r\n            }\r\n        }\r\n    },\r\n});"]}