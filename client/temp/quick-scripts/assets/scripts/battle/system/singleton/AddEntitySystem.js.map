{"version":3,"sources":["AddEntitySystem.js"],"names":["Tools","require","UIUtil","PlayerData","ConfigData","GameData","PoolType","GrowType","PlatformMgr","AddEntitySystem","cc","Class","extends","Component","statics","instance","init","sys","properties","mapNode","Node","itemNode","playerUIDown","playerEffectDown","playerNode","weaponNode","playerUIUpNode","playerEffectUpNode","playerEffectUpSecondNode","playerCtxParent","mapPrefab","Prefab","wallNode","blockNode","effectNode","defencePrefab","diePrefab","nameLabelPrefab","nameNode","heroKnifeNumPrefab","heroFrenzyPrefab","rankIconPrefab","playerIconNode","buffNode","boxNode","bigEffectPrefab","fastEffectPrefab","hardEffectPrefab","magnetEffectPrefab","bigEffectTextPrefab","fastEffectTextPrefab","hardEffectTextPrefab","magnetEffectTextPrefab","defenceTipsPrefab","frenzyEffectPrefab","defenceStartPrefab","attackStartPrefab","arrowKnifePrefab","powerArrowPrefab","dangerousPrefab","pikaEffectPrefab","ctxPrefab","nezhaEffectPrefab","heroFlagPrefab","heroFlagNode","heroKeyPrefab","heroKeyNode","ultraEffectPrefab","guideNode","guidePrefab","yellowManEffectPrefab","width","height","poolMgr","mapType","setMapSize","mapZone","blockTypes","BLOCK","BLOCK_01","BLOCK_02","BLOCK_03","BLOCK_04","BLOCK_05","BLOCK_06","BLOCK_07","BLOCK_08","tempKnifes","mapWidth","mapHeight","mapXs","mapYs","blockXs","getRandomInt","blockYs","getRandomBool","cleanUp","destroyAllChildren","addMap","id","node","instantiate","map","getComponent","parent","_addEntityPlayer","isLocal","uid","tid","skin","name","x","y","rank","country","heroSkin","iconUrl","attackPower","defencePower","aiLevel","isKey","hero","getPlayer","player","position","v2","heroFollow","getFollowPlayer","followPlayer","heroNameNode","playerName","nameLabel","nickname","string","moveWithOwnerNode","getOrAddComponent","_scaleByOwner","heroRankNode","comp","_rankComp","loadResSprite","icon","url","knifeNumNode","knifeNum","scaleByOwner","flagNode","heroFlag","loadResFlag","_flagNode","_flagComp","keyNode","heroKey","_keyNode","_keyComp","canFrenzy","rankData","clientData","frenzyLimit","frenzyNode","frenzyBar","_frenzyBar","active","tipsRankLimit","tipsNode","_defenceTips","Sprite","scaleFix","powerArrowNode","_powerArrow","_createEffect","entityPlayer","_defenceEffect","_createEntityEffect","activeByOwner","activeNode","_dangerousEffect","_bigEffect","_fastEffect","_hardEffect","_magnetEffect","_bigEffectText","_fastEffectText","_hardEffectText","_magnetEffectText","_yellowManEffect","_frenzyEffect","dieEffect","effect","_dieEffect","moveWithPlayer","changeEffectColor","_pikaKeepEffect","_pikaAttackEffect","_nezhaAttackEffect","_ultraAttackEffect","prefab","addScaleComp","AddLocalPlayer","num","knifeSkin","myGuideComp","_addPlayerGuide","myGuide","speedLevelData","getGrowLevelDataByType","Speed","changeGrowSpeedAddition","realParam","stage","getCurStage","playCount","adverReviveLimit","_stage","localHeroTid","guide","EntityGuide","fliterSkin","isInReview","hideSpecialSkin","isHideInReview","knifeSkinDatas","isIOS","isHideInIOS","isApp","isHideInAndroidApp","AddRemotePlayer","skinMax","heroSkinRandomCount","heroSkinMax","ret","nameArr","iconArr","levelCfg","getLevelCfg","level","levelMax","i","getRandomKnifeSkin","getRandomHeroSkin","suit","Math","random","suitData","getSuitData","getKnifeSkinById","getRandomAIName","getRandomAIRank","arrContains","push","getRandomAIIcon","strongNum","weakNum","speedPower","goldPower","isShowLog","console","log","getRandomCountry","canShowKeyInAI","_addEntityKnife","getKnife","knife","initWalls","AddTempKnife","_returnTempKnife","AddKnife","isGuide","rotation","arrowEffect","_arrowEffect","_addEntityWall","tag","wall","getWall","entityWall","_addEntityCircleWall","getCircleWall","AddWall","AddBlock","block","length","_addEntityBlock","getBlock","getCircleBlock","children","floor","entityBlock","_addEntityCollisionEffect","pos","rotate","getCollEffect","finalPos","convertToNodeSpaceAR","addCollisionEffect","eff","initAsAnim","addDodgeEffect","getDodgeEffect","addRebornEffect","getRebornEffect","addDestroyDefenceEffect","getDestroyDefenceffect","addNeZhaEffect","getNeZhaffect","_addEntityShowKnifeEffect","getShowKnifeEffect","addShowKnifeEffect","_addEntityBuff","getBuff","buff","AddBuff","type","_addEntityBox","data","getBox","box","AddBox","getBoxDataById"],"mappings":"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","file":"AddEntitySystem.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\system\\singleton","sourcesContent":["/**\n * @fileoverview 创建实体系统\n * @author meifan@gameley.cn (梅凡)\n */\n\nconst Tools = require('Tools');\nconst UIUtil = require('UIUtil');\nconst PlayerData = require('PlayerData');\nconst ConfigData = require('ConfigData');\nconst GameData = require('GameData');\nconst PoolType = require('Types').PoolType;\nconst GrowType = require('Types').GrowType;\nconst PlatformMgr = require('PlatformMgr');\n\nconst AddEntitySystem = cc.Class({\n    extends: cc.Component,\n\n    statics: {\n        instance: null,\n        init: function (sys) {\n            // if (AddEntitySystem.instance === null) {\n            AddEntitySystem.instance = sys;\n            // AddEntitySystem.instance.init();\n            // }\n        }\n    },\n\n    properties: {\n        mapNode: cc.Node,\n        itemNode: cc.Node,\n        playerUIDown: cc.Node,\n        playerEffectDown: cc.Node,\n        playerNode: cc.Node,\n        weaponNode: cc.Node,\n        playerUIUpNode: cc.Node,\n        playerEffectUpNode: cc.Node,\n        playerEffectUpSecondNode: cc.Node,\n        playerCtxParent: cc.Node,\n\n        mapPrefab: cc.Prefab,\n\n        wallNode: cc.Node,\n\n        blockNode: cc.Node,\n\n        effectNode: cc.Node,\n\n        defencePrefab: cc.Prefab,\n        diePrefab: cc.Prefab,\n\n        nameLabelPrefab: cc.Prefab,\n        nameNode: cc.Node,\n\n        heroKnifeNumPrefab: cc.Prefab,\n        heroFrenzyPrefab: cc.Prefab,\n\n        rankIconPrefab: cc.Prefab,\n        playerIconNode: cc.Node,\n\n        // heroSkins: [cc.SpriteFrame],\n        // rankIcons: [cc.SpriteFrame],\n\n        buffNode: cc.Node,\n        boxNode: cc.Node,\n        bigEffectPrefab: cc.Prefab,\n        fastEffectPrefab: cc.Prefab,\n        hardEffectPrefab: cc.Prefab,\n        magnetEffectPrefab: cc.Prefab,\n\n        bigEffectTextPrefab: cc.Prefab,\n        fastEffectTextPrefab: cc.Prefab,\n        hardEffectTextPrefab: cc.Prefab,\n        magnetEffectTextPrefab: cc.Prefab,\n\n        defenceTipsPrefab: cc.Prefab,\n\n        frenzyEffectPrefab: cc.Prefab,\n\n        defenceStartPrefab: cc.Prefab,\n        attackStartPrefab: cc.Prefab,\n\n        arrowKnifePrefab: cc.Prefab,\n        powerArrowPrefab: cc.Prefab,\n        dangerousPrefab: cc.Prefab,\n\n        pikaEffectPrefab: cc.Prefab,\n        ctxPrefab: cc.Prefab,\n        nezhaEffectPrefab: cc.Prefab,\n\n        heroFlagPrefab: cc.Prefab,\n        heroFlagNode: cc.Node,\n\n        heroKeyPrefab: cc.Prefab,\n        heroKeyNode: cc.Node,\n        // _knifeID: 0,\n        ultraEffectPrefab: cc.Prefab,\n\n        guideNode: cc.Node,\n        guidePrefab: cc.Prefab,\n        // _knifeID: 0,\n        yellowManEffectPrefab: cc.Prefab,\n    },\n\n    init: function (width, height, poolMgr, mapType) {\n        this.poolMgr = poolMgr;\n        this.mapType = mapType;\n        this.setMapSize(width, height);\n        this.mapZone = [\n            [0, 0],\n            [2, 2],\n            [2, 0],\n            [0, 2],\n            [2, 1],\n            [0, 1],\n            [1, 0],\n            [1, 2]\n        ];\n        // this.blockPoint = [[0,1],[1,0],[2,0],[3,1],[3,2],[2,3],[1,3],[0,2],[1,1],[2,1],[2,2],[1,2]];\n        this.blockTypes = [PoolType.BLOCK, PoolType.BLOCK_01, PoolType.BLOCK_02, PoolType.BLOCK_03, PoolType.BLOCK_04, PoolType.BLOCK_05, PoolType.BLOCK_06, PoolType.BLOCK_07, PoolType.BLOCK_08];\n\n\n        //初始化新刀\n        this.tempKnifes = [];\n    },\n\n    setMapSize: function (width, height) {\n        this.mapWidth = width;\n        this.mapHeight = height;\n\n        this.mapXs = [-width / 2, -width / 4, width / 4, width / 2];\n        this.mapYs = [-height / 2, -height / 4, height / 4, height / 2];\n\n        this.blockXs = [-width * 1 / 4, width * 1 / 4, Tools.getRandomInt(-width / 6, width / 6)];\n        this.blockYs = [Tools.getRandomInt(-height / 6, height / 6), Tools.getRandomInt(-height / 6, height / 6), Tools.getRandomBool() ? -height * 1 / 4 : height * 1 / 4];\n    },\n\n    cleanUp: function () {\n        this.mapNode.destroyAllChildren();\n        this.playerNode.destroyAllChildren();\n        this.weaponNode.destroyAllChildren();\n        this.nameNode.destroyAllChildren();\n        this.playerIconNode.destroyAllChildren();\n        this.playerUIUpNode.destroyAllChildren();\n        this.playerEffectUpSecondNode.destroyAllChildren();\n        this.playerEffectUpNode.destroyAllChildren();\n        this.itemNode.destroyAllChildren();\n        this.playerUIDown.destroyAllChildren();\n        this.playerEffectDown.destroyAllChildren();\n        this.wallNode.destroyAllChildren();\n        this.blockNode.destroyAllChildren();\n        this.effectNode.destroyAllChildren();\n        this.buffNode.destroyAllChildren();\n        this.boxNode.destroyAllChildren();\n        this.heroFlagNode.destroyAllChildren();\n        this.heroKeyNode.destroyAllChildren();\n        this.guideNode.destroyAllChildren();\n    },\n\n    // onLoad () {},\n\n    // start () {},\n\n    // update (dt) {},\n\n    addMap: function (id, width, height) {\n        const node = cc.instantiate(this.mapPrefab);\n        const map = node.getComponent('EntityMap');\n        node.parent = this.mapNode;\n\n        map.init(id, width, height);\n\n        return map;\n    },\n\n    /**\n     * 创建玩家实体\n     */\n    _addEntityPlayer: function (isLocal, uid, tid, skin, name, x, y, rank, country, heroSkin, iconUrl, attackPower, defencePower, aiLevel, isKey) {\n        const hero = this.poolMgr.getPlayer();\n        const player = hero.getComponent('EntityPlayer');\n        hero.parent = this.playerNode;\n        hero.position = cc.v2(x, y);\n\n        const heroFollow = this.poolMgr.getFollowPlayer();\n        const followPlayer = heroFollow.getComponent('EntityFollowPlayer')\n        heroFollow.parent = this.weaponNode;\n\n        const heroNameNode = cc.instantiate(this.nameLabelPrefab);\n        heroNameNode.parent = this.nameNode;\n        var playerName = heroNameNode.getComponent('PlayerName');\n        var nameLabel = playerName.nickname;\n        nameLabel.string = name;\n        var moveWithOwnerNode = Tools.getOrAddComponent(heroNameNode, 'MoveWithOwnerNode');\n        moveWithOwnerNode.init(hero, playerName);\n        var _scaleByOwner = Tools.getOrAddComponent(heroNameNode, 'ScaleByOwner');\n        _scaleByOwner.init(hero);\n\n        const heroRankNode = cc.instantiate(this.rankIconPrefab);\n        heroRankNode.parent = this.playerIconNode;\n        var comp = heroRankNode.getComponent('PlayerRankIcon');\n        player._rankComp = comp;\n        UIUtil.loadResSprite(comp.icon, rank.url);\n        // this.loadRankSprite(comp.icon, rank.iconIndex);\n        moveWithOwnerNode = Tools.getOrAddComponent(heroRankNode, 'MoveWithOwnerNode');\n        moveWithOwnerNode.init(hero, comp);\n        _scaleByOwner = Tools.getOrAddComponent(heroRankNode, 'ScaleByOwner');\n        _scaleByOwner.init(hero);\n\n\n\n        const knifeNumNode = cc.instantiate(this.heroKnifeNumPrefab);\n        knifeNumNode.parent = this.playerUIUpNode;\n        const knifeNum = knifeNumNode.getComponent('HeroKnifeNum');\n        knifeNum.init(player);\n        moveWithOwnerNode = Tools.getOrAddComponent(knifeNumNode, 'MoveWithOwnerNode');\n        moveWithOwnerNode.init(hero, knifeNum);\n        const scaleByOwner = Tools.getOrAddComponent(knifeNumNode, 'ScaleByOwner');\n        scaleByOwner.init(hero);\n\n        const flagNode = cc.instantiate(this.heroFlagPrefab);\n        flagNode.parent = this.heroFlagNode;\n        const heroFlag = flagNode.getComponent('HeroFlag');\n        UIUtil.loadResFlag(heroFlag.icon, country);\n        moveWithOwnerNode = Tools.getOrAddComponent(flagNode, 'MoveWithOwnerNode');\n        moveWithOwnerNode.init(hero, heroFlag);\n        _scaleByOwner = Tools.getOrAddComponent(flagNode, 'ScaleByOwner');\n        _scaleByOwner.init(hero);\n        player._flagNode = flagNode;\n        player._flagComp = heroFlag;\n\n        if (isKey) {\n            const keyNode = cc.instantiate(this.heroKeyPrefab);\n            keyNode.parent = this.heroKeyNode;\n            const heroKey = keyNode.getComponent('HeroKey');\n            moveWithOwnerNode = Tools.getOrAddComponent(keyNode, 'MoveWithOwnerNode');\n            moveWithOwnerNode.init(hero, heroKey);\n            _scaleByOwner = Tools.getOrAddComponent(keyNode, 'ScaleByOwner');\n            _scaleByOwner.init(hero);\n            player._keyNode = keyNode;\n            player._keyComp = heroKey;\n        }\n\n        followPlayer.init(player);\n        var canFrenzy = PlayerData.instance.rankData.id >= ConfigData.instance.clientData.frenzyLimit;\n        player.init(isLocal, uid, followPlayer, tid, skin, playerName, rank, heroRankNode, country, heroSkin, iconUrl, attackPower, defencePower, aiLevel, canFrenzy, isKey);\n\n        if (isLocal) {\n            //暴走相关\n            const frenzyNode = cc.instantiate(this.heroFrenzyPrefab);\n            frenzyNode.parent = this.playerUIUpNode;\n            const frenzyBar = frenzyNode.getComponent('HeroFrenzyBar');\n            frenzyBar.init(player);\n            moveWithOwnerNode = Tools.getOrAddComponent(frenzyNode, 'MoveWithOwnerNode');\n            moveWithOwnerNode.init(hero, frenzyBar);\n            const scaleByOwner = Tools.getOrAddComponent(frenzyNode, 'ScaleByOwner');\n            scaleByOwner.init(hero);\n            player._frenzyBar = frenzyNode;\n            frenzyNode.active = false;\n\n\n\n\n            if (rank.id < ConfigData.instance.clientData.tipsRankLimit) {\n                const tipsNode = cc.instantiate(this.defenceTipsPrefab);\n                tipsNode.parent = this.playerUIUpNode;\n                player._defenceTips = tipsNode;\n                tipsNode.active = false;\n                moveWithOwnerNode = Tools.getOrAddComponent(tipsNode, 'MoveWithOwnerNode');\n                moveWithOwnerNode.init(hero, tipsNode.getComponent(cc.Sprite));\n                var scaleFix = Tools.getOrAddComponent(tipsNode, 'ScaleFix');\n                scaleFix.init(hero);\n            }\n        } else {\n            const powerArrowNode = cc.instantiate(this.powerArrowPrefab);\n            powerArrowNode.parent = this.playerEffectUpSecondNode;\n            var comp = powerArrowNode.getComponent('PowerArrow');\n            player._powerArrow = comp;\n            // const scaleByOwner = Tools.getOrAddComponent(powerArrowNode, 'ScaleByOwner');\n            // scaleByOwner.init(hero);\n        }\n\n        this._createEffect(player);\n\n        return player;\n    },\n\n    _createEffect: function (entityPlayer) {\n        //防御特效\n        entityPlayer._defenceEffect = this._createEntityEffect(this.defencePrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n        var activeByOwner = Tools.getOrAddComponent(entityPlayer._defenceEffect.node, 'ActiveByOwner');\n        activeByOwner.init(entityPlayer, entityPlayer._defenceEffect.activeNode);\n\n\n        //切换至防御的特效\n        // entityPlayer._defenceStartEffect = this._createEntityEffect(this.defenceStartPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n        //切换至攻击的特效\n        // entityPlayer._attackStartEffect = this._createEntityEffect(this.attackStartPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n\n        //危险特效\n        entityPlayer._dangerousEffect = this._createEntityEffect(this.dangerousPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpSecondNode)\n\n        //buff特效\n        entityPlayer._bigEffect = this._createEntityEffect(this.bigEffectPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n        entityPlayer._fastEffect = this._createEntityEffect(this.fastEffectPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n\n        entityPlayer._hardEffect = this._createEntityEffect(this.hardEffectPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode, false)\n        var scaleFix = Tools.getOrAddComponent(entityPlayer._hardEffect.node, 'ScaleFix');\n        scaleFix.init(entityPlayer.node);\n\n        entityPlayer._magnetEffect = this._createEntityEffect(this.magnetEffectPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode, false)\n        scaleFix = Tools.getOrAddComponent(entityPlayer._magnetEffect.node, 'ScaleFix');\n        scaleFix.init(entityPlayer.node);\n\n        entityPlayer._bigEffectText = this._createEntityEffect(this.bigEffectTextPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n        entityPlayer._fastEffectText = this._createEntityEffect(this.fastEffectTextPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n        entityPlayer._hardEffectText = this._createEntityEffect(this.hardEffectTextPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n        entityPlayer._magnetEffectText = this._createEntityEffect(this.magnetEffectTextPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n\n        entityPlayer._yellowManEffect = this._createEntityEffect(this.yellowManEffectPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode)\n\n\n\n        entityPlayer._frenzyEffect = this._createEntityEffect(this.frenzyEffectPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpNode, false)\n        scaleFix = Tools.getOrAddComponent(entityPlayer._frenzyEffect.node, 'ScaleFix');\n        scaleFix.init(entityPlayer.node);\n\n        //死亡特效\n        const dieEffect = cc.instantiate(this.diePrefab);\n        const effect = dieEffect.getComponent('EntityEffect');\n        dieEffect.parent = this.playerEffectUpNode;\n        entityPlayer._dieEffect = effect;\n        var moveWithPlayer = Tools.getOrAddComponent(dieEffect, 'MoveWithOwnerNode');\n        moveWithPlayer.init(entityPlayer.node, effect);\n\n        dieEffect.active = false;\n        entityPlayer.changeEffectColor();\n        //皮卡丘需要加上特效和画闪电\n        // if (entityPlayer.heroSkin && entityPlayer.heroSkin.id === 9) {\n        entityPlayer._pikaKeepEffect = this._createEntityEffect(this.pikaEffectPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpSecondNode)\n        entityPlayer._pikaAttackEffect = this._createEntityEffect(this.ctxPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpSecondNode)\n        entityPlayer._nezhaAttackEffect = this._createEntityEffect(this.nezhaEffectPrefab, 'EntityEffect', entityPlayer, this.playerUIDown)\n        entityPlayer._ultraAttackEffect = this._createEntityEffect(this.ultraEffectPrefab, 'EntityEffect', entityPlayer, this.playerEffectUpSecondNode)\n\n    },\n\n    _createEntityEffect: function (prefab, comp, entityPlayer, parent, addScaleComp = true) {\n        const effectNode = cc.instantiate(prefab);\n        var effect = effectNode.getComponent(comp);\n        effectNode.parent = parent;\n        var moveWithPlayer = Tools.getOrAddComponent(effectNode, 'MoveWithOwnerNode');\n        moveWithPlayer.init(entityPlayer.node, effect);\n        if (addScaleComp) {\n            const scaleByOwner = Tools.getOrAddComponent(effectNode, 'ScaleByOwner');\n            scaleByOwner.init(entityPlayer.node);\n        }\n\n        return effect;\n    },\n\n    /**\n     * 创建本地玩家 并把EntityPlayer返回给World\n     * local玩家tid为1\n     */\n    AddLocalPlayer: function (num) {\n        var skin = PlayerData.instance.knifeSkin;\n        var name = PlayerData.instance.name;\n        var rank = PlayerData.instance.rankData;\n        var heroSkin = PlayerData.instance.heroSkin;\n        var iconUrl = PlayerData.instance.iconUrl;\n        var country = PlayerData.instance.country;\n\n        // var growStage = ConfigData.instance.getCurGrowStage(PlayerData.instance.playCount, ConfigData.instance.clientData.growLimit);\n        var attackPower = 0;\n        var defencePower = 0;\n        // if (growStage >= 2) {\n        //     var attackLeveldata = PlayerData.instance.getGrowLevelDataByType(GrowType.Attack);\n        //     if (attackLeveldata) attackPower = attackLeveldata.realParam;\n        //     var defenceLeveldata = PlayerData.instance.getGrowLevelDataByType(GrowType.Defence);\n        //     if (defenceLeveldata) defencePower = defenceLeveldata.realParam;\n        // } else {\n        //     if (GameData.instance.isShowLog()) {\n        //         console.log('stage', growStage, '未开启破防，防御属性')\n        //     }\n        // }\n        // const player = this._addEntityPlayer(true, 999, 1, skin, name, 0, 0, rank, heroSkin, iconUrl, attackPower, defencePower);\n     \n\n        const player = this._addEntityPlayer(true, 999, 1, skin, name, 0, 0, rank, country, heroSkin, iconUrl, attackPower, defencePower);\n\n        player.myGuideComp = this._addPlayerGuide(player);\n        player.myGuide = player.myGuideComp.node;\n\n        var speedLevelData = PlayerData.instance.getGrowLevelDataByType(GrowType.Speed);\n        if (speedLevelData) player.changeGrowSpeedAddition(speedLevelData.realParam);\n\n        var stage = ConfigData.instance.getCurStage(PlayerData.instance.playCount, ConfigData.instance.clientData.adverReviveLimit);\n        player._stage = stage;\n\n\n\n        GameData.instance.localHeroTid = 1;\n\n        return player;\n    },\n\n\n    _addPlayerGuide: function (player) {\n        const guide = cc.instantiate(this.guidePrefab);\n        const EntityGuide = guide.getComponent('EntityGuide');\n        guide.parent = this.guideNode;\n        guide.active = false;\n        EntityGuide.init(player);\n        return EntityGuide;\n    },\n\n    fliterSkin: function (skin, heroSkin) {\n        if (GameData.instance.isInReview || ConfigData.instance.clientData.hideSpecialSkin) {\n            if (skin && skin.isHideInReview) {\n                skin = ConfigData.instance.knifeSkinDatas[0];\n            }\n            if (heroSkin && heroSkin.isHideInReview) {\n                heroSkin = null;\n            }\n        }\n\n        if (PlatformMgr.isIOS()) {\n            if (skin && skin.isHideInIOS) {\n                skin = ConfigData.instance.knifeSkinDatas[0];\n            }\n\n            if (heroSkin && heroSkin.isHideInIOS) {\n                heroSkin = null;\n            }\n        }\n\n        if (PlatformMgr.isApp()) {\n            if (skin && skin.isHideInAndroidApp) {\n                skin = ConfigData.instance.knifeSkinDatas[0];\n            }\n\n            if (heroSkin && heroSkin.isHideInAndroidApp) {\n                heroSkin = null;\n            }\n        }\n    },\n\n    /**\n     * 创建AI玩家 并把EntityPlayer返回给World\n     * tid从2开始\n     * @param {*} num \n     */\n    AddRemotePlayer: function (num, skinMax, heroSkinRandomCount, heroSkinMax) {\n        var ret = [];\n        var x = 0;\n        var y = 0;\n        var player = null;\n        var nameArr = [];\n        var iconArr = [];\n        // const aiStarDatas = ConfigData.instance.getAiStarDataByPlayerStar(PlayerData.instance.rankStar);\n\n        const levelCfg = ConfigData.instance.getLevelCfg(PlayerData.instance.level);\n        const levelMax = 7;\n        for (var i = 0; i < num; i++) {\n\n\n\n            //刀的皮肤\n            var skin = ConfigData.instance.getRandomKnifeSkin(skinMax);\n\n            //英雄皮肤\n            var heroSkin = {};\n            if (i < heroSkinRandomCount) {\n                heroSkin = ConfigData.instance.getRandomHeroSkin(heroSkinMax, PlayerData.instance.heroSkin.id);\n            } else {\n                heroSkin = null;\n            }\n\n            if (heroSkin && heroSkin.suit && Math.random() < 0.5) {\n                var suitData = ConfigData.instance.getSuitData(heroSkin.suit)\n                skin = ConfigData.instance.getKnifeSkinById(suitData.knifeSkin);\n            }\n\n            this.fliterSkin(skin, heroSkin)\n\n            var name = ConfigData.instance.getRandomAIName();\n            var rank = ConfigData.instance.getRandomAIRank(i);\n            if (nameArr) {\n                while (Tools.arrContains(nameArr, name)) {\n                    name = ConfigData.instance.getRandomAIName();\n                }\n                nameArr.push(name);\n            }\n\n            if (iconArr) {\n                var iconUrl = ConfigData.instance.getRandomAIIcon();\n                while (Tools.arrContains(iconArr, iconUrl)) {\n                    iconUrl = ConfigData.instance.getRandomAIIcon();\n                }\n                iconArr.push(iconUrl);\n            }\n\n            x = Tools.getRandomInt(this.mapXs[this.mapZone[i][0]], this.mapXs[this.mapZone[i][0] + 1]);\n            y = Tools.getRandomInt(this.mapYs[this.mapZone[i][1]], this.mapYs[this.mapZone[i][1] + 1]);\n\n\n\n            var aiLevel = i;\n            if (levelCfg) {\n                aiLevel = aiLevel < levelCfg.strongNum ? levelMax - 1 : aiLevel;\n                aiLevel = aiLevel >= levelMax - levelCfg.weakNum ? 0 : aiLevel;\n            }\n\n\n            // var aiStar = Tools.getRandomInt(aiStarDatas.minAiStars[aiLevel], aiStarDatas.maxAiStars[aiLevel] + 1);\n            // var aiGrowData = ConfigData.instance.getAiGrowDataBystar(aiStar);\n\n            // var growStage = ConfigData.instance.getCurGrowStage(PlayerData.instance.playCount, ConfigData.instance.clientData.growLimit);\n\n            // var attackPower = growStage >= 2 ? aiGrowData.attackPower : 0;\n            // var defencePower = growStage >= 2 ? aiGrowData.defencePower : 0;\n            // var speedPower = growStage >= 1 ? aiGrowData.speedPower : 0;\n            // var goldPower = growStage >= 1 ? aiGrowData.goldPower / 100 : 0;\n            var attackPower = 0;\n            var defencePower = 0;\n            var speedPower = 0;\n            var goldPower = 0;\n\n            if (GameData.instance.isShowLog()) {\n                if (levelCfg) {\n                    console.log('level:' + aiLevel + ' strong: ' + levelCfg.strongNum + ' weak: ' + levelCfg.weakNum);\n                }\n            }\n\n\n            var country = ConfigData.instance.getRandomCountry();\n            // console.log(country);\n\n            // skin = ConfigData.instance.getKnifeSkinById(30);\n            // heroSkin = ConfigData.instance.getHeroSkinById(9);\n\n            var isKey = i === (num - 1) && PlayerData.instance.canShowKeyInAI()\n\n            player = this._addEntityPlayer(false, 100 + i, i + 2, skin, name, x, y, rank, country, heroSkin, iconUrl, attackPower, defencePower, aiLevel, isKey);\n            ret[i] = player;\n            player.myGuideComp = this._addPlayerGuide(player);\n            player.myGuide = player.myGuideComp.node;\n\n\n            // player.changeGrowSpeedAddition(speedPower);\n            // player.setGoldAddition(goldPower);\n        }\n\n        return ret;\n    },\n\n\n    /**\n     * 创建刀实体\n     */\n    _addEntityKnife: function (tid) {\n        const node = this.poolMgr.getKnife();\n        const knife = node.getComponent('EntityKnife');\n        // knife.recycleSelf = () => {\n        //     knife.node.opacity = 0;\n        //     knife.knifeColliderNodeCtrl.attackCollider.notColliderFlag = true;\n        //     this.tempKnifes.push(knife);\n        // }\n        node.parent = this.itemNode;\n        // knife.changeID(this._knifeID);\n        // this._knifeID ++;\n\n        knife.init(tid, this.itemNode);\n        knife.initWalls(this.mapType, this.mapWidth, this.mapHeight)\n        return knife;\n    },\n\n    AddTempKnife: function () {\n        // if (this.tempKnifes.length < 20) {\n        //     var knife = this._addEntityKnife(0);\n        //     knife.recycleSelf();\n        // }\n    },\n\n    _returnTempKnife: function () {\n        // var knife = this.tempKnifes.shift();\n        // if (knife) {\n        //     knife.node.opacity = 255;\n        //     knife.knifeColliderNodeCtrl.attackCollider.notColliderFlag = false;\n        // } else {\n\n        var knife = this._addEntityKnife(0);\n        // }\n        return knife;\n    },\n\n    /***\n     * 创建刀 并把EntityKnife返回给World\n     * @param {*} num \n     */\n    AddKnife: function (num, isGuide = false) {\n        var ret = [];\n        for (var i = 0; i < num; i++) {\n            const knife = this._returnTempKnife();\n            knife.node.position = cc.v2(Tools.getRandomInt(-this.mapWidth / 3, this.mapWidth / 3), Tools.getRandomInt(-this.mapHeight / 3, this.mapHeight / 3));\n            knife.node.rotation = Tools.getRandomInt(0, 360);\n            ret[i] = knife;\n\n            if (isGuide) {\n                const arrowEffect = cc.instantiate(this.arrowKnifePrefab)\n                arrowEffect.active = false;\n                arrowEffect.parent = this.effectNode;\n                knife._arrowEffect = arrowEffect;\n            }\n        }\n        return ret;\n    },\n\n    /**\n     * 创建墙实体\n     */\n    _addEntityWall: function (tag) {\n        const wall = this.poolMgr.getWall();;\n        const entityWall = wall.getComponent('EntityWall');\n        wall.parent = this.wallNode;\n        entityWall.init(tag, this.mapWidth, this.mapHeight);\n\n        return wall;\n    },\n\n    _addEntityCircleWall: function (tag) {\n        const wall = this.poolMgr.getCircleWall();;\n        const entityWall = wall.getComponent('EntityCircleWall');\n        wall.parent = this.wallNode;\n        entityWall.init(this.mapWidth, this.mapHeight);\n\n        return wall;\n    },\n\n    AddWall: function (id) {\n        var ret = [];\n        switch (id) {\n            case 0:\n                for (var i = 0; i < 4; i++) {\n                    var wall = this._addEntityWall(i);\n                    if (i < 2) {\n                        wall.y = (i === 0 ? 1 : -1) * (this.mapHeight / 2 + wall.height / 2);\n                    } else {\n                        wall.x = (i === 3 ? 1 : -1) * (this.mapWidth / 2 + wall.width / 2);\n                    }\n                    ret.push(wall);\n                }\n                break;\n            case 1:\n                var wall = this._addEntityCircleWall(i);\n                ret.push(wall);\n                break;\n        }\n        return ret;\n    },\n\n\n    AddBlock: function (num) {\n        var ret = [];\n        var x = 0;\n        var y = 0;\n        var block = null;\n        // var usedPos = [];\n        // var curIndex = -1;\n        // var tryTime = 0;\n        for (var i = 0; i < num; i++) {\n            // curIndex = Tools.getRandomInt(0, this.blockPoint.length - 1);\n            // while(usedPos[curIndex]) {\n            //     curIndex ++;\n            //     if(curIndex >= this.blockPoint.length) {\n            //         curIndex = 0;\n            //     }\n            //     tryTime ++;\n            //     if(tryTime > 5) {\n            //         break;\n            //     }\n            // }\n\n            // usedPos[curIndex] = true;\n            x = this.blockXs[i % this.blockXs.length];\n            y = this.blockYs[i % this.blockYs.length];\n            block = this._addEntityBlock(x, y);\n            // x = Tools.getRandomBool() ? Tools.getRandomInt(-this.mapWidth / 3, -this.mapWidth / 6) : Tools.getRandomInt(this.mapWidth / 6, this.mapWidth / 3);\n            // y = Tools.getRandomBool() ? Tools.getRandomInt(-this.mapHeight / 3, -this.mapHeight / 6) : Tools.getRandomInt(this.mapHeight / 6, this.mapHeight / 3);\n\n            ret[i] = block;\n        }\n        return ret;\n    },\n\n    /**\n     * 创建障碍实体\n     */\n    _addEntityBlock: function (x, y) {\n        var node = null;\n        if (this.mapType === 0) {\n            node = this.poolMgr.getBlock(this.blockTypes[Tools.getRandomInt(0, 100) % this.blockTypes.length]);\n        } else {\n            node = this.poolMgr.getCircleBlock();\n            node.children[1].rotation = Math.floor(Math.random() * 360);\n        }\n\n        const entityBlock = node.getComponent('EntityBlock');\n        node.parent = this.blockNode;\n        entityBlock.init(x, y);\n        return entityBlock;\n    },\n\n\n    /**\n     * 创建特效实体\n     */\n    _addEntityCollisionEffect: function (pos, rotate) {\n        const effect = this.poolMgr.getCollEffect();\n        effect.parent = this.effectNode;\n        var finalPos = this.effectNode.convertToNodeSpaceAR(pos);\n        effect.position = finalPos;\n        effect.rotation = rotate;\n        return effect;\n    },\n\n    addCollisionEffect: function (pos, rotate) {\n        var effect = this._addEntityCollisionEffect(pos, rotate);\n        const eff = effect.getComponent('EntityEffect');\n        eff.initAsAnim();\n\n        return effect;\n    },\n\n\n    addDodgeEffect: function (pos) {\n        const effect = this.poolMgr.getDodgeEffect();\n        effect.parent = this.effectNode;;\n        var finalPos = this.effectNode.convertToNodeSpaceAR(pos);\n        effect.position = finalPos;\n\n        const eff = effect.getComponent('EntityEffect');\n        eff.initAsAnim();\n\n        return effect;\n    },\n\n    addRebornEffect: function (pos) {\n        const effect = this.poolMgr.getRebornEffect();\n        effect.parent = this.effectNode;\n        var finalPos = this.effectNode.convertToNodeSpaceAR(pos);\n        effect.position = finalPos;\n\n        const eff = effect.getComponent('EntityEffect');\n        eff.initAsAnim();\n\n        return effect;\n    },\n\n    addDestroyDefenceEffect: function (pos) {\n        const effect = this.poolMgr.getDestroyDefenceffect();\n        effect.parent = this.playerEffectUpSecondNode;;\n        var finalPos = this.effectNode.convertToNodeSpaceAR(pos);\n        effect.position = finalPos;\n\n        const eff = effect.getComponent('EntityEffect');\n        eff.initAsAnim();\n\n        return effect;\n    },\n\n    addNeZhaEffect: function (pos) {\n        const effect = this.poolMgr.getNeZhaffect();\n        effect.parent = this.playerEffectUpSecondNode;;\n        var finalPos = this.effectNode.convertToNodeSpaceAR(pos);\n        effect.position = finalPos;\n        const eff = effect.getComponent('EntityEffect');\n        eff.initAsAnim();\n        return effect;\n    },\n    /**\n     * 创建刷刀特效实体\n     */\n    _addEntityShowKnifeEffect: function (pos) {\n        const effect = this.poolMgr.getShowKnifeEffect();\n        effect.parent = this.effectNode;\n        var finalPos = pos; //this.effectNode.convertToNodeSpaceAR(pos);\n        effect.position = finalPos;\n        return effect;\n    },\n\n\n    addShowKnifeEffect: function (pos) {\n        var effect = this._addEntityShowKnifeEffect(pos);\n        const eff = effect.getComponent('EntityEffect');\n        eff.initAsAnim();\n\n        return effect;\n    },\n\n    /**\n     * 创建buff实体\n     */\n    _addEntityBuff: function (id) {\n        const node = this.poolMgr.getBuff();\n        const buff = node.getComponent('EntityBuff');\n        node.parent = this.buffNode;\n        buff.init(id);\n        return buff;\n    },\n\n    /***\n     * 创建BUFF 并把EntityBuff返回给World\n     * @param {*} num \n     */\n    AddBuff: function (num, type) {\n        var ret = [];\n        for (var i = 0; i < num; i++) {\n            // var id = Tools.getRandomInt(0, 3);\n            const buff = this._addEntityBuff(type);\n            buff.node.position = cc.v2(Tools.getRandomInt(-this.mapWidth / 3, this.mapWidth / 3), Tools.getRandomInt(-this.mapHeight / 3, this.mapHeight / 3));\n            // knife.node.position = cc.v2(200,200);\n            // knife.node.rotation = Tools.getRandomInt(0, 360);\n            ret[i] = buff;\n        }\n        return ret;\n    },\n\n\n\n\n    /**\n     * 创建box实体\n     */\n    _addEntityBox: function (data) {\n        const node = this.poolMgr.getBox();\n        const box = node.getComponent('EntityBox');\n        node.parent = this.boxNode;\n        box.init(data);\n        return box;\n    },\n\n    /***\n     * 创建box 并把EntityBox返回给World\n     * @param {*} num \n     */\n    AddBox: function (num, id) {\n        var ret = [];\n        for (var i = 0; i < num; i++) {\n            // var id = Tools.getRandomInt(0, 3);\n            var data = ConfigData.instance.getBoxDataById(id)\n            const box = this._addEntityBox(data);\n            box.node.position = cc.v2(Tools.getRandomInt(-this.mapWidth / 3, this.mapWidth / 3), Tools.getRandomInt(-this.mapHeight / 3, this.mapHeight / 3));\n            // knife.node.position = cc.v2(200,200);\n            // knife.node.rotation = Tools.getRandomInt(0, 360);\n            ret[i] = box;\n        }\n        return ret;\n    },\n\n\n\n\n\n\n    //#region 由于主域空间不足，临时将英雄、段位图标绑在场景上使用 \n\n    // _getHeroSkinSpriteFrame: function (index) {\n    //     if (index < 0 || index >= this.heroSkins.length) {\n    //         return null;\n    //     }\n\n    //     var sprite = this.heroSkins[index];\n    //     return sprite;\n    // },\n\n    // loadHeroSkinSprite: function (sprite, index, callback) {\n    //     sprite.spriteFrame = this._getHeroSkinSpriteFrame(index);\n    //     if (callback) callback();\n    // },\n\n    // _getRankIconSpriteFrame: function (index) {\n    //     if (index < 0 || index >= this.rankIcons.length) {\n    //         return null;\n    //     }\n\n    //     var sprite = this.rankIcons[index];\n    //     return sprite;\n    // },\n\n    // loadRankSprite: function (sprite, rankIndex) {\n    //     sprite.spriteFrame = this._getRankIconSpriteFrame(rankIndex);\n    // }\n\n    //#endregion\n\n});"]}