{"version":3,"sources":["ItemTreasureBox.js"],"names":["ListItemBase","require","UIUtil","ConfigData","PlayerData","ShareMgr","ShareType","AdvertMgr","AdverType","Tools","BagItem","ItemType","StageType","cc","Class","extends","properties","rewardParent","Node","boxNode","numLabel","Label","heroSprite","Sprite","knifeSprite","diamondMore","diamondLess","openAnim","Animation","openBestAnim","getBg","init","string","hasGet","active","node","getReward","item","i","children","length","type","num","setTimeout","MONEY","ZONG_ZI","playBestAnim","play","HERO_SKIN","loadResSprite","itemData","url","KNIFE_SKIN"],"mappings":"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","file":"ItemTreasureBox.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const ListItemBase = require('ListItemBase');\r\nconst UIUtil = require('UIUtil');\r\nconst ConfigData = require('ConfigData');\r\nconst PlayerData = require('PlayerData');\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\nconst Tools = require('Tools');\r\nconst BagItem = require('BagItem');\r\nconst ItemType = require('Types').ItemType;\r\nconst StageType = require('Types').StageType;\r\n\r\ncc.Class({\r\n    extends: ListItemBase,\r\n\r\n    properties: {\r\n        rewardParent: cc.Node,\r\n        boxNode: cc.Node,\r\n        numLabel: cc.Label,\r\n\r\n        heroSprite: cc.Sprite,\r\n        knifeSprite: cc.Sprite,\r\n        diamondMore: cc.Node,\r\n        diamondLess: cc.Node,\r\n\r\n        openAnim: cc.Animation,\r\n        openBestAnim: cc.Node,\r\n        getBg: cc.Node,\r\n    },\r\n\r\n    init() {\r\n        this.numLabel.string = '';\r\n        this.hasGet = false;\r\n        this.getBg.active = false;\r\n        this.rewardParent.active = false;\r\n        this.boxNode.active = true;\r\n        this.numLabel.node.active = false;\r\n        this.openBestAnim.active = false;\r\n        // this.openBestAnim.node.parent.active = false;\r\n    },\r\n\r\n\r\n    getReward(item) {\r\n        this.hasGet = true;\r\n        for (let i = 0; i < this.rewardParent.children.length; i++) {\r\n            this.rewardParent.children[i].active = i === item.type;\r\n        }\r\n        this.diamondMore.active = item.num === 35;\r\n        this.diamondLess.active = !this.diamondMore.active;\r\n\r\n        this.boxNode.active = false;\r\n        this.getBg.active = true;\r\n\r\n        setTimeout(() => {\r\n            this.rewardParent.active = true;\r\n            this.numLabel.node.active = true;\r\n        }, 300);\r\n\r\n        switch (item.type) {\r\n            case ItemType.MONEY:\r\n            case ItemType.ZONG_ZI:\r\n                this.numLabel.string = item.num;\r\n                if (this.diamondMore.active) {\r\n                    this.playBestAnim();\r\n                } else {\r\n                    this.openAnim.play();\r\n                }\r\n                break;\r\n            case ItemType.HERO_SKIN:\r\n                this.playBestAnim();\r\n                this.numLabel.string = '';\r\n                UIUtil.loadResSprite(this.heroSprite, item.itemData.url);\r\n                break;\r\n            case ItemType.KNIFE_SKIN:\r\n                this.playBestAnim();\r\n                this.numLabel.string = '';\r\n                UIUtil.loadResSprite(this.knifeSprite, item.itemData.url);\r\n                break;\r\n        }\r\n    },\r\n\r\n    playBestAnim: function () {\r\n        // this.openBestAnim.node.parent.active = true;\r\n        // this.openBestAnim.once('finished', () => {\r\n        //     this.openBestAnim.node.parent.active = false;\r\n        // })\r\n        this.openAnim.play();\r\n        this.openBestAnim.active = true;\r\n        setTimeout(() => {\r\n            this.openBestAnim.active = false;\r\n        }, 1000)\r\n    },\r\n    // update (dt) {},\r\n});"]}