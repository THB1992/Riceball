{"version":3,"sources":["KillNotice.js"],"names":["TEAM_COLOR","require","KillNotice","cc","Class","extends","Component","properties","_time","notices","Node","_curIndex","init","cleanUp","closeKillNotice","update","dt","showKillNotice","killNum","length","active"],"mappings":";;;;;;AAAA;;;;;AAKA,IAAMA,aAAaC,QAAQ,OAAR,EAAiBD,UAApC;;AAEA,IAAME,aAAaC,GAAGC,KAAH,CAAS;AACxBC,aAASF,GAAGG,SADY;;AAGxBC,gBAAY;AACRC,eAAO,CAAC,CADA;AAERC,iBAAS,CAACN,GAAGO,IAAJ,CAFD;AAGRC,mBAAW,CAAC;AAHJ,KAHY;;AASxBC,UAAM,gBAAW,CAChB,CAVuB;;AAYxBC,aAAS,mBAAY;AACjB,aAAKC,eAAL;AACH,KAduB;;AAgBxBC,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAG,KAAKR,KAAL,GAAa,CAAhB,EAAmB;AACf,iBAAKA,KAAL,IAAcQ,EAAd;AACA,gBAAI,KAAKR,KAAL,GAAa,CAAjB,EAAoB;AAChB,qBAAKM,eAAL;AACH;AACJ;AACJ,KAvBuB;;AAyBxBG,oBAAgB,wBAAUC,OAAV,EAAmB;AAC/B,YAAG,KAAKP,SAAL,IAAkB,CAAlB,IAAuB,KAAKA,SAAL,GAAiB,KAAKF,OAAL,CAAaU,MAAxD,EAAgE;AAC5D,iBAAKV,OAAL,CAAa,KAAKE,SAAlB,EAA6BS,MAA7B,GAAsC,KAAtC;AACH;;AAED,aAAKT,SAAL,GAAiBO,UAAU,CAA3B,CAL+B,CAKA;AAC/B,aAAKP,SAAL,GAAiB,KAAKA,SAAL,IAAkB,KAAKF,OAAL,CAAaU,MAA/B,GAAwC,KAAKV,OAAL,CAAaU,MAAb,GAAsB,CAA9D,GAAkE,KAAKR,SAAxF;AACA,YAAG,KAAKA,SAAL,IAAkB,CAAlB,IAAuB,KAAKA,SAAL,GAAiB,KAAKF,OAAL,CAAaU,MAAxD,EAAgE;AAC5D,iBAAKX,KAAL,GAAa,CAAb;AACA,iBAAKC,OAAL,CAAa,KAAKE,SAAlB,EAA6BS,MAA7B,GAAsC,IAAtC;AACH;AACJ,KApCuB;;AAsCxBN,qBAAiB,2BAAY;AACzB,YAAG,KAAKL,OAAL,CAAa,KAAKE,SAAlB,CAAH,EAAiC;AAC7B,iBAAKF,OAAL,CAAa,KAAKE,SAAlB,EAA6BS,MAA7B,GAAsC,KAAtC;AACH;AACJ;;AA1CuB,CAAT,CAAnB","file":"KillNotice.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["/**\n * @fileoverview KillNotice\n * @author meifan@gameley.cn (梅凡)\n */\n\nconst TEAM_COLOR = require('Types').TEAM_COLOR;\n\nconst KillNotice = cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _time: -1,\n        notices: [cc.Node],\n        _curIndex: -2,\n    },\n\n    init: function() {\n    },\n\n    cleanUp: function () {\n        this.closeKillNotice();\n    },\n\n    update: function (dt) {\n        if(this._time > 0) {\n            this._time -= dt;\n            if (this._time < 0) {\n                this.closeKillNotice();\n            }\n        }\n    },\n\n    showKillNotice: function (killNum) {\n        if(this._curIndex >= 0 && this._curIndex < this.notices.length) {\n            this.notices[this._curIndex].active = false;\n        }\n\n        this._curIndex = killNum - 2;  // 从双杀开始\n        this._curIndex = this._curIndex >= this.notices.length ? this.notices.length - 1 : this._curIndex;\n        if(this._curIndex >= 0 && this._curIndex < this.notices.length) {\n            this._time = 2;\n            this.notices[this._curIndex].active = true;\n        }\n    },\n\n    closeKillNotice: function () {\n        if(this.notices[this._curIndex]) {\n            this.notices[this._curIndex].active = false;\n        }\n    }\n\n});"]}