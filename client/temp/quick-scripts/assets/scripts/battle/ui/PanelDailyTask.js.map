{"version":3,"sources":["PanelDailyTask.js"],"names":["UIUtil","require","ConfigData","PlayerData","ShareMgr","ShareType","AdvertMgr","AdverType","Tools","BagItem","ItemType","StageType","cc","Class","extends","Component","properties","itemPool","itemDailyTaskPrefab","Prefab","itemParentNode","Node","zongZiNumNode","zongZiNumLabel","Label","zongziRewardNode","titleNodes","iconNodes","exchangeNodes","hasGetNodes","priceLabels","refreshParentNode","refreshTipsNode","panelMult","nommalLabel","multLabel","panelRefresh","taskName","remainLabel","reaminTipsLabel","goldAdverIcon","goldShareIcon","normalCoinIcon","multipCoinIcon","refreshAdverIcon","refreshShareIcon","activityTimeLabel","bgNode","helpTips","trggleNode","trggleRootNode","trggleNodeWidget","Widget","init","world","callback","setTimeout","onEnable","activityDatas","instance","activityDuanWuDatas","string","getUITipStr","getItem","active","setItem","opacity","isTrggle","loadAdver","MultipDailyTask","hasAdver","openAdver","refresh","tasks","dailyShowTask","maxRewardNum","maxRewardIndex","isFestival","isDuringDuanWuFestival","getCurTime","isGuide","isDuringDailyTaskGuide","stage","getCurStageByPrizeCount","func","Free","Share","Adver","RefreshDailyTask","i","data","console","error","log","JSON","stringify","reward","specialReward","item","createItemWithString","type","num","Math","ceil","goldMultiRate","isComplete","process","param","isGet","arrContains","dailyOldTask","id","completeGuideDailyTask","node","instantiate","parent","y","comp","getComponent","setOnItemClick","setJumpCallback","onStartBtnClick","hasShow","needShowAnim","saveUserData","zongZi","maxCount","clientData","maxRefreshTaskCount","curCount","dayRefreshTaskCount","remainCount","getStringByFormat","canRefresh","height","finalPrice","length","isLate","changeDate","isAfterOtherTime","children","priceArr","latePrice","price","lateReward","items","createItemsWithString","j","HERO_SKIN","isOwnHeroSkin","KNIFE_SKIN","isOwnKnifeSkin","onTrggleClick","onItemClick","event","customEventData","isClick","index","Number","itemComp","MONEY","mult","count","updateGold","showGold","isMore","isLucky","uiMgr","showGetMoneyEffect","addHeroSkin","onEquipHeroSkin","itemData","showReward","addKnifeSkin","onEquipKnifeSkin","ZONG_ZI","updateZongZi","showTips","multCallback","finalReceiveMult","updateDailyOldTask","degree","updateCompleteGuideDailyTask","playRefreshAnim","refreshRedDot","onMultGoldBtnClick","onNormalGoldBtnClick","onPanelMultClose","closeFunc","success","showShare","showAdver","shareType","errFunc","fireBaseEvent","position_id","getAdvertUnitId","share","onPanelRefreshClose","onRefreshBtnClick","refreshCloseFunc","task","getOneDailyTask","rankData","updateDayRefreshTaskCount","onExchangeBtnClick","hasGet","onClose","showBanner"],"mappings":"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","file":"PanelDailyTask.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const UIUtil = require('UIUtil');\r\nconst ConfigData = require('ConfigData');\r\nconst PlayerData = require('PlayerData');\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\nconst Tools = require('Tools');\r\nconst BagItem = require('BagItem');\r\nconst ItemType = require('Types').ItemType;\r\nconst StageType = require('Types').StageType;\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        itemPool: [],\r\n        itemDailyTaskPrefab: cc.Prefab,\r\n        itemParentNode: cc.Node,\r\n\r\n        zongZiNumNode: cc.Node,\r\n        zongZiNumLabel: cc.Label,\r\n        zongziRewardNode: cc.Node,\r\n\r\n        titleNodes: [cc.Node],\r\n\r\n        iconNodes: [cc.Node],\r\n        exchangeNodes: [cc.Node],\r\n        hasGetNodes: [cc.Node],\r\n        priceLabels: [cc.Label],\r\n\r\n        refreshParentNode: cc.Node,\r\n        refreshTipsNode: cc.Node,\r\n\r\n        panelMult: cc.Node,\r\n        nommalLabel: cc.Label,\r\n        multLabel: cc.Label,\r\n\r\n        panelRefresh: cc.Node,\r\n        taskName: cc.Label,\r\n        remainLabel: cc.Label,\r\n        reaminTipsLabel: cc.Label,\r\n\r\n        goldAdverIcon: cc.Node,\r\n        goldShareIcon: cc.Node,\r\n\r\n        normalCoinIcon: [cc.Node],\r\n        multipCoinIcon: [cc.Node],\r\n\r\n        refreshAdverIcon: cc.Node,\r\n        refreshShareIcon: cc.Node,\r\n\r\n        activityTimeLabel: cc.Label,\r\n\r\n        bgNode: cc.Node,\r\n        helpTips: cc.Node,\r\n\r\n        trggleNode: cc.Node,\r\n        trggleRootNode: cc.Node,\r\n        trggleNodeWidget: cc.Widget,\r\n    },\r\n\r\n    init: function (world, callback) {\r\n        this.world = world;\r\n        this.callback = callback;\r\n        setTimeout(() => {\r\n            if (this.trggleNodeWidget) this.trggleNodeWidget.onEnable();\r\n        }, 200);\r\n\r\n\r\n\r\n        this.activityDatas = ConfigData.instance.activityDuanWuDatas;\r\n\r\n        // if (!PlayerData.instance.zongZiToDaoBi) {\r\n        //     var count = PlayerData.instance.zongZi;\r\n        //     if (count > 0) {\r\n        //         this.world.uiMgr.showTips('convert zongZi x' + count + ' => Diamond x' + count)\r\n        //     }\r\n        //     PlayerData.instance.updateZongZiToDaoBi();\r\n        // }\r\n\r\n        //钻石转化\r\n        // if (ConfigData.instance.isAfterDuanWuFestival(PlayerData.instance.getCurTime())) {\r\n        //     var count = PlayerData.instance.zongZi;\r\n        //     if (count > 0) {\r\n        //         var convertCount = count * ConfigData.instance.clientData.zongZiToGold;\r\n        //         this.world.uiMgr.showTips('convert zongZi x' + count + '=> Gold x' + convertCount)\r\n        //         PlayerData.instance.updateGold(convertCount);\r\n        //         PlayerData.instance.updateZongZi(-count);\r\n        //         PlayerData.instance.showGold -= convertCount;\r\n        //         var param = {\r\n        //             count: convertCount,\r\n        //             isMore: true,\r\n        //             isLucky: true,\r\n        //         }\r\n        //         this.world.uiMgr.showGetMoneyEffect(param);\r\n        //     }\r\n        // }\r\n\r\n        this.activityTimeLabel.string = ConfigData.instance.getUITipStr(11);\r\n\r\n        if (!Tools.getItem('showHelpTips')) {\r\n            this.helpTips.active = true;\r\n            Tools.setItem('showHelpTips', 1);\r\n        } else {\r\n            this.helpTips.active = false\r\n        }\r\n\r\n        //勾选\r\n        this.trggleNode.active = true;\r\n        this.trggleRootNode.opacity = 200;\r\n        this.isTrggle = true;\r\n\r\n\r\n        AdvertMgr.instance.loadAdver(AdverType.MultipDailyTask, (hasAdver) => {\r\n            if (hasAdver) {\r\n                AdvertMgr.instance.openAdver(AdverType.MultipDailyTask);\r\n            }\r\n        });\r\n\r\n        this.refresh();\r\n    },\r\n\r\n\r\n    refresh: function () {\r\n        // let tasks = PlayerData.instance.dailyShowTask;\r\n        // if(tasks.length)\r\n        let tasks = PlayerData.instance.dailyShowTask;\r\n\r\n        var maxRewardNum = 0;\r\n        this.maxRewardIndex = 0;\r\n\r\n\r\n        let isFestival = ConfigData.instance.isDuringDuanWuFestival(PlayerData.instance.getCurTime());\r\n        let isGuide = PlayerData.instance.isDuringDailyTaskGuide();\r\n        this.hasAdver = true;\r\n        var stage = ConfigData.instance.getCurStageByPrizeCount(PlayerData.instance);\r\n        var func = (hasAdver) => {\r\n            this.hasAdver = hasAdver;\r\n        }\r\n\r\n        switch (stage) {\r\n            case StageType.Free:\r\n            case StageType.Share:\r\n                func(false);\r\n                break;\r\n            case StageType.Adver:\r\n                AdvertMgr.instance.loadAdver(AdverType.RefreshDailyTask, func);\r\n                break;\r\n        }\r\n        for (let i = 0; i < 3; i++) {\r\n            var data = tasks[i];\r\n            if (!data) {\r\n                console.error('每日任务为空')\r\n                console.log(JSON.stringify(tasks));\r\n                continue;\r\n            }\r\n\r\n\r\n\r\n            var reward = (isFestival && data.specialReward) ? data.specialReward : data.reward;\r\n            var item = BagItem.createItemWithString(reward);\r\n            if (item.type === 0) {\r\n                item.num = Math.ceil(item.num * (1 + data.goldMultiRate));\r\n            }\r\n\r\n            if (item.num > maxRewardNum) {\r\n                maxRewardNum = item.num;\r\n                this.maxRewardIndex = i;\r\n            }\r\n\r\n            var isComplete = data.process >= data.param;\r\n            var isGet = Tools.arrContains(PlayerData.instance.dailyOldTask, data.id) || Tools.arrContains(PlayerData.instance.completeGuideDailyTask, data.id)\r\n            if (this.itemPool[i]) {\r\n                this.itemPool[i].refresh(data, item, isGet, this.isTrggle, this.hasAdver);\r\n            } else {\r\n                var node = cc.instantiate(this.itemDailyTaskPrefab);\r\n                node.parent = this.itemParentNode;\r\n                node.y = -i * 120;\r\n                var comp = node.getComponent('ItemDailyTask');\r\n\r\n                comp.refresh(data, item, isGet, this.isTrggle, this.hasAdver);\r\n                comp.setOnItemClick(this, i);\r\n                comp.setJumpCallback(() => {\r\n                    this.node.active = false;\r\n                    this.world.onStartBtnClick(null,null);\r\n                })\r\n                this.itemPool[i] = comp;\r\n            }\r\n\r\n            if (this.callback && isComplete && !isGet && !data.hasShow) {\r\n                this.itemPool[i].needShowAnim = true;\r\n                data.hasShow = true;\r\n                PlayerData.instance.saveUserData('存储每日任务自动弹出信息');\r\n            }\r\n        }\r\n        //生成三条任务，按钮有更换，前往和领取\r\n\r\n        //三个可以兑换的奖励，根据获取的货币点击兑换\r\n        this.zongZiNumLabel.string = PlayerData.instance.zongZi;\r\n\r\n\r\n        this.titleNodes[0].active = isGuide;\r\n        this.titleNodes[1].active = !this.titleNodes[0].active && isFestival;\r\n        this.titleNodes[2].active = !this.titleNodes[0].active && !this.titleNodes[1].active;\r\n\r\n        this.zongZiNumNode.active = isFestival && !isGuide;\r\n        this.zongziRewardNode.active = isFestival && !isGuide;\r\n        if (this.zongziRewardNode.active) {\r\n            setTimeout(() => {\r\n                if (this.trggleNodeWidget) this.trggleNodeWidget.onEnable();\r\n            }, 200);\r\n        }\r\n\r\n        //剩余刷新次数\r\n        var maxCount = ConfigData.instance.clientData.maxRefreshTaskCount;\r\n        var curCount = PlayerData.instance.dayRefreshTaskCount;\r\n        var remainCount = maxCount - curCount;\r\n        this.remainLabel.string = Tools.getStringByFormat(ConfigData.instance.getUITipStr(19), remainCount, maxCount)\r\n        this.reaminTipsLabel.string = \"Refresh Missions For Free\";\r\n        // this.refreshParentNode.active = !isGuide && (remainCount > 0);\r\n        var canRefresh = true;\r\n        for (let comp of this.itemPool) {\r\n            if (!comp.isGet) {\r\n                canRefresh = false;\r\n                break;\r\n            }\r\n        }\r\n        this.refreshTipsNode.active = !isGuide && (remainCount > 0) && canRefresh;\r\n        // this.refreshTipsNode.active = true\r\n        this.bgNode.height = this.refreshTipsNode.active ? 470 : 420;\r\n        this.zongziRewardNode.y = this.refreshTipsNode.active ? -250 : -200;\r\n        if (this.refreshTipsNode.active) {\r\n            var stage = ConfigData.instance.getCurStageByPrizeCount(PlayerData.instance);\r\n            var func = (hasAdver) => {\r\n                this.refreshAdverIcon.active = hasAdver;\r\n                this.refreshShareIcon.active = !hasAdver;\r\n                if (hasAdver && this.refreshTipsNode.active) {\r\n                    AdvertMgr.instance.openAdver(AdverType.RefreshDailyTask);\r\n                }\r\n            }\r\n\r\n            switch (stage) {\r\n                case StageType.Free:\r\n                case StageType.Share:\r\n                    func(false);\r\n                    break;\r\n                case StageType.Adver:\r\n                    AdvertMgr.instance.loadAdver(AdverType.RefreshDailyTask, func);\r\n                    break;\r\n            }\r\n        }\r\n\r\n        this.finalPrice = [];\r\n        //兑换按钮\r\n        for (let i = 0; i < this.activityDatas.length; i++) {\r\n\r\n            var data = this.activityDatas[i];\r\n            data.isLate = data.changeDate && Tools.isAfterOtherTime(data.changeDate, PlayerData.instance.getCurTime())\r\n            this.iconNodes[i].children[0].active = !data.isLate;\r\n            this.iconNodes[i].children[1].active = data.isLate;\r\n\r\n            var priceArr = data.isLate ? data.latePrice : data.price;\r\n\r\n            this.exchangeNodes[i].active = false;\r\n            var reward = data.isLate ? data.lateReward : data.reward;\r\n            var items = BagItem.createItemsWithString(reward)\r\n\r\n            this.finalPrice[i] = 0;\r\n            for (let j = 0; j < items.length; j++) {\r\n                let item = items[j];\r\n                let price = priceArr[j] ? priceArr[j] : 0;\r\n                switch (item.type) {\r\n                    case ItemType.HERO_SKIN:\r\n                        if (PlayerData.instance.isOwnHeroSkin(item.id)) {\r\n                            price = 0;\r\n                        } else {\r\n                            this.exchangeNodes[i].active = true;\r\n                        }\r\n                        break;\r\n                    case ItemType.KNIFE_SKIN:\r\n                        if (PlayerData.instance.isOwnKnifeSkin(item.id)) {\r\n                            price = 0;\r\n                        } else {\r\n                            this.exchangeNodes[i].active = true;\r\n                        }\r\n                        break;\r\n                }\r\n                this.finalPrice[i] += price;\r\n            }\r\n            this.priceLabels[i].string = this.finalPrice[i];\r\n            this.hasGetNodes[i].active = !this.exchangeNodes[i].active;\r\n        }\r\n\r\n    },\r\n\r\n    //是否翻倍领奖励的勾选\r\n    onTrggleClick: function () {\r\n        this.trggleNode.active = !this.trggleNode.active;\r\n        this.isTrggle = this.trggleNode.active;\r\n        this.trggleRootNode.opacity = this.isTrggle ? 200 : 255;\r\n        this.refresh();\r\n    },\r\n\r\n    //领取按钮点击\r\n    onItemClick: function (event, customEventData) {\r\n        if (this.isClick) return;\r\n        this.isClick = true;\r\n        var index = Number(customEventData);\r\n        var itemComp = this.itemPool[index];\r\n        var data = itemComp.data;\r\n        var item = itemComp.item;\r\n        var isGet = itemComp.isGet;\r\n\r\n        if (isGet) {\r\n            console.log('已领取过该奖励')\r\n            this.isClick = false;\r\n            return;\r\n        }\r\n\r\n\r\n        var callback = null;\r\n        switch (item.type) {\r\n            case ItemType.MONEY:\r\n                callback = (mult = 1) => {\r\n                    var count = item.num * mult;\r\n                    PlayerData.instance.updateGold(count);\r\n                    PlayerData.instance.showGold -= count;\r\n                    var param = {\r\n                        count: count,\r\n                        isMore: mult === 3,\r\n                        isLucky: false,\r\n                    }\r\n                    this.world.uiMgr.showGetMoneyEffect(param);\r\n                }\r\n                break;\r\n            case ItemType.HERO_SKIN:\r\n                if (!PlayerData.instance.isOwnHeroSkin(item.id)) {\r\n                    PlayerData.instance.addHeroSkin(item.id);\r\n                    //装备上\r\n                    this.world.onEquipHeroSkin(item.itemData, true);\r\n                }\r\n                //展示出来\r\n                this.world.uiMgr.showReward(item.itemData);\r\n                break;\r\n            case ItemType.KNIFE_SKIN:\r\n                if (!PlayerData.instance.isOwnKnifeSkin(item.id)) {\r\n                    PlayerData.instance.addKnifeSkin(item.id);\r\n                    this.world.onEquipKnifeSkin(item.itemData, true);\r\n                }\r\n                //展示出来\r\n                this.world.uiMgr.showReward(item.itemData);\r\n                break;\r\n            case ItemType.ZONG_ZI:\r\n                callback = (mult = 1) => {\r\n                    var count = item.num * mult\r\n                    PlayerData.instance.updateZongZi(count);\r\n                    this.world.uiMgr.showTips(Tools.getStringByFormat(ConfigData.instance.getUITipStr(15), count));\r\n                }\r\n                break;\r\n        }\r\n\r\n        this.multCallback = (mult) => {\r\n            if (callback) callback(mult)\r\n            PlayerData.instance.dailyShowTask[index].finalReceiveMult = mult;\r\n            PlayerData.instance.updateDailyOldTask(data.id);\r\n            if (data.degree === -1) {\r\n                PlayerData.instance.updateCompleteGuideDailyTask(data.id);\r\n                if (!PlayerData.instance.isDuringDailyTaskGuide()) {\r\n                    for (let comp of this.itemPool) {\r\n                        comp.playRefreshAnim();\r\n                    }\r\n                }\r\n            }\r\n            this.world.uiMgr.refreshRedDot();\r\n            this.refresh();\r\n            this.isClick = false;\r\n        }\r\n\r\n        if (item.type === ItemType.ZONG_ZI || (callback && index === this.maxRewardIndex && data.degree !== -1)) {\r\n            this.nommalLabel.string = 'x' + item.num;\r\n            this.multLabel.string = 'x' + item.num * 3;\r\n            this.normalCoinIcon[0].active = item.type === ItemType.MONEY;\r\n            this.multipCoinIcon[0].active = item.type === ItemType.MONEY;\r\n\r\n            this.normalCoinIcon[1].active = item.type === ItemType.ZONG_ZI;\r\n            this.multipCoinIcon[1].active = item.type === ItemType.ZONG_ZI;\r\n\r\n            // this.panelMult.active = true;\r\n\r\n            var stage = ConfigData.instance.getCurStageByPrizeCount(PlayerData.instance);\r\n\r\n            var func = (hasAdver) => {\r\n                this.goldAdverIcon.active = hasAdver;\r\n                this.goldShareIcon.active = !hasAdver;\r\n\r\n\r\n                // for (let comp of this.itemPool) {\r\n                //     comp.setIcon(hasAdver);\r\n                // }\r\n                // if (hasAdver) {\r\n                //     AdvertMgr.instance.openAdver(AdverType.MultipDailyTask);\r\n                // }\r\n            }\r\n\r\n            switch (stage) {\r\n                case StageType.Free:\r\n                case StageType.Share:\r\n                    func(false);\r\n                    break;\r\n                case StageType.Adver:\r\n                    AdvertMgr.instance.loadAdver(AdverType.MultipDailyTask, func);\r\n                    break;\r\n            }\r\n\r\n            if (this.isTrggle) {\r\n                this.onMultGoldBtnClick();\r\n            } else {\r\n                this.onNormalGoldBtnClick();\r\n            }\r\n        } else {\r\n            this.multCallback();\r\n        }\r\n        // this.multPanel.init(callback);\r\n    },\r\n\r\n    onPanelMultClose: function () {\r\n        this.isClick = false;\r\n        this.panelMult.active = false;\r\n    },\r\n\r\n    onNormalGoldBtnClick: function () {\r\n        if (this.multCallback) {\r\n            this.multCallback(1);\r\n            this.isClick = false;\r\n        }\r\n    },\r\n\r\n    onMultGoldBtnClick: function () {\r\n        if (this.multCallback) {\r\n            // 关闭广告时回调\r\n            var closeFunc = (success) => {\r\n                if (success) {\r\n                    this.multCallback(3);\r\n                }\r\n                this.isClick = false;\r\n            }\r\n\r\n            if (this.goldShareIcon.active) {\r\n                this.showShare(ShareType.MultipDailyTask, closeFunc)\r\n            } else if (this.goldAdverIcon.active) {\r\n                this.showAdver(AdverType.MultipDailyTask, ShareType.MultipDailyTask, closeFunc)\r\n            } else {\r\n                closeFunc(true);\r\n            }\r\n        }\r\n    },\r\n\r\n    showAdver: function (type, shareType, closeFunc) {\r\n        var errFunc = () => {\r\n            this.showShare(shareType, closeFunc);\r\n        }\r\n\r\n        AdvertMgr.instance.fireBaseEvent(\"click_adv_btn\",position_id,ConfigData.instance.getAdvertUnitId(type));\r\n        AdvertMgr.instance.showAdver(type, closeFunc, errFunc);\r\n    },\r\n\r\n    showShare: function (type, closeFunc) {\r\n        ShareMgr.share(type, closeFunc);\r\n    },\r\n\r\n\r\n\r\n    // onRefreshAllTaskClick: function (event, customEventData) {\r\n    //     if (this.isClickRefresh) return\r\n    //     this.isClickRefresh = true;\r\n\r\n    //     this.refreshCloseFunc = () => {\r\n    //         for (let i = 0; i < 3; i++) {\r\n    //             var data = PlayerData.instance.dailyShowTask[i]\r\n    //             data.process = 0;\r\n    //             var comp = this.itemPool[i];\r\n    //             comp.playRefreshAnim();\r\n    //             var id = data.id;\r\n\r\n    //             PlayerData.instance.updateDailyOldTask(id);\r\n    //             var task = ConfigData.instance.getOneDailyTask(PlayerData.instance.dailyShowTask, PlayerData.instance.dailyOldTask, PlayerData.instance.rankStar);\r\n    //             if (task) {\r\n    //                 task.goldMultiRate = PlayerData.instance.rankData.goldMultiRate;\r\n    //                 PlayerData.instance.dailyShowTask[i] = task;\r\n    //             } else {\r\n    //                 console.error('任务刷光啦')\r\n    //             }\r\n    //         }\r\n    //         PlayerData.instance.updateDayRefreshTaskCount()\r\n    //         this.refresh();\r\n    //         this.world.uiMgr.refreshRedDot();\r\n    //         this.isClickRefresh = false;\r\n    //     }\r\n\r\n    //     this.taskName.string = '是否免费更换所有任务';\r\n    //     this.panelRefresh.active = true;\r\n\r\n    //     // this.showEffect\r\n    // },\r\n\r\n\r\n\r\n\r\n    //暂时不用\r\n    // onRefreshTaskClick: function (event, customEventData) {\r\n    //     if (this.isClickRefresh) return\r\n    //     this.isClickRefresh = true;\r\n    //     var index = Number(customEventData);\r\n    //     var data = PlayerData.instance.dailyShowTask[index]\r\n    //     var comp = this.itemPool[index];\r\n    //     this.refreshCloseFunc = () => {\r\n    //         comp.playRefreshAnim();\r\n    //         var id = data.id;\r\n    //         data.process = 0;\r\n    //         PlayerData.instance.updateDayRefreshTaskCount()\r\n    //         PlayerData.instance.updateDailyOldTask(id);\r\n    //         var task = ConfigData.instance.getOneDailyTask(PlayerData.instance.dailyShowTask, PlayerData.instance.dailyOldTask, PlayerData.instance.rankStar);\r\n\r\n    //         if (task) {\r\n    //             task.goldMultiRate = PlayerData.instance.rankData.goldMultiRate;\r\n    //             PlayerData.instance.dailyShowTask[index] = task;\r\n    //             PlayerData.instance.saveUserData();\r\n    //         } else {\r\n    //             console.error('任务刷光啦')\r\n    //         }\r\n    //         this.refresh();\r\n    //         this.world.uiMgr.refreshRedDot();\r\n    //         this.isClickRefresh = false;\r\n    //     }\r\n\r\n\r\n    //     this.taskName.string = '是否免费更换任务：' + data.name;\r\n\r\n    //     this.panelRefresh.active = true;\r\n    //     var stage = ConfigData.instance.getCurStageByPrizeCount(PlayerData.instance);\r\n    //     var func = (hasAdver) => {\r\n    //         this.refreshAdverIcon.active = hasAdver;\r\n    //         this.refreshShareIcon.active = !hasAdver;\r\n    //         if (hasAdver) {\r\n    //             AdvertMgr.instance.openAdver(AdverType.RefreshDailyTask);\r\n    //         }\r\n    //     }\r\n\r\n    //     switch (stage) {\r\n    //         case StageType.Free:\r\n    //         case StageType.Share:\r\n    //             func(false);\r\n    //             break;\r\n    //         case StageType.Adver:\r\n    //             AdvertMgr.instance.loadAdver(AdverType.RefreshDailyTask, func);\r\n    //             break;\r\n    //     }\r\n    //     // this.showEffect\r\n    // },\r\n\r\n    onPanelRefreshClose: function () {\r\n        this.panelRefresh.active = false;\r\n        // this.isClickRefresh = false;\r\n    },\r\n\r\n    onRefreshBtnClick: function () {\r\n        // if (this.isClickRefresh) return\r\n        // this.isClickRefresh = true;\r\n\r\n        this.refreshCloseFunc = () => {\r\n            for (let i = 0; i < 3; i++) {\r\n                var data = PlayerData.instance.dailyShowTask[i];\r\n                data.process = 0;\r\n                var comp = this.itemPool[i];\r\n                comp.playRefreshAnim();\r\n                var id = data.id;\r\n\r\n                PlayerData.instance.updateDailyOldTask(id);\r\n                var task = ConfigData.instance.getOneDailyTask(PlayerData.instance, i);\r\n                if (task) {\r\n                    task.goldMultiRate = PlayerData.instance.rankData.goldMultiRate;\r\n                    PlayerData.instance.dailyShowTask[i] = task;\r\n                } else {\r\n                    console.error('Null task')\r\n                }\r\n            }\r\n            PlayerData.instance.updateDayRefreshTaskCount()\r\n            this.refresh();\r\n            this.world.uiMgr.refreshRedDot();\r\n            // this.isClickRefresh = false;\r\n        }\r\n\r\n\r\n\r\n\r\n        // 关闭广告时回调\r\n        var closeFunc = (success) => {\r\n            if (success) {\r\n                this.onPanelRefreshClose();\r\n                this.refreshCloseFunc();\r\n            }\r\n        }\r\n\r\n        if (this.refreshShareIcon.active) {\r\n            this.showShare(ShareType.RefreshDailyTask, closeFunc)\r\n        } else if (this.refreshAdverIcon.active) {\r\n            this.showAdver(AdverType.RefreshDailyTask, ShareType.RefreshDailyTask, closeFunc)\r\n        } else {\r\n            closeFunc(true);\r\n        }\r\n\r\n    },\r\n\r\n    onExchangeBtnClick: function (event, customEventData) {\r\n        var index = Number(customEventData);\r\n        var data = this.activityDatas[index];\r\n        if (PlayerData.instance.zongZi < this.finalPrice[index]) {\r\n            this.world.uiMgr.showTips('Insufficient Diamond');\r\n            return\r\n        }\r\n\r\n        var reward = data.isLate ? data.lateReward : data.reward;\r\n        var items = BagItem.createItemsWithString(reward)\r\n        for (let item of items) {\r\n            switch (item.type) {\r\n                case ItemType.MONEY:\r\n                    var count = item.num;\r\n                    PlayerData.instance.updateGold(count);\r\n                    PlayerData.instance.showGold -= count;\r\n                    var param = {\r\n                        count: count,\r\n                        isMore: false,\r\n                        isLucky: false,\r\n                    }\r\n                    this.world.uiMgr.showGetMoneyEffect(param);\r\n                    this.world.uiMgr.showTips(Tools.getStringByFormat(ConfigData.instance.getUITipStr(16), count));\r\n                    break;\r\n                case ItemType.HERO_SKIN:\r\n                    if (PlayerData.instance.isOwnHeroSkin(item.id)) {\r\n                        // this.world.uiMgr.showTips('已经拥有，无需兑换');\r\n                        // return;\r\n                        item.hasGet = true;\r\n                        this.world.onEquipHeroSkin(item.itemData, true);\r\n                    } else {\r\n                        PlayerData.instance.addHeroSkin(item.id);\r\n                        //装备上\r\n                        this.world.onEquipHeroSkin(item.itemData, true);\r\n                    }\r\n                    break;\r\n                case ItemType.KNIFE_SKIN:\r\n                    if (PlayerData.instance.isOwnKnifeSkin(item.id)) {\r\n                        // this.world.uiMgr.showTips('已经拥有，无需兑换');\r\n                        // return;、\r\n                        item.hasGet = true;\r\n                        this.world.onEquipKnifeSkin(item.itemData, true);\r\n                    } else {\r\n                        PlayerData.instance.addKnifeSkin(item.id);\r\n                        this.world.onEquipKnifeSkin(item.itemData, true);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n        if (items.length === 2) {\r\n            if (items[0].hasGet) {\r\n                this.world.uiMgr.showReward(items[1].itemData);\r\n            } else if (items[1].hasGet) {\r\n                this.world.uiMgr.showReward(items[0].itemData);\r\n            } else {\r\n                this.world.uiMgr.showReward(items[0].itemData, () => {\r\n                    this.world.uiMgr.showReward(items[1].itemData);\r\n                });\r\n            }\r\n        } else if (items[0].type === ItemType.KNIFE_SKIN || items[0].type === ItemType.HERO_SKIN) {\r\n            this.world.uiMgr.showReward(items[0].itemData);\r\n        }\r\n\r\n\r\n        PlayerData.instance.updateZongZi(-this.finalPrice[index]);\r\n        this.refresh();\r\n    },\r\n\r\n\r\n\r\n    onClose() {\r\n        this.node.active = false;\r\n        if (this.callback) this.callback();\r\n        AdvertMgr.instance.showBanner();\r\n        console.log(\"showBanner onPanelDaliyTask close \")\r\n    },\r\n});"]}