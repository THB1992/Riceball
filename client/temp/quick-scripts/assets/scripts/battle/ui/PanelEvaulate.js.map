{"version":3,"sources":["PanelEvaulate.js"],"names":["GameData","require","PlatformMgr","PlayerData","cc","Class","extends","Component","properties","bgNode","Node","starNode","btnBgNode","blackBtnBgNode","init","callback","world","stars","children","i","length","active","height","instance","screenHeight","AdvertMgr","fireBaseEvent","onClick","event","data","count","Number","parseInt","onRate","openStoreComment","uiMgr","showTips","onClose","endEvaulateCount","node"],"mappings":";;;;;;AAAA,IAAMA,WAAWC,QAAQ,UAAR,CAAjB;AACA,IAAMC,cAAcD,QAAQ,aAAR,CAApB;AACA,IAAME,aAAaF,QAAQ,YAAR,CAAnB;;AAEAG,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,gBAAQL,GAAGM,IADH;AAERC,kBAAUP,GAAGM,IAFL;AAGRE,mBAAWR,GAAGM,IAHN;AAIRG,wBAAgBT,GAAGM;AAJX,KAHP;;AAUL;;AAEA;;AAEAI,QAdK,gBAcAC,QAdA,EAcUC,KAdV,EAciB;AAClB,aAAKD,QAAL,GAAgBA,QAAhB;AACA,aAAKC,KAAL,GAAaA,KAAb;AACA,aAAKC,KAAL,GAAa,KAAKN,QAAL,CAAcO,QAA3B;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKF,KAAL,CAAWG,MAA/B,EAAuCD,GAAvC,EAA4C;AACxC,iBAAKF,KAAL,CAAWE,CAAX,EAAcE,MAAd,GAAuB,KAAvB;AACH;AACD,aAAKT,SAAL,CAAeS,MAAf,GAAwB,KAAxB;AACA,aAAKR,cAAL,CAAoBQ,MAApB,GAA6B,IAA7B;AACA,aAAKZ,MAAL,CAAYa,MAAZ,GAAqBtB,SAASuB,QAAT,CAAkBC,YAAvC;;AAEA;AACAC,kBAAUF,QAAV,CAAmBG,aAAnB,CAAiC,kBAAjC;AACH,KA3BI;AA8BLC,WA9BK,mBA8BGC,KA9BH,EA8BUC,IA9BV,EA8BgB;AACjB,YAAIC,QAAQC,OAAOC,QAAP,CAAgBH,IAAhB,CAAZ;AACA,aAAK,IAAIV,IAAI,CAAb,EAAgBA,IAAI,KAAKF,KAAL,CAAWG,MAA/B,EAAuCD,GAAvC,EAA4C;AACxC,iBAAKF,KAAL,CAAWE,CAAX,EAAcE,MAAd,GAAuBF,IAAIW,KAA3B;AACH;AACD,aAAKA,KAAL,GAAaA,KAAb;AACA,aAAKlB,SAAL,CAAeS,MAAf,GAAwB,IAAxB;AACA,aAAKR,cAAL,CAAoBQ,MAApB,GAA6B,KAA7B;;AAEA;AACAI,kBAAUF,QAAV,CAAmBG,aAAnB,CAAiC,cAAjC,EAAgD,OAAhD,EAAwDI,KAAxD;AACH,KAzCI;AA2CLG,UA3CK,oBA2CI;AACL,YAAI,KAAKH,KAAL,KAAe,CAAnB,EAAsB;AAClB5B,wBAAYgC,gBAAZ;AACH,SAFD,MAEO;AACH,iBAAKlB,KAAL,CAAWmB,KAAX,CAAiBC,QAAjB,CAA0B,gBAA1B;AACH;AACD,aAAKC,OAAL;AACAlC,mBAAWoB,QAAX,CAAoBe,gBAApB;AACH,KAnDI;AAqDLD,WArDK,qBAqDK;AACN,aAAKE,IAAL,CAAUlB,MAAV,GAAmB,KAAnB;AACA,YAAG,KAAKN,QAAR,EAAiB,KAAKA,QAAL;AACpB;AACD;;AAzDK,CAAT","file":"PanelEvaulate.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const GameData = require('GameData');\r\nconst PlatformMgr = require('PlatformMgr');\r\nconst PlayerData = require('PlayerData');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        bgNode: cc.Node,\r\n        starNode: cc.Node,\r\n        btnBgNode: cc.Node,\r\n        blackBtnBgNode: cc.Node,\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    init(callback, world) {\r\n        this.callback = callback;\r\n        this.world = world;\r\n        this.stars = this.starNode.children;\r\n        for (let i = 0; i < this.stars.length; i++) {\r\n            this.stars[i].active = false;\r\n        }\r\n        this.btnBgNode.active = false;\r\n        this.blackBtnBgNode.active = true;\r\n        this.bgNode.height = GameData.instance.screenHeight;\r\n\r\n        //评分界面展示\r\n        AdvertMgr.instance.fireBaseEvent(\"page_show_rating\");\r\n    },\r\n\r\n\r\n    onClick(event, data) {\r\n        var count = Number.parseInt(data);\r\n        for (let i = 0; i < this.stars.length; i++) {\r\n            this.stars[i].active = i < count;\r\n        }\r\n        this.count = count;\r\n        this.btnBgNode.active = true;\r\n        this.blackBtnBgNode.active = false;\r\n\r\n        //用户点击输入评分\r\n        AdvertMgr.instance.fireBaseEvent(\"click_rating\",\"stars\",count);\r\n    },\r\n\r\n    onRate() {\r\n        if (this.count === 5) {\r\n            PlatformMgr.openStoreComment();\r\n        } else {\r\n            this.world.uiMgr.showTips('Rating success')\r\n        }\r\n        this.onClose();\r\n        PlayerData.instance.endEvaulateCount();\r\n    },\r\n\r\n    onClose() {\r\n        this.node.active = false;\r\n        if(this.callback)this.callback();\r\n    }\r\n    // update (dt) {},\r\n});"]}