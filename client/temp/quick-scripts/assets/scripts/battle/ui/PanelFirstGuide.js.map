{"version":3,"sources":["PanelFirstGuide.js"],"names":["ConfigData","require","PanelFristGuides","cc","Class","extends","Component","properties","itemGuidePrefab","Prefab","guideContent","Node","startNode","endNode","startLabel","Label","endLabel","startAnim","Animation","endAnim","specialNode","specialLabel","processLabel","start","itemPool","guideData","instance","i","itemNode","instantiate","active","parent","x","y","itemComp","getComponent","tipsLabel","string","startTips","specialTime","canShowSpecial","refreshGuideProcess","str","showGuideStart","state","node","play","setTimeout","item","width","length","action","moveBy","v2","easing","easeBackInOut","runAction","showEffect","showGuideSpecial","specialTips","showGuideEnd","endTips","checkEffect","checkNode","update","dt"],"mappings":"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","file":"PanelFirstGuide.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const ConfigData = require('ConfigData');\r\n\r\nconst PanelFristGuides = cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        itemGuidePrefab: cc.Prefab,\r\n        guideContent: cc.Node,\r\n        startNode: cc.Node,\r\n        endNode: cc.Node,\r\n        startLabel: cc.Label,\r\n        endLabel: cc.Label,\r\n        startAnim: cc.Animation,\r\n        endAnim: cc.Animation,\r\n        specialNode: cc.Node,\r\n        specialLabel: cc.Label,\r\n        processLabel: cc.Label,\r\n    },\r\n\r\n    start: function () {\r\n        this.itemPool = []\r\n        this.guideData = ConfigData.instance.guideData;\r\n        for (let i = 0; i < 4; i++) {\r\n            let itemNode = cc.instantiate(this.itemGuidePrefab);\r\n            itemNode.active = false;\r\n            itemNode.parent = this.guideContent;\r\n            itemNode.x = -300;\r\n            itemNode.y = i * -55;\r\n\r\n            let itemComp = itemNode.getComponent('ItemGuide');\r\n            itemComp.tipsLabel.string = this.guideData.startTips[i];\r\n            this.itemPool[i] = itemComp;\r\n        }\r\n        this.specialTime = 0;\r\n        this.canShowSpecial = false;\r\n\r\n\r\n    },\r\n\r\n    refreshGuideProcess: function (str) {\r\n        this.processLabel.string = str;\r\n    },\r\n\r\n    showGuideStart: function (state) {\r\n        if (state > 3) {\r\n            this.node.active = false;\r\n            return;\r\n        }\r\n\r\n        this.endNode.active = false;\r\n        this.startAnim.node.active = true;\r\n        this.startAnim.play();\r\n        setTimeout(() => {\r\n            this.startNode.active = true;\r\n        }, 300)\r\n        setTimeout(() => {\r\n            if (this.startNode.active) {\r\n                this.startNode.active = false;\r\n                this.canShowSpecial = true;\r\n                if (state === 0) {\r\n                    this.processLabel.node.active = true;\r\n                }\r\n            }\r\n        }, 2000)\r\n        var item = this.itemPool[state];\r\n        this.startLabel.string = \"新任务：\" + item.tipsLabel.string;\r\n        this.startNode.width = this.startLabel.string.length * 40 + 100;\r\n\r\n        item.node.active = true;\r\n\r\n        var action = cc.moveBy(0.3, cc.v2(300, 0)).easing(cc.easeBackInOut());\r\n        item.node.runAction(action);\r\n\r\n        item.showEffect.node.active = true;\r\n    },\r\n\r\n    showGuideSpecial: function (state) {\r\n        if (this.canShowSpecial) {\r\n            this.specialNode.active = true;\r\n            this.specialLabel.string = this.guideData.specialTips[state];\r\n            this.specialNode.width = this.specialLabel.string.length * 40 + 200;\r\n            this.specialTime = 2;\r\n        }\r\n    },\r\n\r\n    showGuideEnd: function (state) {\r\n        if (state === 0) {\r\n            this.processLabel.node.active = false;\r\n        }\r\n        this.startNode.active = false;\r\n        this.canShowSpecial = false;\r\n        this.specialNode.active = false;\r\n        this.specialTime = 0;\r\n        this.endLabel.string = this.guideData.endTips[state];\r\n        this.endNode.width = this.endLabel.string.length * 40 + 200;\r\n        this.endAnim.node.active = true;\r\n        this.endAnim.play();\r\n        setTimeout(() => {\r\n            this.endNode.active = true;\r\n        }, 200)\r\n\r\n        var item = this.itemPool[state]\r\n        item.checkEffect.node.active = true;\r\n        setTimeout(() => {\r\n            item.checkNode.active = true;\r\n        }, 100);\r\n\r\n    },\r\n\r\n    update(dt) {\r\n        if (this.canShowSpecial && this.specialTime > 0) {\r\n            this.specialTime -= dt;\r\n            if (this.specialTime <= 0) {\r\n                this.specialNode.active = false;\r\n            }\r\n        }\r\n    },\r\n});"]}