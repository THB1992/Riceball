{"version":3,"sources":["PanelGetSkin.js"],"names":["ConfigData","require","AdvertMgr","AdverType","PlayerData","TaskType","cc","Class","extends","Component","properties","propertyLabel","Label","tipsLabel","processLabel","init","data","callback","errCallback","refresh","string","instance","openAdver","WatchAdver","process","getTaskProcess","ADVERCOUNT","taskParam","onCloseBtnClick","node","active","onWathAdverBtnClick","self","closeFunc","success","errFunc","fireBaseEvent","getAdvertUnitId","AddKnife","showAdver"],"mappings":";;;;;;AAAA;AACA,IAAMA,aAAaC,QAAQ,YAAR,CAAnB;AACA,IAAMC,YAAYD,QAAQ,WAAR,CAAlB;AACA,IAAME,YAAYF,QAAQ,OAAR,EAAiBE,SAAnC;AACA,IAAMC,aAAaH,QAAQ,YAAR,CAAnB;AACA,IAAMI,WAAWJ,QAAQ,OAAR,EAAiBI,QAAlC;;AAGAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,uBAAeL,GAAGM,KADV;AAERC,mBAAWP,GAAGM,KAFN;AAGRE,sBAAcR,GAAGM;AAHT,KAHP;;AASLG,UAAM,cAAUC,IAAV,EAAgBC,QAAhB,EAA0BC,WAA1B,EAAuC;AACzC,aAAKF,IAAL,GAAYA,IAAZ;AACA,aAAKC,QAAL,GAAgBA,QAAhB;AACA,aAAKC,WAAL,GAAmBA,WAAnB;AACA;AACA,aAAKC,OAAL;AACA,aAAKN,SAAL,CAAeO,MAAf,GAAwB,oBAAxB;AACA;AACAlB,kBAAUmB,QAAV,CAAmBC,SAAnB,CAA6BnB,UAAUoB,UAAvC;AACH,KAlBI;;AAoBLJ,aAAS,mBAAY;AACjB,YAAIK,UAAUpB,WAAWiB,QAAX,CAAoBI,cAApB,CAAmCpB,SAASqB,UAA5C,CAAd;AACA,YAAIF,UAAU,KAAKR,IAAL,CAAUW,SAAxB,EAAmCH,UAAU,KAAKR,IAAL,CAAUW,SAApB;AACnC,aAAKb,YAAL,CAAkBM,MAAlB,GAA2BI,UAAU,GAAV,GAAgB,KAAKR,IAAL,CAAUW,SAArD;AACH,KAxBI;;AA0BLC,qBAAiB,2BAAY;AACzB,aAAKC,IAAL,CAAUC,MAAV,GAAmB,KAAnB;AACA;AACH,KA7BI;;AA+BL;AACAC,yBAAqB,+BAAY;AAC7B,YAAIC,OAAO,IAAX;AACA;AACA,YAAIC,YAAY,SAAZA,SAAY,CAAUC,OAAV,EAAmB;AAC/B,gBAAIA,OAAJ,EAAa;AACTF,qBAAKb,OAAL;AACA,oBAAIa,KAAKf,QAAT,EAAmBe,KAAKf,QAAL,CAAc,IAAd;AACtB;AACJ,SALD;AAMA;AACA,YAAIkB,UAAU,SAAVA,OAAU,GAAY;AACtB,gBAAIH,KAAKd,WAAT,EAAsBc,KAAKd,WAAL;AACzB,SAFD;AAGAhB,kBAAUmB,QAAV,CAAmBe,aAAnB,CAAiC,eAAjC,EAAiD,aAAjD,EAA+DpC,WAAWqB,QAAX,CAAoBgB,eAApB,CAAoClC,UAAUmC,QAA9C,CAA/D;AACApC,kBAAUmB,QAAV,CAAmBkB,SAAnB,CAA6BpC,UAAUoB,UAAvC,EAAmDU,SAAnD,EAA8DE,OAA9D;AAEH;AAhDI,CAAT","file":"PanelGetSkin.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["//看视频得皮肤界面\r\nconst ConfigData = require('ConfigData');\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\nconst PlayerData = require('PlayerData');\r\nconst TaskType = require('Types').TaskType;\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        propertyLabel: cc.Label,\r\n        tipsLabel: cc.Label,\r\n        processLabel: cc.Label,\r\n    },\r\n\r\n    init: function (data, callback, errCallback) {\r\n        this.data = data;\r\n        this.callback = callback;\r\n        this.errCallback = errCallback;\r\n        // this.propertyLabel.string = data.propertyTips ? data.propertyTips : '';\r\n        this.refresh();\r\n        this.tipsLabel.string = 'Watch ads 30 times';\r\n        // AdvertMgr.instance.showBanner();\r\n        AdvertMgr.instance.openAdver(AdverType.WatchAdver);\r\n    },\r\n\r\n    refresh: function () {\r\n        var process = PlayerData.instance.getTaskProcess(TaskType.ADVERCOUNT);\r\n        if (process > this.data.taskParam) process = this.data.taskParam;\r\n        this.processLabel.string = process + '/' + this.data.taskParam;\r\n    },\r\n\r\n    onCloseBtnClick: function () {\r\n        this.node.active = false;\r\n        // AdvertMgr.instance.destoryBanner();\r\n    },\r\n\r\n    //累计看广告按钮\r\n    onWathAdverBtnClick: function () {\r\n        var self = this;\r\n        // 关闭广告时回调\r\n        var closeFunc = function (success) {\r\n            if (success) {\r\n                self.refresh();\r\n                if (self.callback) self.callback(true)\r\n            }\r\n        }\r\n        // 打开广告失败时回调,失败回调\r\n        var errFunc = function () {\r\n            if (self.errCallback) self.errCallback();\r\n        }   \r\n        AdvertMgr.instance.fireBaseEvent(\"click_adv_btn\",\"position_id\",ConfigData.instance.getAdvertUnitId(AdverType.AddKnife));\r\n        AdvertMgr.instance.showAdver(AdverType.WatchAdver, closeFunc, errFunc);\r\n\r\n    },\r\n});"]}