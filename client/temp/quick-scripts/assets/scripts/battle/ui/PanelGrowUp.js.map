{"version":3,"sources":["PanelGrowUp.js"],"names":["PlayerData","require","GrowType","ConfigData","Tools","ShareMgr","ShareType","AdvertMgr","AdverType","cc","Class","extends","Component","properties","growNode","Node","bgNode","checkNode","closeNode","iconNode","arrowNode","priceNode","adverNode","lockCheckNode","lockCloseNode","lockNode","unlockBtnAnimNode","unlockInfoAnim","Animation","rootNode","tipsLabel","Label","nameLabel","levelLabel","paramLabel","priceLabel","getGoldNode","getGoldLabel","getGoldAdverIcon","getGoldShareIcon","levelUpByGoldNode","levelUpByAdverNode","downNodeAni","lockTips","lockTipsLabel","unlockInfoNode","lockArr","unlockTipsNode","unlockTipsIconNode","unlockTipsLabelNode","init","world","stage","instance","getCurGrowStage","playCount","clientData","growLimit","showUnlockGrow","showCallFunc","callback","showAnim","checkNodes","children","closeNodes","iconNodes","lockCheckNodes","lockCloseNodes","lockNodes","arrowNodes","animNodes","growDatas","i","length","node","data","levelData","getGrowLevelDataByType","gold","price","arrContains","id","maxLevel","active","onBtnClick","stopAdverToShare","arr","finalArr","index","setTimeout","anim","getComponent","once","play","string","name","event","isAni","type","Number","y","scale","opacity","refreshShowData","curType","showTips","getGoldStr","color","Color","RED","fromHEX","setNodeColor","tips","x","curData","param","growBtnClick","onLevelUpByAdverBtnClick","onGrowUp","updateGold","uiMgr","canShowGold","dayGetGoldCount","rankData","growGoldLevelData","Gold","growGoldParam","realGoldParam","rate","goldMultiRate","getGoldcount","Math","ceil","getItemOrFinalItem","getGold","self","closeFunc","success","saveUserData","errFunc","showShare","showAdver","GrowNode","share","closeGoldNode","onGetGoldBtnClick","showGold","count","isMore","isLucky","showGetMoneyEffect","NotEnoughMoney","updateGrowLevel","Attack","localPlayer","changeAttackPower","realParam","Defence","changeDefencePower","Speed","changeGrowSpeedAddition","refreshOfflineGoldData"],"mappings":"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","file":"PanelGrowUp.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const PlayerData = require('PlayerData');\r\nconst GrowType = require('Types').GrowType;\r\nconst ConfigData = require('ConfigData');\r\nconst Tools = require('Tools');\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\n\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        growNode: cc.Node,\r\n        bgNode: cc.Node,\r\n        checkNode: cc.Node,\r\n        closeNode: cc.Node,\r\n        iconNode: cc.Node,\r\n        arrowNode: cc.Node,\r\n        priceNode: cc.Node,\r\n        adverNode: cc.Node,\r\n\r\n        lockCheckNode: cc.Node,\r\n        lockCloseNode: cc.Node,\r\n        lockNode: cc.Node,\r\n\r\n        unlockBtnAnimNode: cc.Node,\r\n        unlockInfoAnim: cc.Animation,\r\n\r\n        rootNode: cc.Node,\r\n        tipsLabel: cc.Label,\r\n        nameLabel: cc.Label,\r\n        levelLabel: cc.Label,\r\n        paramLabel: cc.Label,\r\n        priceLabel: cc.Label,\r\n\r\n        getGoldNode: cc.Node,\r\n        getGoldLabel: cc.Label,\r\n        getGoldAdverIcon: cc.Node,\r\n        getGoldShareIcon: cc.Node,\r\n\r\n        levelUpByGoldNode: cc.Node,\r\n        levelUpByAdverNode: cc.Node,\r\n\r\n        downNodeAni: cc.Animation,\r\n\r\n        lockTips: cc.Node,\r\n        lockTipsLabel: cc.Label,\r\n        unlockInfoNode: cc.Node,\r\n        lockArr: [],\r\n\r\n        unlockTipsNode: cc.Node,\r\n        unlockTipsIconNode: cc.Node,\r\n        unlockTipsLabelNode: cc.Node,\r\n    },\r\n\r\n    init: function (world) {\r\n\r\n        //解锁相关\r\n        var stage = ConfigData.instance.getCurGrowStage(PlayerData.instance.playCount, ConfigData.instance.clientData.growLimit);\r\n\r\n        switch (stage) {\r\n            case 0:\r\n                this.lockArr = [0, 1, 2, 3];\r\n                break;\r\n            case 1:\r\n                this.lockArr = [0, 1];\r\n                break;\r\n            case 2:\r\n                this.lockArr = [];\r\n                break;\r\n        }\r\n        switch (PlayerData.instance.showUnlockGrow) {\r\n            case 1:\r\n                this.lockArr = [0, 1, 2, 3];\r\n                this.showCallFunc = (callback) => {\r\n                    this.showAnim([2, 3], [0, 1], callback);\r\n                }\r\n                break;\r\n            case 2:\r\n                this.lockArr = [0, 1];\r\n                this.showCallFunc = (callback) => {\r\n                    this.showAnim([0, 1], [], callback);\r\n                }\r\n                break;\r\n        }\r\n        PlayerData.instance.showUnlockGrow = 0;\r\n\r\n\r\n\r\n        //ui\r\n        this.world = world;\r\n        this.checkNodes = this.checkNode.children;\r\n        this.closeNodes = this.closeNode.children;\r\n        this.iconNodes = this.iconNode.children;\r\n\r\n\r\n        this.lockCheckNodes = this.lockCheckNode.children;\r\n        this.lockCloseNodes = this.lockCloseNode.children;\r\n        this.lockNodes = this.lockNode.children;\r\n\r\n        this.arrowNodes = this.arrowNode.children;\r\n        this.animNodes = this.unlockBtnAnimNode.children;\r\n\r\n\r\n        this.growDatas = ConfigData.instance.growDatas;\r\n        for (let i = 0; i < this.arrowNodes.length; i++) {\r\n            var node = this.arrowNodes[i];\r\n            var data = this.growDatas[i];\r\n            var levelData = PlayerData.instance.getGrowLevelDataByType(i);\r\n            if (PlayerData.instance.gold >= levelData.price && !Tools.arrContains(this.lockArr, i) && levelData.id !== data.maxLevel) {\r\n                node.active = true;\r\n            } else {\r\n                node.active = false;\r\n            }\r\n        }\r\n\r\n\r\n\r\n        this.onBtnClick(null, 2, false);\r\n\r\n\r\n        // var height = (GameData.instance.screenHeight - 1280) / 2;\r\n        // var offset = height > 40 ? height - 40 : 0;\r\n        // this.growNode.y = -offset;\r\n        // this.bgNode.height = 226 + (offset < 30 ? offset : offset - 30);\r\n        this.getGoldAdverIcon.active = ConfigData.instance.clientData.stopAdverToShare;\r\n        this.getGoldShareIcon.active = !this.getGoldAdverIcon.active;\r\n    },\r\n\r\n    showAnim: function (arr, finalArr, callback) {\r\n\r\n        var i = 0;\r\n        for (let index of arr) {\r\n            if (index === 2) {\r\n                this.checkNodes[index].active = false;\r\n                this.lockCheckNodes[index].active = true;\r\n\r\n                this.unlockInfoNode.active = false;\r\n                this.lockTips.active = true\r\n            } else {\r\n                this.closeNodes[index].active = false;\r\n                this.lockCloseNodes[index].active = true;\r\n            }\r\n\r\n\r\n            setTimeout(() => {\r\n                this.animNodes[index].active = true;\r\n                var anim = this.animNodes[index].children[0].getComponent(cc.Animation);\r\n                anim.once('finished', () => {\r\n                    this.animNodes[index].active = false;\r\n                    var levelData = PlayerData.instance.getGrowLevelDataByType(index);\r\n                    \r\n                    if (PlayerData.instance.gold >= levelData.price) {\r\n                        this.arrowNodes[index].active = true;\r\n                    }\r\n\r\n                    if (index === 1 || index === 3) {\r\n                        this.lockArr = finalArr;\r\n                        this.onBtnClick(null, 2, false);\r\n                        if (callback) callback();\r\n                    } else if (index === 2) {\r\n                        this.unlockInfoAnim.node.active = true;\r\n                        this.unlockInfoAnim.play();\r\n                        this.unlockInfoAnim.once('finished', () => {\r\n                            this.unlockInfoAnim.node.active = false;\r\n                        });\r\n                    }\r\n                })\r\n                anim.play();\r\n            }, 1200)\r\n\r\n\r\n\r\n            //tips\r\n            this.unlockTipsIconNode.children[i].children[index].active = true;\r\n            this.unlockTipsLabelNode.children[i].getComponent(cc.Label).string = this.growDatas[index].name;\r\n\r\n            i++;\r\n        }\r\n        this.unlockTipsNode.active = true;\r\n    },\r\n\r\n    onBtnClick: function (event, data, isAni = true) {\r\n        var type = Number(data)\r\n        for (let i = 0; i < this.checkNodes.length; i++) {\r\n            if (i === type) {\r\n                //选中\r\n                if (!this.checkNodes[i].active && !Tools.arrContains(this.lockArr, i)) this.checkNodes[i].active = true;\r\n                if (this.closeNodes[i].active) this.closeNodes[i].active = false;\r\n                if (!this.lockCheckNodes[i].active) this.lockCheckNodes[i].active = true;\r\n                if (this.lockCloseNodes[i].active) this.lockCloseNodes[i].active = false;\r\n                if (this.lockNodes[i].y !== 0) this.lockNodes[i].y = 0;\r\n\r\n                if (this.iconNodes[i].scale !== 1) this.iconNodes[i].scale = 1;\r\n                if (this.iconNodes[i].y !== 0) this.iconNodes[i].y = 0;\r\n                if (this.iconNodes[i].opacity !== 255) this.iconNodes[i].opacity = 255;\r\n            } else {\r\n                if (this.checkNodes[i].active) this.checkNodes[i].active = false;\r\n                if (!this.closeNodes[i].active && !Tools.arrContains(this.lockArr, i)) this.closeNodes[i].active = true;\r\n                if (this.lockCheckNodes[i].active) this.lockCheckNodes[i].active = false;\r\n                if (!this.lockCloseNodes[i].active) this.lockCloseNodes[i].active = true;\r\n                if (this.lockNodes[i].y !== -22) this.lockNodes[i].y = -22;\r\n\r\n                if (this.iconNodes[i].scale !== 0.7) this.iconNodes[i].scale = 0.7;\r\n                if (this.iconNodes[i].y !== -16) this.iconNodes[i].y = -16;\r\n                if (this.iconNodes[i].opacity !== 155) this.iconNodes[i].opacity = 155;\r\n            }\r\n        }\r\n\r\n        this.refreshShowData(type, isAni);\r\n    },\r\n\r\n    refreshShowData: function (type, isAni = true) {\r\n        this.curType = type;\r\n        var data = this.growDatas[type];\r\n        var levelData = PlayerData.instance.getGrowLevelDataByType(type);\r\n        this.nameLabel.string = data.name;\r\n        this.levelLabel.string = 'Lv' + levelData.id;\r\n        this.paramLabel.string = levelData.showTips;\r\n        this.priceLabel.string = Tools.getGoldStr(levelData.price);\r\n        var color = levelData.price > PlayerData.instance.gold ? cc.Color.RED : new cc.Color().fromHEX(\"#702800\");\r\n        Tools.setNodeColor(this.priceLabel.node, color);\r\n        this.tipsLabel.string = data.tips;\r\n        this.rootNode.x = type === 3 ? 55 : 0;\r\n        this.curData = levelData;\r\n        this.priceNode.active = levelData.id === data.maxLevel ? false : true;\r\n        this.adverNode.active = this.priceNode.active;\r\n\r\n        // var isLevelUpByAdver = ConfigData.instance.isGrowLevelUpByAdver(type, levelData.id);\r\n        // this.levelUpByAdverNode.active = isLevelUpByAdver;\r\n        // this.levelUpByGoldNode.active = !isLevelUpByAdver;\r\n\r\n        this.lockTips.active = Tools.arrContains(this.lockArr, type)\r\n        this.unlockInfoNode.active = !this.lockTips.active;\r\n        this.lockTipsLabel.string = data.lockTips + '(' + PlayerData.instance.playCount + '/' + data.param + ')';\r\n\r\n        for (let i = 0; i < this.arrowNodes.length; i++) {\r\n            var node = this.arrowNodes[i];\r\n            //点击关闭\r\n            if (i === type) {\r\n                if (node.active) node.active = false;\r\n            }\r\n            //金币不够的关闭\r\n            var levelData = PlayerData.instance.getGrowLevelDataByType(i);\r\n            if (PlayerData.instance.gold < levelData.price) {\r\n                if (node.active) node.active = false;\r\n            }\r\n        }\r\n\r\n        if (isAni) {\r\n            this.downNodeAni.play();\r\n        }\r\n\r\n    },\r\n\r\n    growBtnClick: function () {\r\n        if (!this.curData) return;\r\n\r\n        if (this.levelUpByAdverNode.active) {\r\n            //广告升级\r\n            this.onLevelUpByAdverBtnClick();\r\n        } else {\r\n            //金币升级\r\n            if (PlayerData.instance.gold >= this.curData.price) {\r\n                this.onGrowUp(this.curType);\r\n                PlayerData.instance.updateGold(-(this.curData.price), null, true);\r\n                this.refreshShowData(this.curType);\r\n\r\n                this.world.uiMgr.showTips(5)\r\n            } else {\r\n                var canShowGold = PlayerData.instance.dayGetGoldCount < 3;\r\n                if (canShowGold) {\r\n                    this.getGoldNode.active = true;\r\n                    var rankData = PlayerData.instance.rankData;\r\n                    var growGoldLevelData = PlayerData.instance.getGrowLevelDataByType(GrowType.Gold);\r\n                    var growGoldParam = growGoldLevelData.realGoldParam / 100;\r\n                    var rate = rankData.goldMultiRate + growGoldParam + 1;\r\n                    this.getGoldcount = Math.ceil(Tools.getItemOrFinalItem(rankData.getGold, 0) * rate * 5); //\r\n                    this.getGoldLabel.string = Tools.getGoldStr(this.getGoldcount);\r\n                } else {\r\n                    this.world.uiMgr.showTips(6);\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    onLevelUpByAdverBtnClick: function () {\r\n        var self = this;\r\n        // 关闭广告时回调\r\n        var closeFunc = function (success) {\r\n            if (success) {\r\n                self.onGrowUp(self.curType);\r\n                self.refreshShowData(self.curType);\r\n                PlayerData.instance.saveUserData('看广告升级属性');\r\n            }\r\n        }\r\n        // 打开广告失败时回调,失败回调\r\n        var errFunc = function () {\r\n            self.showShare(closeFunc);\r\n        }\r\n        AdvertMgr.instance.showAdver(AdverType.GrowNode, closeFunc, errFunc);\r\n    },\r\n\r\n    showShare: function (closeFunc) {\r\n        ShareMgr.share(ShareType.GrowNode, closeFunc)\r\n    },\r\n\r\n    closeGoldNode: function () {\r\n        this.getGoldNode.active = false;\r\n    },\r\n\r\n    onGetGoldBtnClick: function () {\r\n        var self = this;\r\n        // 关闭广告时回调\r\n        var closeFunc = function (success) {\r\n            if (success) {\r\n                PlayerData.instance.dayGetGoldCount++;\r\n                PlayerData.instance.updateGold(self.getGoldcount);\r\n                PlayerData.instance.showGold -= self.getGoldcount;\r\n                var param = {\r\n                    count: self.getGoldcount,\r\n                    isMore: true,\r\n                    isLucky: false,\r\n                }\r\n                self.world.uiMgr.showGetMoneyEffect(param);\r\n                self.closeGoldNode();\r\n                self.refreshShowData(self.curType, false);\r\n            }\r\n        }\r\n\r\n        // 打开广告失败时回调,失败回调\r\n        var errFunc = function () {\r\n            ShareMgr.share(ShareType.NotEnoughMoney, closeFunc);\r\n            // self.world.uiMgr.showTips('暂未获取到广告信息')\r\n        }\r\n        AdvertMgr.instance.showAdver(AdverType.NotEnoughMoney, closeFunc, errFunc);\r\n    },\r\n\r\n    onGrowUp: function (type) {\r\n        PlayerData.instance.updateGrowLevel(type);\r\n        var levelData = PlayerData.instance.getGrowLevelDataByType(type);\r\n        if (!levelData) return;\r\n        switch (type) {\r\n            case GrowType.Attack:\r\n                this.world.localPlayer.changeAttackPower(levelData.realParam);\r\n                break;\r\n            case GrowType.Defence:\r\n                this.world.localPlayer.changeDefencePower(levelData.realParam);\r\n                break;\r\n            case GrowType.Speed:\r\n                this.world.localPlayer.changeGrowSpeedAddition(levelData.realParam);\r\n                break;\r\n            case GrowType.Gold:\r\n                this.world.uiMgr.refreshOfflineGoldData();\r\n                break;\r\n        }\r\n    },\r\n});"]}