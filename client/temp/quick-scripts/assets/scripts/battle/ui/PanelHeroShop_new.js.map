{"version":3,"sources":["PanelHeroShop_new.js"],"names":["Tools","require","ConfigData","PlayerData","AdvertMgr","AdverType","ShareMgr","ShareType","TaskType","ItemGetType","GameData","PlatformMgr","cc","Class","extends","Component","properties","topNode","Node","content","itemHeroSkin","Prefab","pageView","PageView","pagePrefab","buyNode","unLockNode","linkNode","nameLabel","Label","introduceNode","introduceTextNode","introduceLabel","propertyNode","propertyLabel","propertyAnim","Animation","taskStartLabel","taskProgressLabel","taskFinalLabel","taskInfoNode","watchAdverBtnNode","watchAdverLabel","buyLangLabel","unlockLangLabel","jumpNode","shareIcon","adverIcon","suitNode","suitNameLabel","suiProcessLabel","suitCloseIcon","suitActiveIcon","suitHeroNameLabel","suitKnifeNameLabel","suitSkillLabel","suitHeroFlag","suitKnifeFlag","suitHeroFalseFlag","suitKnifeFalseFlag","suitIconNode","_itemCells","_itemNodes","_itemPageCells","_pageClickHistory","itemTypePool","typeIconNode","shopBgNode","perCount","goldIcon","diamondIcon","priceLabel","lastPageIndex","keyNode","keyParentNode","onLoad","checkUI","_itemClickHistory","init","world","localPlayer","initData","initUI","initKey","refresh","scrollPage","showName","heroSkinDatas","instance","slice","curTime","getCurTime","ownHeroSkins","filterDataByTime","clientData","hideSpecialSkin","isIOS","isApp","sort","a","b","i","length","data","type","getWay","priceType","GOLD","DIAMOND","taskType","RANK","TREASUREBOX","BOX","TASK","open_nft_moudle","NFT","comleted","nft_balance_ids","goodsId","rest","push","page","pageTypes","arr","pageLength","Math","ceil","j","pageNode","children","instantiate","parent","k","index","itemNode","itemComp","position","v2","floor","getComponent","setOnItemClick","pushToPageItemPool","heroSkinId","id","isPad","y","node","height","keyCount","active","comp","getItemByPage","selectItem","item","isGet","equipNode","onItemClick","onScrollPage","getCurrentPageIndex","getPageType","setTitle","setTimeout","setCurrentPageIndex","count","isOwnHeroSkin","own","nft_user_datas","console","log","addHeroSkin","canUnlock","arrContains","completeTaskIds","taskId","needCheck","needCheckTaskIds","isNew","newDate","isBeforeOtherTime","canBuy","canBuyItem","processStr","DUANWU","process","getTaskProcess","taskParam","heroSkin","buyBtnClick","lastCheckItem","gold","price","updateGold","uiMgr","showTips","fireBaseEvent","zongZi","updateZongZi","jumpBtnClick","closePanelShop","jumpParam","showPanelInvite","showPanelDailyTask","showPanelAddTop","showPanelSign","showPanelHolidayRank","unLockBtnClick","self","closeFunc","success","LOGIN","updateSignCount","refreshRedDot","showShare","showAdver","linkBtnClick","requestNFTGet","share","UnlockSkin","errFunc","getAdvertUnitId","UnlockHeroSkin","event","customEventData","isInit","isAuto","setCheck","setCanBuy","onEquipHeroSkin","lastEquipItem","setEquip","string","getGoldStr","unlockWay","ADVERCOUNT","name","introduce","propertyTips","play","str","getStringByFormat","getUITipStr","suit","suitData","getSuitData","heroData","knifeData","getKnifeSkinById","knifeSkin","isOwnKnifeSkin","equipHero","isCurEquipHeroSkin","equipKnife","isCurEquipKnifeSkin","skillTips","showActiveSuitEffect","onWathAdverBtnClick","taskMgr","refreshTaskInHome","WatchAdver","onBtnClose","close","closeCallcack","clearNeedCheckTaskIds","setCloseCallback","callback","update","dt","width"],"mappings":"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","file":"PanelHeroShop_new.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const Tools = require('Tools');\r\nconst ConfigData = require('ConfigData');\r\nconst PlayerData = require('PlayerData');\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst TaskType = require('Types').TaskType;\r\nconst ItemGetType = require('Types').ItemGetType;\r\nconst GameData = require('GameData');\r\nconst PlatformMgr = require('PlatformMgr');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        topNode: cc.Node,\r\n        content: cc.Node,\r\n        itemHeroSkin: cc.Prefab,\r\n\r\n        pageView: cc.PageView,\r\n        pagePrefab: cc.Prefab,\r\n\r\n        buyNode: cc.Node,\r\n        unLockNode: cc.Node,\r\n        linkNode : cc.Node,\r\n        nameLabel: cc.Label,\r\n        introduceNode: cc.Node,\r\n        introduceTextNode: cc.Node,\r\n        introduceLabel: cc.Label,\r\n        propertyNode: cc.Node,\r\n        propertyLabel: cc.Label,\r\n        propertyAnim: cc.Animation,\r\n\r\n        taskStartLabel: cc.Label,\r\n        taskProgressLabel: cc.Label,\r\n        taskFinalLabel: cc.Label,\r\n\r\n        taskInfoNode: cc.Node,\r\n        watchAdverBtnNode: cc.Node,\r\n\r\n        watchAdverLabel: cc.Label,\r\n        buyLangLabel: cc.Label,\r\n        unlockLangLabel: cc.Label,\r\n        jumpNode: cc.Node,\r\n        //解锁btn的图标\r\n        shareIcon: cc.Node,\r\n        adverIcon: cc.Node,\r\n\r\n\r\n        //套装\r\n        suitNode: cc.Node,\r\n        suitNameLabel: cc.Label,\r\n        suiProcessLabel: cc.Label,\r\n        suitCloseIcon: cc.Node,\r\n        suitActiveIcon: cc.Node,\r\n        suitHeroNameLabel: cc.Label,\r\n        suitKnifeNameLabel: cc.Label,\r\n        suitSkillLabel: cc.Label,\r\n        suitHeroFlag: cc.Node,\r\n        suitKnifeFlag: cc.Node,\r\n        suitHeroFalseFlag: cc.Node,\r\n        suitKnifeFalseFlag: cc.Node,\r\n        suitIconNode: cc.Node,\r\n        // adverUnlockIcon: cc.Node,\r\n        // shareUnlockIcon: cc.Node,\r\n        _itemCells: [],\r\n        _itemNodes: [],\r\n        _itemPageCells: [],\r\n        _pageClickHistory: [],\r\n\r\n        itemTypePool: [],\r\n        typeIconNode: cc.Node,\r\n\r\n        shopBgNode: cc.Node,\r\n        perCount: 3,\r\n\r\n        goldIcon: cc.Node,\r\n        diamondIcon: cc.Node,\r\n        priceLabel: cc.Label,\r\n\r\n        lastPageIndex: 0,\r\n\r\n        keyNode: cc.Node,\r\n        keyParentNode: cc.Node,\r\n    },\r\n\r\n    onLoad() {\r\n        this.checkUI();\r\n        this._itemClickHistory = {}\r\n    },\r\n\r\n\r\n    init: function (world) {\r\n        this.world = world;\r\n        this.localPlayer = world.localPlayer;\r\n        this.initData();\r\n        this.initUI();\r\n        this.initKey();\r\n        this.refresh();\r\n        this.scrollPage();\r\n        this.showName();\r\n    },\r\n\r\n    initData() {\r\n        this.itemTypePool = [];\r\n        var heroSkinDatas = ConfigData.instance.heroSkinDatas.slice();\r\n        var curTime = PlayerData.instance.getCurTime();\r\n        var ownHeroSkins = PlayerData.instance.ownHeroSkins;\r\n        Tools.filterDataByTime(heroSkinDatas, ownHeroSkins, curTime, GameData.instance, ConfigData.instance.clientData.hideSpecialSkin, PlatformMgr.isIOS(), PlatformMgr.isApp());\r\n        heroSkinDatas.sort((a, b) => {\r\n            // if (a.newDate && Tools.isBeforeOtherTime(a.newDate, curTime)) {\r\n            //     return -1;\r\n            // } else if (b.newDate && Tools.isBeforeOtherTime(b.newDate, curTime)) {\r\n            //     return 1;\r\n            // } else {\r\n            return a.sort - b.sort;\r\n            // }\r\n        })\r\n\r\n        for (let i = 0; i < heroSkinDatas.length; i++) {\r\n            var data = heroSkinDatas[i];\r\n            var type = 0;\r\n            if (data.getWay === 0) {\r\n                if (data.priceType === 0) {\r\n                    type = ItemGetType.GOLD;\r\n                } else {\r\n                    type = ItemGetType.DIAMOND;\r\n                }\r\n            } else if (data.getWay === 1) {\r\n                if (data.taskType === TaskType.RANK) {\r\n                    type = ItemGetType.RANK;\r\n                } else if (data.taskType === TaskType.TREASUREBOX) {\r\n                    type = ItemGetType.BOX;\r\n                } else {\r\n                    type = ItemGetType.TASK;\r\n                }\r\n            }\r\n            else if (data.getWay === 100) {\r\n                if(!PlatformMgr.open_nft_moudle){\r\n                    continue\r\n                }\r\n                type = ItemGetType.NFT;\r\n\r\n                //塞入余额，玩家是否拥有\r\n                let comleted = PlatformMgr.nft_balance_ids[data.goodsId] || 0\r\n                data.rest = 1000 - comleted\r\n            }\r\n            this.push(type, data);\r\n        }\r\n    },\r\n\r\n\r\n    initUI() {\r\n        this.page = -1;\r\n        this.pageTypes = [];\r\n        for (let i = 0; i < this.itemTypePool.length; i++) {\r\n            var arr = this.itemTypePool[i];\r\n            if (!arr) continue;\r\n            var pageLength = Math.ceil(arr.length / this.perCount);\r\n            for (let j = 0; j < pageLength; j++) {\r\n                this.page++;\r\n                this.pageTypes[this.page] = i;\r\n                let pageNode = this.content.children[this.page]\r\n                if (!pageNode) {\r\n                    pageNode = cc.instantiate(this.pagePrefab);\r\n                    pageNode.parent = this.content;\r\n                }\r\n                for (let k = 0; k < this.perCount; k++) {\r\n                    let index = j * this.perCount + k;\r\n                    var data = arr[index];\r\n                    let itemNode = pageNode.children[k]\r\n                    var itemComp\r\n                    if (!itemNode) {\r\n                        itemNode = cc.instantiate(this.itemHeroSkin);\r\n                        itemNode.parent = pageNode;\r\n                        itemNode.position = cc.v2(k % 3 * 230 - 235, -100 - Math.floor(k / 3) * 240);\r\n                        itemComp = itemNode.getComponent('ItemHeroSkin_new')\r\n                        itemComp.init(data);\r\n                        itemComp.page = this.page;\r\n                        itemComp.index = k;\r\n                        if (data) {\r\n                            itemComp.setOnItemClick(this, itemComp);\r\n                            this._itemCells.push(itemComp);\r\n                            this.pushToPageItemPool(this.page, itemComp);\r\n                        }\r\n                    } else {\r\n                        itemComp = itemNode.getComponent('ItemHeroSkin_new')\r\n                    }\r\n\r\n                    //找出当前装备\r\n                    if (data && PlayerData.instance.heroSkinId === data.id) {\r\n                        this.lastPageIndex = this.page;\r\n                    }\r\n\r\n                    //设置是否可买\r\n                    // if (data && !PlayerData.instance.isOwnHeroSkin(data.id) && PlayerData.instance.canBuyItem(data)) {\r\n                    //     itemComp.setCanBuy(true);\r\n                    // }\r\n                }\r\n            }\r\n        };\r\n    },\r\n\r\n    checkUI() {\r\n        var isPad = GameData.instance.isPad();\r\n        this.topNode.y = isPad ? -200 : 0;\r\n        this.pageView.node.height = isPad ? 300 : 550;\r\n        this.shopBgNode.height = isPad ? 500 : 750;\r\n        this.suitNode.y = isPad ? 240 : 390;\r\n        // this.nameLabel.node.y = isPad ? 180 : 230\r\n        // this.propertyNode.y = isPad ? 150 : 195;\r\n        // this.propertyAnim.node.parent.y = isPad ? 150 : 195;\r\n        this.perCount = isPad ? 3 : 6;\r\n    },\r\n\r\n    initKey() {\r\n        var keyCount = PlayerData.instance.keyCount;\r\n        for (let i = 0; i < 3; i++) {\r\n            this.keyParentNode.children[i].active = i < keyCount;\r\n        }\r\n    },\r\n\r\n    push(type, data) {\r\n        if (!this.itemTypePool[type]) {\r\n            this.itemTypePool[type] = [];\r\n        }\r\n        this.itemTypePool[type].push(data);\r\n    },\r\n\r\n    //以页数区分的ItemComp数组\r\n    pushToPageItemPool(page, comp) {\r\n        if (!this._itemPageCells[page]) {\r\n            this._itemPageCells[page] = [];\r\n        }\r\n        this._itemPageCells[page].push(comp)\r\n    },\r\n\r\n    getItemByPage(page, index) {\r\n        if (this._itemPageCells[page]) {\r\n            return this._itemPageCells[page][index];\r\n        }\r\n    },\r\n\r\n    selectItem(page) {\r\n        if (this._itemPageCells[page]) {\r\n            var length = this._itemPageCells[page].length;\r\n            var index = -1;\r\n            for (let i = length - 1; i >= 0; i--) {\r\n                let item = this._itemPageCells[page][i];\r\n                if (item.isGet) {\r\n                    if (item.equipNode.active) {\r\n                        this.onItemClick(null, this._itemPageCells[page][i], false, true)\r\n                        return;\r\n                    }\r\n                } else {\r\n                    index = i;\r\n                }\r\n            }\r\n\r\n            //检查是否点过\r\n            if (index !== -1) {\r\n                if (this._pageClickHistory[page]) {\r\n                    index = this._pageClickHistory[page];\r\n                }\r\n                this.onItemClick(null, this._itemPageCells[page][index], false, true)\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n    onScrollPage(pageView) {\r\n        var index = pageView.getCurrentPageIndex();\r\n        var type = this.getPageType(index);\r\n        this.setTitle(type);\r\n        this.selectItem(index);\r\n    },\r\n\r\n    setTitle(type) {\r\n        for (let i = 0; i < this.typeIconNode.children.length; i++) {\r\n            this.typeIconNode.children[i].active = i === type;\r\n        }\r\n    },\r\n\r\n    showName() {\r\n        this.nameLabel.node.active = false;\r\n        setTimeout(() => {\r\n            this.nameLabel.node.active = true;\r\n        }, 500)\r\n    },\r\n\r\n    getPageType: function (index) {\r\n        return this.pageTypes[index];\r\n    },\r\n\r\n    scrollPage: function () {\r\n        this.pageView.onLoad();\r\n        var index = this.lastPageIndex - 1;\r\n        index = index >= 0 ? index : 1;\r\n        this.pageView.setCurrentPageIndex(index);\r\n        setTimeout(() => {\r\n            this.pageView.setCurrentPageIndex(this.lastPageIndex);\r\n            this.onScrollPage(this.pageView)\r\n        }, 200);\r\n    },\r\n\r\n    refresh: function () {\r\n        var count = 0;\r\n        for (const itemComp of this._itemCells) {\r\n            if (!itemComp) continue;\r\n            var data = itemComp.data;\r\n            var isGet = PlayerData.instance.isOwnHeroSkin(data.id);\r\n\r\n            //NFT测试，显示是否拥有\r\n            if(data.getWay==100 && !isGet){\r\n                let own = PlatformMgr.nft_user_datas[data.goodsId] || 0\r\n                if(own > 0){\r\n                    console.log(\"购买后。同步到本地皮肤数据\")\r\n                    PlayerData.instance.addHeroSkin(data.id);\r\n                    isGet = true\r\n                }\r\n            }\r\n\r\n            var canUnlock = Tools.arrContains(PlayerData.instance.completeTaskIds, data.taskId);\r\n            var needCheck = Tools.arrContains(PlayerData.instance.needCheckTaskIds, data.taskId);\r\n            var isNew = data.newDate && Tools.isBeforeOtherTime(data.newDate, PlayerData.instance.getCurTime());\r\n            var canBuy = PlayerData.instance.canBuyItem(data) && !this._itemClickHistory[data.id];\r\n\r\n            var processStr = '';\r\n            if (data.getWay === 1) {\r\n                if (data.taskType !== TaskType.RANK && data.taskType !== TaskType.DUANWU && data.taskType !== TaskType.TREASUREBOX) {\r\n                    var process = PlayerData.instance.getTaskProcess(data.taskType);\r\n                    processStr = process + '/' + data.taskParam;\r\n                }\r\n            }\r\n\r\n            itemComp.refresh(isGet, canUnlock, needCheck, isNew, processStr, canBuy);\r\n            if (isGet) count++;\r\n            if (PlayerData.instance.heroSkin.id === data.id) {\r\n                this.onItemClick(null, itemComp, true);\r\n                // itemComp.setCheck(false);\r\n            }\r\n        }\r\n    },\r\n\r\n    buyBtnClick: function () {\r\n        if (this.lastCheckItem) {\r\n            var item = this.lastCheckItem;\r\n            switch (item.data.priceType) {\r\n                case 0: {\r\n                    if (PlayerData.instance.gold >= item.data.price) {\r\n                        PlayerData.instance.addHeroSkin(item.data.id);\r\n                        PlayerData.instance.updateGold(-(item.data.price));\r\n                        this.refresh();\r\n                        this.onItemClick(null, item);\r\n                    } else {\r\n                        this.world.uiMgr.showTips(7)\r\n                    }\r\n                    break\r\n                }\r\n                case 1: {\r\n                    AdvertMgr.instance.fireBaseEvent(\"click_store_product_btn\", \"product_type\", \"skinhero\");\r\n                    if (PlayerData.instance.zongZi >= item.data.price) {\r\n                        PlayerData.instance.addHeroSkin(item.data.id);\r\n                        PlayerData.instance.updateZongZi(-(item.data.price));\r\n                        this.refresh();\r\n                        this.onItemClick(null, item);\r\n                    } else {\r\n                        this.world.uiMgr.showTips('Insufficient Diamond');\r\n                    }\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n    jumpBtnClick: function () {\r\n        if (this.lastCheckItem) {\r\n            // this.close();\r\n            this.world.uiMgr.closePanelShop();\r\n            var item = this.lastCheckItem;\r\n            switch (item.data.jumpParam) {\r\n                case 'PanelInvite': {\r\n                    this.world.uiMgr.showPanelInvite();\r\n                    break;\r\n                }\r\n                case 'PanelDailyTask': {\r\n                    this.world.uiMgr.showPanelDailyTask();\r\n                    break;\r\n                }\r\n                case 'PanelAddTop': {\r\n                    this.world.uiMgr.showPanelAddTop();\r\n                    break;\r\n                }\r\n                case 'PanelSign': {\r\n                    this.world.uiMgr.showPanelSign();\r\n                    break;\r\n                }\r\n                case 'PanelHolidayRank': {\r\n                    this.world.uiMgr.showPanelHolidayRank(true);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    unLockBtnClick: function () {\r\n        var self = this;\r\n        // 关闭广告时回调\r\n        var closeFunc = (success) => {\r\n            if (self.lastCheckItem && success) {\r\n                var item = self.lastCheckItem;\r\n                PlayerData.instance.addHeroSkin(item.data.id);\r\n                self.refresh();\r\n                self.onItemClick(null, item);\r\n                if (item.data.taskType === TaskType.LOGIN) {\r\n                    PlayerData.instance.updateSignCount();\r\n                }\r\n                self.world.uiMgr.refreshRedDot();\r\n            }\r\n        }\r\n\r\n        if (this.shareIcon.active) {\r\n            this.showShare(closeFunc);\r\n        } else {\r\n            this.showAdver(closeFunc);\r\n        }\r\n    },\r\n\r\n    linkBtnClick: function () {\r\n        //NFT测试\r\n        var data = this.lastCheckItem.data;\r\n        PlatformMgr.requestNFTGet(data)\r\n    },\r\n\r\n    showShare: function (closeFunc) {\r\n        ShareMgr.share(ShareType.UnlockSkin, closeFunc);\r\n    },\r\n\r\n    showAdver: function (closeFunc) {\r\n        var self = this;\r\n        var errFunc = () => {\r\n            this.showShare(closeFunc);\r\n        }\r\n        AdvertMgr.instance.fireBaseEvent(\"click_adv_btn\", \"position_id\", ConfigData.instance.getAdvertUnitId(AdverType.UnlockHeroSkin));\r\n        AdvertMgr.instance.showAdver(AdverType.UnlockHeroSkin, closeFunc, errFunc);\r\n    },\r\n\r\n    onItemClick: function (event, customEventData, isInit = false, isAuto = false) {\r\n        var itemComp = customEventData;\r\n        var data = itemComp.data;\r\n\r\n        if (this.lastCheckItem) this.lastCheckItem.setCheck(false);\r\n        itemComp.setCheck(true);\r\n        itemComp.setCanBuy(false);\r\n        this.lastCheckItem = itemComp;\r\n\r\n        if (!isAuto && !itemComp.isGet) {\r\n            this._pageClickHistory[itemComp.page] = itemComp.index;\r\n        }\r\n\r\n        this.buyNode.active = false;\r\n        this.linkNode.active = false;\r\n        this.unLockNode.active = false;\r\n        this.watchAdverBtnNode.active = false;\r\n        this.jumpNode.active = false;\r\n\r\n        this.world.onEquipHeroSkin(data, itemComp.isGet, false);\r\n        if (itemComp.isGet) {\r\n            if (this.lastEquipItem) this.lastEquipItem.setEquip(false)\r\n            this.lastEquipItem = itemComp;\r\n            itemComp.setEquip(true);\r\n        } else {\r\n            if (data.getWay === 0) {\r\n                this.buyNode.active = true;\r\n                if (data.price) this.priceLabel.string = Tools.getGoldStr(data.price);\r\n                this.goldIcon.active = data.priceType === 0;\r\n                this.diamondIcon.active = data.priceType === 1;\r\n            } else if (data.getWay === 1) {\r\n                if (Tools.arrContains(PlayerData.instance.completeTaskIds, data.taskId)) {\r\n                    this.unLockNode.active = true;\r\n                    this.shareIcon.active = data.unlockWay === 1;\r\n                    this.adverIcon.active = data.unlockWay === 2;\r\n\r\n                    // if (data.unlockWay === 1) {\r\n                    //     if (GameData.instance.isInReview) {\r\n                    //         this.shareIcon.active = false;\r\n                    //         this.adverIcon.active = true;\r\n                    //     } \r\n                    // }\r\n\r\n                } else if (data.taskType === TaskType.ADVERCOUNT) {\r\n                    this.watchAdverBtnNode.active = true;\r\n                }\r\n            }\r\n            else if (data.getWay === 100) {\r\n                //NFT测试\r\n                this.buyNode.active = false;\r\n                this.linkNode.active = true;\r\n            }\r\n        }\r\n\r\n        this.nameLabel.string = data.name;\r\n        this.introduceNode.active = !(itemComp.isGet || this.buyNode.active || this.unLockNode.active || this.watchAdverBtnNode.active);\r\n        this.introduceLabel.string = data.introduce;\r\n        this.propertyNode.active = data.propertyTips ? true : false;\r\n        this.propertyLabel.string = data.propertyTips ? data.propertyTips : '';\r\n        if (this.propertyNode.active) {\r\n            this.propertyAnim.play();\r\n        }\r\n        this.keyNode.active = data.taskType === TaskType.TREASUREBOX;\r\n        this.introduceTextNode.active = !this.keyNode.active;\r\n\r\n        this.taskInfoNode.active = data.getWay === 1;\r\n        if (this.taskInfoNode.active) {\r\n            var process = PlayerData.instance.getTaskProcess(data.taskType);\r\n            var str = process < data.taskParam ? process : data.taskParam;\r\n            this.taskStartLabel.string = '(';\r\n            this.taskProgressLabel.string = str ? str : 0;\r\n            this.taskFinalLabel.string = '/' + data.taskParam + ')';\r\n\r\n            if (data.taskType === TaskType.RANK || data.taskType === TaskType.DUANWU || data.taskType === TaskType.TREASUREBOX) {\r\n                this.taskStartLabel.string = '';\r\n                this.taskProgressLabel.string = '';\r\n                this.taskFinalLabel.string = '';\r\n            }\r\n            this.watchAdverLabel.string = Tools.getStringByFormat(ConfigData.instance.getUITipStr(20), str, data.taskParam)\r\n        }\r\n        this.buyLangLabel.string = 'Buy'\r\n        this.unlockLangLabel.string = 'Unlock:'\r\n\r\n        this.suitNode.active = data.suit;\r\n        if (data.suit) {\r\n            var suitData = ConfigData.instance.getSuitData(data.suit);\r\n            var heroData = data;\r\n            var knifeData = ConfigData.instance.getKnifeSkinById(suitData.knifeSkin);\r\n            var isOwnHeroSkin = PlayerData.instance.isOwnHeroSkin(suitData.heroSkin);\r\n            var isOwnKnifeSkin = PlayerData.instance.isOwnKnifeSkin(suitData.knifeSkin);\r\n            var equipHero = PlayerData.instance.isCurEquipHeroSkin(heroData.id);\r\n            var equipKnife = PlayerData.instance.isCurEquipKnifeSkin(knifeData.id);\r\n\r\n\r\n            this.suitNameLabel.string = suitData.name;\r\n            var process = 0;\r\n            if (isOwnHeroSkin) process++;\r\n            if (isOwnKnifeSkin) process++;\r\n            this.suiProcessLabel.string = '(' + process + '/2)';\r\n            this.suitHeroNameLabel.string = heroData.name;\r\n            this.suitKnifeNameLabel.string = knifeData.name;\r\n            this.suitSkillLabel.string = suitData.skillTips;\r\n            for (let i = 0; i < this.suitIconNode.children.length; i++) {\r\n                if (this.suitIconNode.children[i]) {\r\n                    this.suitIconNode.children[i].active = (i + 1) == data.suit;\r\n                }\r\n            }\r\n\r\n            this.suitHeroFlag.active = equipHero;\r\n            this.suitKnifeFlag.active = equipKnife;\r\n            this.suitHeroFalseFlag.active = !equipHero;\r\n            this.suitKnifeFalseFlag.active = !equipKnife;\r\n\r\n\r\n            this.suitActiveIcon.active = isOwnHeroSkin && isOwnKnifeSkin && equipHero && equipKnife;\r\n            this.suitCloseIcon.active = !(isOwnHeroSkin && isOwnKnifeSkin && equipHero && equipKnife);\r\n\r\n            if (this.suitActiveIcon.active && !isInit) {\r\n                this.world.uiMgr.showActiveSuitEffect();\r\n            }\r\n        }\r\n    },\r\n\r\n    //累计看广告按钮\r\n    onWathAdverBtnClick: function () {\r\n        var self = this;\r\n        // 关闭广告时回调\r\n        var closeFunc = function (success) {\r\n            if (self.lastCheckItem && success) {\r\n                var item = self.lastCheckItem;\r\n                self.world.taskMgr.refreshTaskInHome();\r\n                self.refresh();\r\n                self.onItemClick(null, item);\r\n                // self.world.uiMgr.showTips('累计观看广告次数+1')\r\n            }\r\n        }\r\n        // 打开广告失败时回调,失败回调\r\n        var errFunc = function () {\r\n            self.world.uiMgr.showTips(4);\r\n        }\r\n\r\n        AdvertMgr.instance.showAdver(AdverType.WatchAdver, closeFunc, errFunc);\r\n\r\n    },\r\n\r\n\r\n    onBtnClose() {\r\n        this.world.uiMgr.closePanelShop(false);\r\n    },\r\n\r\n    close: function () {\r\n        if (this.lastEquipItem) this.lastEquipItem.setEquip(false);\r\n        if (this.lastCheckItem) this.lastCheckItem.setCheck(false);\r\n        if (this.closeCallcack) this.closeCallcack();\r\n        this.world.onEquipHeroSkin(PlayerData.instance.heroSkin, true);\r\n        PlayerData.instance.clearNeedCheckTaskIds();\r\n        this._pageClickHistory = [];\r\n        this._itemClickHistory = {}\r\n    },\r\n\r\n    setCloseCallback: function (callback) {\r\n        this.closeCallcack = callback;\r\n    },\r\n\r\n    update: function (dt) {\r\n        if (this.propertyAnim.node.width !== this.propertyNode.width + 20) {\r\n            this.propertyAnim.node.width = this.propertyNode.width + 20;\r\n        }\r\n    }\r\n});"]}