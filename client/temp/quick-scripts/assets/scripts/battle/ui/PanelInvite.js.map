{"version":3,"sources":["PanelInvite.js"],"names":["PlatformMgr","require","PlatformType","UIUtil","ConfigData","PlayerData","ShareMgr","ShareType","AdvertMgr","AdverType","Tools","BagItem","ItemType","StageType","cc","Class","extends","Component","properties","iconSprties","Sprite","shareLabel","Label","shareBtn","Node","receiveBtn","hasReceiveBtn","init","world","data","instance","inviteDatas","updateCheckInviteLength","uiMgr","refreshRedDot","i","length","loadFriendPortrait","iconUrl","string","refresh","complete","receive","hasGetInviteReward","active","onShareClick","share","Invite","onReceiveClick","item","createItemWithString","isOwnHeroSkin","id","addHeroSkin","onEquipHeroSkin","itemData","showReward","onClose","node"],"mappings":"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","file":"PanelInvite.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const PlatformMgr = require('PlatformMgr');\r\nconst PlatformType = require('Types').PlatformType;\r\nconst UIUtil = require('UIUtil');\r\nconst ConfigData = require('ConfigData');\r\nconst PlayerData = require('PlayerData');\r\nconst ShareMgr = require('ShareMgr');\r\nconst ShareType = require('Types').ShareType;\r\nconst AdvertMgr = require('AdvertMgr');\r\nconst AdverType = require('Types').AdverType;\r\nconst Tools = require('Tools');\r\nconst BagItem = require('BagItem');\r\nconst ItemType = require('Types').ItemType;\r\nconst StageType = require('Types').StageType;\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        iconSprties: [cc.Sprite],\r\n\r\n        shareLabel: cc.Label,\r\n\r\n        shareBtn: cc.Node,\r\n        receiveBtn: cc.Node,\r\n        hasReceiveBtn: cc.Node,\r\n    },\r\n\r\n    init(world) {\r\n        this.world = world;\r\n        this.data = PlayerData.instance.inviteDatas;\r\n        PlayerData.instance.updateCheckInviteLength();\r\n        this.world.uiMgr.refreshRedDot();\r\n        for (let i = 0; i < this.data.length; i++) {\r\n            if (this.iconSprties[i]) {\r\n                UIUtil.loadFriendPortrait(this.iconSprties[i], this.data[i].iconUrl)\r\n            }\r\n        }\r\n        this.shareLabel.string = this.data.length + '/3';\r\n        this.refresh();\r\n    },\r\n\r\n    refresh() {\r\n        var complete = this.data.length >= 3\r\n        var receive = PlayerData.instance.hasGetInviteReward();\r\n\r\n\r\n        this.shareBtn.active = !complete;\r\n        this.receiveBtn.active = complete && !receive;\r\n        this.hasReceiveBtn.active = complete && receive;\r\n    },\r\n\r\n\r\n    onShareClick: function () {\r\n        ShareMgr.share(ShareType.Invite);\r\n    },\r\n\r\n    onReceiveClick: function () {\r\n        var item = BagItem.createItemWithString('2,11,1');\r\n        if (!PlayerData.instance.isOwnHeroSkin(item.id)) {\r\n            PlayerData.instance.addHeroSkin(item.id);\r\n            //装备上\r\n            this.world.onEquipHeroSkin(item.itemData, true);\r\n        }\r\n        //展示出来\r\n        this.world.uiMgr.showReward(item.itemData);\r\n        this.world.uiMgr.refreshRedDot();\r\n        this.refresh()\r\n    },\r\n    onClose() {\r\n        this.node.active = false;\r\n        // AdvertMgr.instance.destoryBanner();\r\n    },\r\n});"]}