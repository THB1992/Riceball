{"version":3,"sources":["PanelMatch.js"],"names":["Tools","require","cc","Class","extends","Component","properties","itemParent","Node","itemMatchPrefab","Prefab","cleanUp","destroyAllChildren","init","players","callback","_players","concat","sort","a","b","Math","random","itemPool","i","length","itemNode","instantiate","parent","x","y","floor","itemComp","getComponent","isLocal","showIcon","push","time","item","showTime","getRandomInt","setTimeout"],"mappings":";;;;;;AAAA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;;AAEAC,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,oBAAYL,GAAGM,IADP;AAERC,yBAAiBP,GAAGQ;AAFZ,KAHP;;AAQLC,aAAS,mBAAY;AACjB,aAAKJ,UAAL,CAAgBK,kBAAhB;AACH,KAVI;;AAYLC,UAAM,cAAUC,OAAV,EAAmBC,QAAnB,EAA6B;AAC/B,YAAIC,WAAWF,QAAQG,MAAR,EAAf;AACAD,iBAASE,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACpB,mBAAOC,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,CAAC,CAAvB,GAA2B,CAAlC;AACH,SAFD;AAGA,YAAIC,WAAW,EAAf;AACA,aAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIR,SAASS,MAA7B,EAAqCD,GAArC,EAA0C;AACtC,gBAAME,WAAWxB,GAAGyB,WAAH,CAAe,KAAKlB,eAApB,CAAjB;AACAiB,qBAASE,MAAT,GAAkB,KAAKrB,UAAvB;AACAmB,qBAASG,CAAT,GAAaL,IAAI,CAAJ,GAAQ,GAArB;AACAE,qBAASI,CAAT,GAAaT,KAAKU,KAAL,CAAWP,IAAI,CAAf,IAAoB,CAAC,GAAlC;AACA,gBAAMQ,WAAWN,SAASO,YAAT,CAAsB,WAAtB,CAAjB;AACAD,qBAASnB,IAAT,CAAcG,SAASQ,CAAT,CAAd;AACA,gBAAIR,SAASQ,CAAT,EAAYU,OAAhB,EAAyB;AACrBF,yBAASG,QAAT;AACH,aAFD,MAEO;AACHZ,yBAASa,IAAT,CAAcJ,QAAd;AACH;AACJ;;AAEDT,iBAASL,IAAT,CAAc,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACpB,mBAAOC,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,CAAC,CAAvB,GAA2B,CAAlC;AACH,SAFD;;AAIA,YAAIe,OAAO,CAAX;;AAxB+B,mCAyBtBb,EAzBsB;AA0B3B,gBAAIc,OAAOf,SAASC,EAAT,CAAX;AACA,gBAAIe,WAAWvC,MAAMwC,YAAN,CAAmB,GAAnB,EAAwB,GAAxB,CAAf;AACAH,oBAAQE,QAAR;AACAE,uBAAW,YAAM;AACbH,qBAAKH,QAAL;AACH,aAFD,EAEGE,IAFH;AA7B2B;;AAyB/B,aAAK,IAAIb,KAAI,CAAb,EAAgBA,KAAID,SAASE,MAA7B,EAAqCD,IAArC,EAA0C;AAAA,kBAAjCA,EAAiC;AAOzC;;AAEDa,gBAAQ,GAAR;AACAI,mBAAW,YAAM;AACb1B;AACH,SAFD,EAEGsB,IAFH;AAGH;;AAED;AApDK,CAAT","file":"PanelMatch.js","sourceRoot":"..\\..\\..\\..\\..\\..\\assets\\scripts\\battle\\ui","sourcesContent":["const Tools = require('Tools');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        itemParent: cc.Node,\r\n        itemMatchPrefab: cc.Prefab,\r\n    },\r\n\r\n    cleanUp: function () {\r\n        this.itemParent.destroyAllChildren();\r\n    },\r\n\r\n    init: function (players, callback) {\r\n        var _players = players.concat();\r\n        _players.sort((a, b) => {\r\n            return Math.random() > 0.5 ? -1 : 1;\r\n        });\r\n        var itemPool = [];\r\n        for (let i = 0; i < _players.length; i++) {\r\n            const itemNode = cc.instantiate(this.itemMatchPrefab);\r\n            itemNode.parent = this.itemParent;\r\n            itemNode.x = i % 4 * 150;\r\n            itemNode.y = Math.floor(i / 4) * -150;\r\n            const itemComp = itemNode.getComponent('ItemMatch');\r\n            itemComp.init(_players[i]);\r\n            if (_players[i].isLocal) {\r\n                itemComp.showIcon();\r\n            } else {\r\n                itemPool.push(itemComp);\r\n            }\r\n        }\r\n\r\n        itemPool.sort((a, b) => {\r\n            return Math.random() > 0.5 ? -1 : 1;\r\n        });\r\n\r\n        var time = 0;\r\n        for (let i = 0; i < itemPool.length; i++) {\r\n            let item = itemPool[i];\r\n            let showTime = Tools.getRandomInt(100, 400);\r\n            time += showTime;\r\n            setTimeout(() => {\r\n                item.showIcon();\r\n            }, time);\r\n        }\r\n\r\n        time += 300;\r\n        setTimeout(() => {\r\n            callback();\r\n        }, time);\r\n    },\r\n\r\n    // update (dt) {},\r\n});"]}