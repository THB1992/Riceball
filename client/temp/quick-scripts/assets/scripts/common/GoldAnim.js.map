{"version":3,"sources":["GoldAnim.js"],"names":["cc","Class","extends","Component","properties","coin","Prefab","editBox","EditBox","start","arr","j","i","gold","instantiate","parent","node","opacity","push","onClick","count","num","offset","final","setTimeout","pos","v2","Math","cos","PI","x","sin","y","random","moveTo1","moveTo","easing","easeCircleActionInOut","moveTo2","callf","callFunc","position","stopAllActions","runAction","sequence","update","onset","director","getScheduler","setTimeScale","Number","parseFloat","string","onGetNormal","callback","onGetMore","onGetLucky"],"mappings":"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","file":"GoldAnim.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\common","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        coin: cc.Prefab,\r\n        editBox: cc.EditBox,\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start() {\r\n        this.arr = [];\r\n        for (let j = 0; j < 3; j++) {\r\n            this.arr[j] = [];\r\n            for (let i = 0; i < 20; i++) {\r\n                let gold = cc.instantiate(this.coin);\r\n                gold.parent = this.node;\r\n                gold.opacity = 0;\r\n                this.arr[j].push(gold)\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n\r\n    onClick(count, num, offset, final) {\r\n        for (let j = 0; j < count; j++) {\r\n            setTimeout(() => {\r\n                for (let i = 0; i < num; i++) {\r\n                    let gold = this.arr[j][i];\r\n                    gold.opacity = 255;\r\n                    // let fadeIn = cc.fadeIn(0.5);\r\n                    var pos = cc.v2(Math.cos(i / num * 2 * Math.PI) * 250 + offset.x, Math.sin(i / num * 2 * Math.PI) * 300 + offset.y)\r\n\r\n                    if (pos.y > 0) {\r\n                        pos.y += pos.y / 2\r\n                    } else {\r\n                        pos.y += Math.random() * 100 + 100;\r\n                    }\r\n\r\n\r\n                    let moveTo1 = cc.moveTo(Math.random() * 0.2 + 0.4, pos).easing(cc.easeCircleActionInOut(1.0));\r\n                    let moveTo2 = cc.moveTo(Math.random() * 0.2 + 0.6, final).easing(cc.easeCircleActionInOut(1.0))\r\n                    let callf = cc.callFunc(() => {\r\n                        gold.opacity = 0;\r\n                    })\r\n                    gold.position = offset;\r\n\r\n                    gold.stopAllActions();\r\n                    gold.runAction(cc.sequence(moveTo1, moveTo2, callf));\r\n                    // setTimeout(() => {\r\n                    //     gold.runAction(moveTo2);\r\n                    // }, i * 50 + 200);\r\n                }\r\n            }, j * 400)\r\n        }\r\n    },\r\n    update() {\r\n\r\n    },\r\n\r\n    onset() {\r\n        cc.director.getScheduler().setTimeScale(Number.parseFloat(this.editBox.string))\r\n    },\r\n\r\n    onGetNormal(callback, offset, final) {\r\n        this.onClick(1, 10, offset, final)\r\n        setTimeout(callback, 1000)\r\n    },\r\n    onGetMore(callback, offset, final) {\r\n        this.onClick(1, 20, offset, final)\r\n        setTimeout(callback, 1400)\r\n    },\r\n    onGetLucky(callback, offset, final) {\r\n        this.onClick(3, 20, offset, final)\r\n        setTimeout(callback, 1800)\r\n    },\r\n    // update (dt) {},\r\n});"]}