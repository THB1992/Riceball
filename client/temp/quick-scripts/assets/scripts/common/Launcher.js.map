{"version":3,"sources":["Launcher.js"],"names":["Tools","require","GameData","ConfigData","PlayerData","PlatformMgr","UpdateMgr","ShareMgr","AdvertMgr","CustomFunnelEvent","PlatformType","Contact","CollisionManager","Scheduler","cc","LanguageMgr","v2Proto","Vec2","prototype","PayMgr","Launcher","Class","extends","Component","statics","properties","waitNode","Node","needUpdate","timeOutTime","onLoad","init","waitTime","console","log","getTimestampMS","instance","_curTime","logUseTime","checkNewClient","doLogin","manager","director","getCollisionManager","getScheduler","unscheduleUpdate","_collisionManager","scheduleUpdate","PRIORITY_SYSTEM","getRotation","angle","setRotation","value","_p","js","getset","Vec3","rotate","radians","out","call","notifyFunnelEvent","Login_Start","self","res","result","Login_Suc","initUserData","Load_UserData","hawkeye_report_login","hawkeye_report_share_in","hawkeye_report_level","setLanguage","af_report_user","wx","showModal","title","content","showCancel","success","confirm","lang","getItem","undefined","setLang","Number","languageCode","country","update","dt","loadingConfigCount","loadedConfigCount","Load_ConfigData","loadComplete","isloading","platformType","ANDROID","frst","isFirstDay","jsb","reflection","callStaticMethod","dayCanReportTotalAdsRevenue","dayTotalAdsRevenue","Math","random","IOS","getOpenAdRules","isShowingOpenAd","showOpenApp","Switch_BattleFire","loadScene","isShowOpenAd","isShowOpenAdCold","active"],"mappings":";;;;;;AAAA;;;;;AAKA,IAAMA,QAAQC,QAAQ,OAAR,CAAd;AACA,IAAMC,WAAWD,QAAQ,UAAR,CAAjB;AACA,IAAME,aAAaF,QAAQ,YAAR,CAAnB;AACA,IAAMG,aAAaH,QAAQ,YAAR,CAAnB;AACA,IAAMI,cAAcJ,QAAQ,aAAR,CAApB;AACA,IAAMK,YAAYL,QAAQ,WAAR,CAAlB;AACA,IAAMM,WAAWN,QAAQ,UAAR,CAAjB;AACA,IAAMO,YAAYP,QAAQ,WAAR,CAAlB;AACA,IAAMQ,oBAAoBR,QAAQ,OAAR,EAAiBQ,iBAA3C;AACA,IAAMC,eAAeT,QAAQ,OAAR,EAAiBS,YAAtC;AACA,IAAMC,UAAUV,QAAQ,SAAR,CAAhB;AACA,IAAMW,mBAAmBX,QAAQ,kBAAR,CAAzB;AACA,IAAMY,YAAYC,GAAGD,SAArB;AACA,IAAME,cAAcd,QAAQ,aAAR,CAApB;AACA,IAAMe,UAAUF,GAAGG,IAAH,CAAQC,SAAxB;AACA,IAAMC,SAASlB,QAAQ,QAAR,CAAf;;AAEA;;;AAGA,IAAMmB,WAAWN,GAAGO,KAAH,CAAS;AACtBC,aAASR,GAAGS,SADU;;AAGtBC,aAAS,EAHa;;AAOtBC,gBAAY;AACR;AACAC,kBAAUZ,GAAGa,IAFL;AAGRC,oBAAY,KAHJ;AAIRC,qBAAa;AAJL,KAPU;;AActBC,YAAQ,kBAAY;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAKC,IAAL;AACA;AACH,KArCqB;;AAuCtBA,UAAM,gBAAY;AAAA;;AACd,aAAKC,QAAL,GAAgB,CAAhB;AACA9B,iBAAS6B,IAAT;AACAE,gBAAQC,GAAR,CAAY,cAAclC,MAAMmC,cAAN,EAA1B;AACAjC,iBAASkC,QAAT,CAAkBC,QAAlB,GAA6BrC,MAAMmC,cAAN,EAA7B;AACA9B,oBAAY0B,IAAZ;AACA7B,iBAASkC,QAAT,CAAkBE,UAAlB,CAA6B,kBAA7B;;AAEAhC,kBAAUiC,cAAV,CAAyB,YAAM;;AAE3BnC,uBAAW2B,IAAX;AACA7B,qBAASkC,QAAT,CAAkBE,UAAlB,CAA6B,iBAA7B;;AAGA/B,qBAASwB,IAAT;AACA7B,qBAASkC,QAAT,CAAkBE,UAAlB,CAA6B,eAA7B;;AAEA,kBAAKE,OAAL;;AAEArC,uBAAW4B,IAAX;AACA7B,qBAASkC,QAAT,CAAkBE,UAAlB,CAA6B,iBAA7B;AACA9B,sBAAUuB,IAAV;AACAZ,mBAAOY,IAAP;AACA7B,qBAASkC,QAAT,CAAkBE,UAAlB,CAA6B,gBAA7B;AACA;AACH,SAjBD;;AAoBAxB,WAAGH,OAAH,GAAaA,OAAb;AACA,YAAI8B,UAAU3B,GAAG4B,QAAH,CAAYC,mBAAZ,EAAd;AACA,YAAIF,OAAJ,EAAa;AACT3B,eAAG4B,QAAH,CAAYE,YAAZ,GAA2BC,gBAA3B,CAA4CJ,OAA5C;AACH;AACD3B,WAAG4B,QAAH,CAAYI,iBAAZ,GAAgC,IAAIlC,gBAAJ,EAAhC;AACAE,WAAG4B,QAAH,CAAYE,YAAZ,GAA2BG,cAA3B,CAA0CjC,GAAG4B,QAAH,CAAYI,iBAAtD,EAAyEjC,UAAUmC,eAAnF,EAAoG,KAApG;;AAEA,YAAIC,cAAc,SAAdA,WAAc,GAAY;AAC1B,mBAAO,CAAC,KAAKC,KAAb;AACH,SAFD;;AAIA,YAAIC,cAAc,SAAdA,WAAc,CAAUC,KAAV,EAAiB;AAC/B,iBAAKF,KAAL,GAAa,CAACE,KAAd;AACH,SAFD;;AAIA,YAAIC,KAAKvC,GAAGa,IAAH,CAAQT,SAAjB;AACAJ,WAAGwC,EAAH,CAAMC,MAAN,CAAaF,EAAb,EAAiB,UAAjB,EAA6BJ,WAA7B,EAA0CE,WAA1C,EAAuD,KAAvD,EAA8D,IAA9D;;AAEArC,WAAG0C,IAAH,CAAQtC,SAAR,CAAkBuC,MAAlB,GAA2B,UAAUC,OAAV,EAAmBC,GAAnB,EAAwB;AAC/C;AACA,mBAAO3C,QAAQyC,MAAR,CAAeG,IAAf,CAAoB,IAApB,EAA0BF,OAA1B,EAAmCC,GAAnC,CAAP;AACH,SAHD;AAKH,KA3FqB;;AA6FtBnB,aAAS,mBAAY;AAAA;;AACjBnC,oBAAYwD,iBAAZ,CAA8BpD,kBAAkBqD,WAAhD;AACA,YAAIC,OAAO,IAAX;AACA1D,oBAAYmC,OAAZ,CAAoB,UAACwB,GAAD,EAAS;;AAEzB,gBAAIA,IAAIC,MAAR,EAAgB;AACZ5D,4BAAYwD,iBAAZ,CAA8BpD,kBAAkByD,SAAhD;AACAhE,yBAASkC,QAAT,CAAkBE,UAAlB,CAA6B,WAA7B;AACAlC,2BAAWgC,QAAX,CAAoB+B,YAApB,CAAiC,YAAM;AACnC9D,gCAAYwD,iBAAZ,CAA8BpD,kBAAkB2D,aAAhD;AACA/D,gCAAYgE,oBAAZ;AACAhE,gCAAYiE,uBAAZ;AACAjE,gCAAYkE,oBAAZ;AACH,iBALD;AAMA,uBAAKC,WAAL;AACAnE,4BAAYoE,cAAZ;AACH,aAXD,MAWO;AACHvE,yBAASkC,QAAT,CAAkBE,UAAlB,CAA6B,YAA7B;AACAoC,mBAAGC,SAAH,CAAa;AACTC,2BAAO,IADE;AAETC,6BAAS,sBAFA;AAGTC,gCAAY,KAHH;AAITC,2BAJS,mBAIDf,GAJC,EAII;AACT,4BAAIA,IAAIgB,OAAR,EAAiB;AACbjB,iCAAKvB,OAAL;AACA;AACH;AACJ;AATQ,iBAAb;AAWH;AACJ,SA3BD;;AA6BA,aAAKZ,UAAL,GAAkB,IAAlB;AACA,aAAKC,WAAL,GAAmB,EAAnB;AACH,KA/HqB;;AAiItB2C,iBAAa,uBAAY;AACrB,YAAIS,OAAOjF,MAAMkF,OAAN,CAAc,aAAd,CAAX;AACA,YAAID,SAAS,IAAT,IAAiBA,SAASE,SAA9B,EAAyC;AACrCpE,wBAAYqE,OAAZ,CAAoBC,OAAOJ,IAAP,CAApB;AACH,SAFD,MAEO;AACH;AACA;AACA;AACA,gBAAI7E,WAAWgC,QAAX,CAAoBkD,YAApB,KAAqC,IAAzC,EAA+C;AAC3CvE,4BAAYqE,OAAZ,CAAoB,CAApB;AACH,aAFD,MAEO,IAAIhF,WAAWgC,QAAX,CAAoBkD,YAApB,KAAqC,IAAzC,EAA+C;AAClDvE,4BAAYqE,OAAZ,CAAoB,CAApB;AACH,aAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBkD,YAApB,KAAqC,IAAzC,EAA+C;AAClDvE,4BAAYqE,OAAZ,CAAoB,CAApB;AACH,aAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBkD,YAApB,KAAqC,IAAzC,EAA+C;AAClDvE,4BAAYqE,OAAZ,CAAoB,CAApB;AACH,aAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBkD,YAApB,KAAqC,IAAzC,EAA+C;AAClDvE,4BAAYqE,OAAZ,CAAoB,CAApB;AACH,aAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBkD,YAApB,KAAqC,IAAzC,EAA+C;AAClDvE,4BAAYqE,OAAZ,CAAoB,CAApB;AACH,aAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBkD,YAApB,KAAqC,IAAzC,EAA+C;AAClDvE,4BAAYqE,OAAZ,CAAoB,CAApB;AACH,aAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBkD,YAApB,KAAqC,IAAzC,EAA+C;AAClDvE,4BAAYqE,OAAZ,CAAoB,CAApB;AACH,aAFM,MAEA;AACH,oBAAIhF,WAAWgC,QAAX,CAAoBmD,OAApB,KAAgC,IAApC,EAA0C;AACtCxE,gCAAYqE,OAAZ,CAAoB,CAApB;AACH,iBAFD,MAEO,IAAIhF,WAAWgC,QAAX,CAAoBmD,OAApB,KAAgC,IAApC,EAA0C;AAC7CxE,gCAAYqE,OAAZ,CAAoB,CAApB;AACH,iBAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBmD,OAApB,KAAgC,IAApC,EAA0C;AAC7CxE,gCAAYqE,OAAZ,CAAoB,CAApB;AACH,iBAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBmD,OAApB,KAAgC,IAApC,EAA0C;AAC7CxE,gCAAYqE,OAAZ,CAAoB,CAApB;AACH,iBAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBmD,OAApB,KAAgC,IAApC,EAA0C;AAC7CxE,gCAAYqE,OAAZ,CAAoB,CAApB;AACH,iBAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBmD,OAApB,KAAgC,IAApC,EAA0C;AAC7CxE,gCAAYqE,OAAZ,CAAoB,CAApB;AACH,iBAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBmD,OAApB,KAAgC,IAApC,EAA0C;AAC7CxE,gCAAYqE,OAAZ,CAAoB,CAApB;AACH,iBAFM,MAEA,IAAIhF,WAAWgC,QAAX,CAAoBmD,OAApB,KAAgC,IAApC,EAA0C;AAC7CxE,gCAAYqE,OAAZ,CAAoB,CAApB;AACH;AACJ;AAGJ;AACJ,KA/KqB;;AAiLtBI,YAAQ,gBAAUC,EAAV,EAAc;AAClB,YAAItF,WAAWiC,QAAX,IAAuBjC,WAAWiC,QAAX,CAAoBsD,kBAApB,KAA2CvF,WAAWiC,QAAX,CAAoBuD,iBAA1F,EAA6G;AACzGtF,wBAAYwD,iBAAZ,CAA8BpD,kBAAkBmF,eAAhD;AACA,gBAAIxF,WAAWgC,QAAX,CAAoByD,YAAxB,EAAsC;AAClC,oBAAI,CAAC,KAAKC,SAAV,EAAqB;;AAEjB,wBAAIzF,YAAY0F,YAAZ,IAA4BrF,aAAasF,OAA7C,EAAsD;AAClD/D,gCAAQC,GAAR,CAAY,gBAAZ;AACA;AACA,4BAAI+D,OAAO7F,WAAWgC,QAAX,CAAoB8D,UAApB,KAAmC,GAAnC,GAAyC,GAApD;AACAC,4BAAIC,UAAJ,CAAeC,gBAAf,CAAgC,kCAAhC,EACI,gBADJ,EAEI,yCAFJ,EAGI,cAHJ,EAIIJ,IAJJ;;AAMA;AACAE,4BAAIC,UAAJ,CAAeC,gBAAf,CAAgC,kCAAhC,EACI,sBADJ,EAEI,yCAFJ,EAGIjG,WAAWgC,QAAX,CAAoBkE,2BAApB,GAAkD,GAAlD,GAAwD,GAH5D,EAIIlG,WAAWgC,QAAX,CAAoBmE,kBAApB,GAAyC,EAJ7C;;AAMA;AACAJ,4BAAIC,UAAJ,CAAeC,gBAAf,CAAgC,kCAAhC,EACI,gBADJ,EAEI,yCAFJ,EAGI,SAHJ,EAIIG,KAAKC,MAAL,KAAgB,GAAhB,GAAsB,UAAtB,GAAmC,UAJvC;AAKH,qBAvBD,MAwBK,IAAIpG,YAAY0F,YAAZ,IAA4BrF,aAAagG,GAA7C,EAAkD;AACnD,4BAAIT,QAAO7F,WAAWgC,QAAX,CAAoB8D,UAApB,KAAmC,GAAnC,GAAyC,GAApD;AACAC,4BAAIC,UAAJ,CAAeC,gBAAf,CAAgC,UAAhC,EACI,qBADJ,EAEI,cAFJ,EAGIJ,KAHJ;;AAKA;AACAE,4BAAIC,UAAJ,CAAeC,gBAAf,CAAgC,UAAhC,EACI,2BADJ,EAEIjG,WAAWgC,QAAX,CAAoBkE,2BAApB,GAAkD,GAAlD,GAAwD,GAF5D,EAGIlG,WAAWgC,QAAX,CAAoBmE,kBAApB,GAAyC,EAH7C;AAIH;;AAED,wBAAI/F,UAAU4B,QAAV,CAAmBuE,cAAnB,EAAJ,EAAyC;AACrC;AACAnG,kCAAU4B,QAAV,CAAmBwE,eAAnB,GAAqC,IAArC;AACA;AACApG,kCAAU4B,QAAV,CAAmByE,WAAnB;AACA;AACH,qBAND,MAOK;AACDxG,oCAAYwD,iBAAZ,CAA8BpD,kBAAkBqG,iBAAhD;AACA5G,iCAASkC,QAAT,CAAkBE,UAAlB,CAA6B,kBAA7B;AACAxB,2BAAG4B,QAAH,CAAYqE,SAAZ,CAAsB,QAAtB;AACA,6BAAKnF,UAAL,GAAkB,KAAlB;;AAEA,6BAAKoF,YAAL,GAAoB,IAApB;AACH;;AAED,yBAAKlB,SAAL,GAAiB,IAAjB;;AAEA;AACA;AACA;AACA;AACH,iBA9DD,MA+DK;AACD,wBAAI,CAAC,KAAKkB,YAAV,EAAwB;AACpB,4BAAIxG,UAAU4B,QAAV,CAAmBwE,eAAvB,EAAwC;AACpC;AACApG,sCAAU4B,QAAV,CAAmByE,WAAnB;AACH,yBAHD,MAIK;AACD5E,oCAAQC,GAAR,CAAY,gBAAZ,EAA8B1B,UAAU4B,QAAV,CAAmBwE,eAAjD,EAAkExG,WAAWgC,QAAX,CAAoB6E,gBAAtF;AACA;AACA5G,wCAAYwD,iBAAZ,CAA8BpD,kBAAkBqG,iBAAhD;AACA5G,qCAASkC,QAAT,CAAkBE,UAAlB,CAA6B,kBAA7B;AACAxB,+BAAG4B,QAAH,CAAYqE,SAAZ,CAAsB,QAAtB;AACA,iCAAKnF,UAAL,GAAkB,KAAlB;AACA,iCAAKoF,YAAL,GAAoB,IAApB;AACH;AACJ;AAEJ;AACJ;AACJ;;AAED,YAAI,CAAC,KAAKtF,QAAL,CAAcwF,MAAnB,EAA2B;AACvB,iBAAKlF,QAAL,IAAiByD,EAAjB;AACA,gBAAI,KAAKzD,QAAL,IAAiB,CAArB,EAAwB;AACpB,qBAAKN,QAAL,CAAcwF,MAAd,GAAuB,IAAvB;AACH;AACJ;;AAED,YAAI,KAAKtF,UAAT,EAAqB;AACjB,iBAAKC,WAAL,IAAoB4D,EAApB;AACA,gBAAI,KAAK5D,WAAL,IAAoB,CAAxB,EAA2B;AACvB,qBAAKD,UAAL,GAAkB,KAAlB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH;AACJ;AACJ;AAlSqB,CAAT,CAAjB","file":"Launcher.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\common","sourcesContent":["/**\n * @fileoverview Launcher类的实现\n * @author <liqing@gameley.cn> (李清)\n */\n\nconst Tools = require('Tools');\nconst GameData = require('GameData');\nconst ConfigData = require('ConfigData');\nconst PlayerData = require('PlayerData');\nconst PlatformMgr = require('PlatformMgr');\nconst UpdateMgr = require('UpdateMgr');\nconst ShareMgr = require('ShareMgr');\nconst AdvertMgr = require('AdvertMgr');\nconst CustomFunnelEvent = require('Types').CustomFunnelEvent;\nconst PlatformType = require('Types').PlatformType;\nconst Contact = require('Contact');\nconst CollisionManager = require('CollisionManager');\nconst Scheduler = cc.Scheduler;\nconst LanguageMgr = require('LanguageMgr');\nconst v2Proto = cc.Vec2.prototype;\nconst PayMgr = require('PayMgr');\n\n/**\n * Launcher 游戏入口\n */\nconst Launcher = cc.Class({\n    extends: cc.Component,\n\n    statics: {\n\n    },\n\n    properties: {\n        // loadTips: cc.Label,\n        waitNode: cc.Node,\n        needUpdate: false,\n        timeOutTime: 15,\n    },\n\n    onLoad: function () {\n        // if (cc.sys.platform === cc.sys.WECHAT_GAME) {\n        //     const version = wx.getSystemInfoSync().SDKVersion;\n        //     if (Tools.compareVersion(version, '2.1.0') >= 0) {\n        //         const self = this;\n        //         cc.loader.downloader.loadSubpackage('res', function (err) {\n        //             if (err) {\n        //                 return console.error(err);\n        //             }\n        //             // console.log('load subpackage res successfully.');\n\n        //             self.init();\n        //         });\n\n        //     } else {\n        //         wx.showModal({\n        //             title: '提示',\n        //             content: '当前微信版本过低，无法使用该功能，请升级到最新微信版本后重试。'\n        //         });\n        //     }\n        // } else {\n        this.init();\n        // }\n    },\n\n    init: function () {\n        this.waitTime = 2;\n        GameData.init();\n        console.log('curTime: ' + Tools.getTimestampMS());\n        GameData.instance._curTime = Tools.getTimestampMS();\n        PlatformMgr.init();\n        GameData.instance.logUseTime('PlatformMgr init');\n\n        UpdateMgr.checkNewClient(() => {\n\n            PlayerData.init();\n            GameData.instance.logUseTime('PlayerData init');\n\n\n            ShareMgr.init();\n            GameData.instance.logUseTime('ShareMgr init');\n\n            this.doLogin();\n\n            ConfigData.init();\n            GameData.instance.logUseTime('ConfigData init');\n            AdvertMgr.init();\n            PayMgr.init();\n            GameData.instance.logUseTime('AdvertMgr init');\n            // cc.director.preloadScene(\"Battle\");\n        });\n\n\n        cc.Contact = Contact;\n        let manager = cc.director.getCollisionManager();\n        if (manager) {\n            cc.director.getScheduler().unscheduleUpdate(manager);\n        }\n        cc.director._collisionManager = new CollisionManager();\n        cc.director.getScheduler().scheduleUpdate(cc.director._collisionManager, Scheduler.PRIORITY_SYSTEM, false);\n\n        var getRotation = function () {\n            return -this.angle;\n        };\n\n        var setRotation = function (value) {\n            this.angle = -value;\n        };\n\n        var _p = cc.Node.prototype;\n        cc.js.getset(_p, 'rotation', getRotation, setRotation, false, true);\n\n        cc.Vec3.prototype.rotate = function (radians, out) {\n            // cc.warnID(1408, 'vec3.rotate', 'v2.1', 'cc.v2(selfVector).rotate(radians, out)');\n            return v2Proto.rotate.call(this, radians, out);\n        }\n\n    },\n\n    doLogin: function () {\n        PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.Login_Start);\n        var self = this;\n        PlatformMgr.doLogin((res) => {\n\n            if (res.result) {\n                PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.Login_Suc);\n                GameData.instance.logUseTime('login suc');\n                PlayerData.instance.initUserData(() => {\n                    PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.Load_UserData);\n                    PlatformMgr.hawkeye_report_login();\n                    PlatformMgr.hawkeye_report_share_in();\n                    PlatformMgr.hawkeye_report_level();\n                });\n                this.setLanguage();\n                PlatformMgr.af_report_user();\n            } else {\n                GameData.instance.logUseTime('login fail');\n                wx.showModal({\n                    title: '提示',\n                    content: '网络连接似乎有问题，请检查网络设置后重试',\n                    showCancel: false,\n                    success(res) {\n                        if (res.confirm) {\n                            self.doLogin();\n                            //   console.log('用户点击确定')\n                        }\n                    }\n                });\n            }\n        });\n\n        this.needUpdate = true;\n        this.timeOutTime = 15;\n    },\n\n    setLanguage: function () {\n        var lang = Tools.getItem('curLanguage');\n        if (lang !== null && lang !== undefined) {\n            LanguageMgr.setLang(Number(lang));\n        } else {\n            // 先判断 languageCode\n            // 如果都没有 在判断一轮 country\n            // 如果还都没有 就显示默认英文\n            if (PlayerData.instance.languageCode === 'ja') {\n                LanguageMgr.setLang(1);\n            } else if (PlayerData.instance.languageCode === 'ko') {\n                LanguageMgr.setLang(2);\n            } else if (PlayerData.instance.languageCode === 'de') {\n                LanguageMgr.setLang(3);\n            } else if (PlayerData.instance.languageCode === 'ru') {\n                LanguageMgr.setLang(4);\n            } else if (PlayerData.instance.languageCode === 'zh') {\n                LanguageMgr.setLang(5);\n            } else if (PlayerData.instance.languageCode === 'es') {\n                LanguageMgr.setLang(6);\n            } else if (PlayerData.instance.languageCode === 'fr') {\n                LanguageMgr.setLang(7);\n            } else if (PlayerData.instance.languageCode === 'pt') {\n                LanguageMgr.setLang(8);\n            } else {\n                if (PlayerData.instance.country === 'JP') {\n                    LanguageMgr.setLang(1);\n                } else if (PlayerData.instance.country === 'KR') {\n                    LanguageMgr.setLang(2);\n                } else if (PlayerData.instance.country === 'DE') {\n                    LanguageMgr.setLang(3);\n                } else if (PlayerData.instance.country === 'RU') {\n                    LanguageMgr.setLang(4);\n                } else if (PlayerData.instance.country === 'TW') {\n                    LanguageMgr.setLang(5);\n                } else if (PlayerData.instance.country === 'ES') {\n                    LanguageMgr.setLang(6);\n                } else if (PlayerData.instance.country === 'FR') {\n                    LanguageMgr.setLang(7);\n                } else if (PlayerData.instance.country === 'PT') {\n                    LanguageMgr.setLang(8);\n                }\n            }\n\n\n        }\n    },\n\n    update: function (dt) {\n        if (ConfigData.instance && ConfigData.instance.loadingConfigCount === ConfigData.instance.loadedConfigCount) {\n            PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.Load_ConfigData);\n            if (PlayerData.instance.loadComplete) {\n                if (!this.isloading) {\n\n                    if (PlatformMgr.platformType == PlatformType.ANDROID) {\n                        console.log(\"---打开时，同步信息---\")\n                        //是否是第一天的用户\n                        let frst = PlayerData.instance.isFirstDay() ? \"1\" : \"0\"\n                        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AdManage\",\n                            \"FAUserProperty\",\n                            \"(Ljava/lang/String;Ljava/lang/String;)V\",\n                            \"is_firstopen\",\n                            frst)\n\n                        //同步每日广告收益\n                        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AdManage\",\n                            \"FATotalRevenueSwitch\",\n                            \"(Ljava/lang/String;Ljava/lang/String;)V\",\n                            PlayerData.instance.dayCanReportTotalAdsRevenue ? \"1\" : \"0\",\n                            PlayerData.instance.dayTotalAdsRevenue + \"\")\n\n                        //测试，随机ab——test\n                        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AdManage\",\n                            \"FAUserProperty\",\n                            \"(Ljava/lang/String;Ljava/lang/String;)V\",\n                            \"ab_test\",\n                            Math.random() > 0.5 ? \"1.0.37_A\" : \"1.0.37_B\")\n                    }\n                    else if (PlatformMgr.platformType == PlatformType.IOS) {\n                        let frst = PlayerData.instance.isFirstDay() ? \"1\" : \"0\"\n                        jsb.reflection.callStaticMethod(\"AdManage\",\n                            \"FAUserProperty:sec:\",\n                            \"is_firstopen\",\n                            frst)\n\n                        //同步每日广告收益\n                        jsb.reflection.callStaticMethod(\"AdManage\",\n                            \"FATotalRevenueSwitch:sec:\",\n                            PlayerData.instance.dayCanReportTotalAdsRevenue ? \"1\" : \"0\",\n                            PlayerData.instance.dayTotalAdsRevenue + \"\")\n                    }\n\n                    if (AdvertMgr.instance.getOpenAdRules()) {\n                        ///////展示开屏广告////////////\n                        AdvertMgr.instance.isShowingOpenAd = true\n                        // PlayerData.instance.isShowOpenAdCold = true\n                        AdvertMgr.instance.showOpenApp()\n                        //////////////////////////////\n                    }\n                    else {\n                        PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.Switch_BattleFire);\n                        GameData.instance.logUseTime('loadScene Battle');\n                        cc.director.loadScene(\"Battle\");\n                        this.needUpdate = false;\n\n                        this.isShowOpenAd = true\n                    }\n\n                    this.isloading = true;\n\n                    // PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.Switch_BattleFire);\n                    // GameData.instance.logUseTime('loadScene Battle');\n                    // cc.director.loadScene(\"Battle\");\n                    // this.needUpdate = false;\n                }\n                else {\n                    if (!this.isShowOpenAd) {\n                        if (AdvertMgr.instance.isShowingOpenAd) {\n                            //没收到广告结果前，继续调用播放\n                            AdvertMgr.instance.showOpenApp()\n                        }\n                        else {\n                            console.log(\" isShowOpenAd \", AdvertMgr.instance.isShowingOpenAd, PlayerData.instance.isShowOpenAdCold)\n                            //开屏广告之后加载场景\n                            PlatformMgr.notifyFunnelEvent(CustomFunnelEvent.Switch_BattleFire);\n                            GameData.instance.logUseTime('loadScene Battle');\n                            cc.director.loadScene(\"Battle\");\n                            this.needUpdate = false;\n                            this.isShowOpenAd = true\n                        }\n                    }\n\n                }\n            }\n        }\n\n        if (!this.waitNode.active) {\n            this.waitTime -= dt;\n            if (this.waitTime <= 0) {\n                this.waitNode.active = true;\n            }\n        }\n\n        if (this.needUpdate) {\n            this.timeOutTime -= dt;\n            if (this.timeOutTime <= 0) {\n                this.needUpdate = false;\n\n                // wx.showModal({\n                //     title: '提示',\n                //     content: '网络连接似乎有问题，请检查网络设置后重试',\n                //     showCancel: false,\n                //     success(res) {\n                //         if (res.confirm) {\n                //             cc.director.loadScene(\"Launcher\");\n                //             //   console.log('用户点击确定')\n                //         }\n                //     }\n                // });\n            }\n        }\n    },\n});"]}