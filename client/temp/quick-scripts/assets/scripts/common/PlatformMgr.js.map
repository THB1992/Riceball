{"version":3,"sources":["PlatformMgr.js"],"names":["PlatformType","require","ChannelType","Tools","GameData","OpenDataMsgType","CustomFunnelEvent","mta","OSType","PlatformMgr","cc","Class","statics","eolinkerApp","k6_app","k6_baseUrl","k6_baseUrl_test","hawkeye_baseUrl","hawkeye_app","gm_baseUrl","hawkeye_gameid","k6_Token","hawkeye_registerTime","hawkeye_level","eolinkerToken","eolinkerSettings","eolinkerUpdateTimestamp","eolinkerChannelCode","oldVisitCids","timeDefence","reportFunnels","uid","cid","shareUid","shareType","osType","UNKNOWN","isDevTool","isReportAnalytics","heartbeatSendTimestamp","heartbeatInterval","channelType","RiceBall_2","open_nft_moudle","nft_balance_ids","nft_user_datas","init","sys","platform","WECHAT_GAME","platformType","WECHAT","res","wx","getSystemInfoSync","systemInfo","CC_DEBUG","console","log","system","systemSoftware","toLowerCase","indexOf","IOS","ANDROID","getUpdateManager","updateManager","onCheckForUpdate","onUpdateReady","applyUpdate","onUpdateFailed","os","OS_IOS","OS_ANDROID","RiceBall","RiceBall_1","BROWSER","setPlayerData","playerData","isIOS","isIosApp","isAndroidApp","isApp","isAndroidRiceBall1","doLogin","callback","param","wxLogin","result","k6_userDate","is_new","browserLogin","uuid","getItem","newUUID","jsb","reflection","callStaticMethod","setItem","code","k6_login","obj","instance","isShowLog","JSON","stringify","token","undefined","errMsg","login","success","fail","oldUserVisit","includes","push","createEolinkerRequest","openStatis","scene","eolinkerScene","eolinkerShare","shareRecord","share_point","share_picture","enlinkerGameNumber","enlinkerUserLevel","eolinkerUpdateDate","app","version","serverTime","data","now_time","curTime","Number","Date","getTime","updateUserInfo","userInfo","nickname","nickName","avatar","avatarUrl","gender","country","province","city","url","createHttpRequest","error","updateEolinkerSettings","timestamp","getTimestampMS","successCallback","failCallback","method","e","request","statusCode","header","xhr","loader","getXMLHttpRequest","open","onreadystatechange","readyState","status","response","responseText","responseData","length","parse","onerror","ontimeout","sendStr","send","hawkeye_getConfig","hawkeye_report","gameId","userId","registerTime","level","hawkeye_report_login","reportId","hawkeye_report_heartbeat","hawkeye_report_game","time","hawkeye_report_share_out","sharePicId","hawkeye_report_share_in","hawkeye_report_level","hawkeye_report_advert_open","advertId","hawkeye_report_advert_show","hawkeye_report_advert_end","hawkeye_report_purchase","money","id","hawkeye_report_funnel","customEvent","hawkeyeFunnelcontains","addHawkeyeFunnelIDs","toString","k6_uploadData","k6_downloadData","errCallback","sharer","ios","adStatis","navIf","spotId","middle_id","appid","ad_appid","distid","middle_appid","ad_id","navgateTo","susCbk","failCbk","path","search","RegExp","Math","round","substr","window","navigateToMiniProgram","appId","onPreView","preIf","baseUrl","previewImage","current","urls","showOpenDataContext","qq","getOpenDataContext","postMessage","messageType","Show","closeOpenDataContext","Close","leftOpenDataContext","Left","rightOpenDataContext","Right","showMiniOpenDataContext","Mini","closeMiniOpenDataContext","CloseMini","setUserCloudStorage","rankScore","kvList","kvData","key","value","timeStampData","uidData","KVDataList","complete","notifyFunnelEvent","mta_report_funnel","Event","stat","getAreaInfo","cityInfo","getShareScore","score","af_report_user","getInviteInfo","newUsers","info","iconUrl","resetShareDailyRequest","isPlatformUseWxApi","reportAnalytics","setHolidayScore","getHolidayPKRank","getHolidayWorldRank","getHolidayPKReward","getHolidayWorldReward","getHolidayWorldRewardInfo","getCountry","getLanguageCode","language","openStoreComment","openURL","connectBitverse","web3_gm_api","pramStr","cb1","cb2","qureyBalance","rsp","dataStr","id_index_ar","split","ids","index","_strs","_i","tokenid","hasOwnProperty","checkUserNFT","adress","bitverseWallet","requestNFTGet","getWay","goodsId","goodsName","encodeURIComponent","name","AdvertMgr","showUITips","getStringByFormat"],"mappings":"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","file":"PlatformMgr.js","sourceRoot":"..\\..\\..\\..\\..\\assets\\scripts\\common","sourcesContent":["/**\n * @fileoverview PlatformMgr\n * @author <meifan@gameley.cn> (梅凡)\n */\n\nconst PlatformType = require('Types').PlatformType;\nconst ChannelType = require('Types').ChannelType;\nconst Tools = require('Tools');\nconst GameData = require('GameData');\nconst OpenDataMsgType = require('Types').OpenDataMsgType;\nconst CustomFunnelEvent = require('Types').CustomFunnelEvent;\nconst mta = require('mta_analysis');\nconst OSType = require('Types').OSType;\n\nconst PlatformMgr = cc.Class({\n    statics: {\n        // baseUrl: \"https://gamebix.oss-cn-shenzhen.aliyuncs.com/\", //需要加进mp后台服务器request、downloadFile合法域名里\n        eolinkerApp: 'knife666',\n        k6_app: 'knife666',\n        // k6_baseUrl: 'https://knife666.boomegg.cn/', //\"http://192.168.0.66:10010/\"\n        k6_baseUrl: 'https://knife666.boomegg.cn/', //\"http://192.168.0.66:10010/\"\n        k6_baseUrl_test: 'https://k6-front.drwho.mobi:14010/', //测试环境下的服务器地址 https://k6-front.drwho.mobi:14010/\n        // http://192.168.1.148:10010/\n        hawkeye_baseUrl: \"https://report.drwho.mobi/\",\n        // hawkeye_configUrl: \"http://hawkeye.drwho.mobi/project-manager/\",\n        hawkeye_app: 'knife666outsea',\n        gm_baseUrl: \"https://verify.riceballgames.com\",\n        hawkeye_gameid: 1002,\n        k6_Token: '',\n        hawkeye_registerTime: 0,\n        hawkeye_level: 1,\n        eolinkerToken: '',\n        eolinkerSettings: null,\n        eolinkerUpdateTimestamp: 0,\n        eolinkerChannelCode: '',\n        oldVisitCids: [],\n        timeDefence: 0,\n        reportFunnels: [],\n        uid: '',\n        cid: 'lSeLUbAWNZ',\n        shareUid: '',\n        shareType: 0,\n        /** 系统类型 @type {OSType} */\n        osType: OSType.UNKNOWN,\n        /** 是否是开发者工具 */\n        isDevTool: false,\n        /** 是否上报小游戏启动时间 */\n        isReportAnalytics: false,\n        heartbeatSendTimestamp: 0,\n        heartbeatInterval: 300000,\n        /** 默认渠道 */\n        channelType: ChannelType.RiceBall_2,\n        /**nft功能开关 */\n        open_nft_moudle: false,\n        /**nft测试：余额 */\n        nft_balance_ids: {},\n        /**nft测试：玩家购买数据 */\n        nft_user_datas: {},\n        // E:/CocosCreator_v2.2.0-alpha.3_20190817_win/CocosCreator_v2.2.0-alpha.3_20190817_win/resources/\n        init: function () {\n\n            // if (GameData.instance.isEnvironmentTest()) {\n            //     PlatformMgr.k6_baseUrl = PlatformMgr.k6_baseUrl_test;\n            // }\n\n            if (cc.sys.platform === cc.sys.WECHAT_GAME) {\n                PlatformMgr.platformType = PlatformType.WECHAT;\n\n                const res = wx.getSystemInfoSync();\n                PlatformMgr.systemInfo = res;\n\n                if (CC_DEBUG) {\n                    console.log('getSystemInfo success, info:\\n', res);\n                }\n\n                if (res.system) {\n\n                    PlatformMgr.systemSoftware = res.system;\n                    if (PlatformMgr.systemSoftware.toLowerCase().indexOf('ios') >= 0) {\n                        PlatformMgr.osType = OSType.IOS;\n                    } else {\n                        PlatformMgr.osType = OSType.ANDROID;\n                    }\n                }\n\n                // 微信版本更新处理\n                if (typeof wx.getUpdateManager === 'function') {\n                    const updateManager = wx.getUpdateManager();\n\n                    updateManager.onCheckForUpdate(function (res) {\n                        // 请求完新版本信息的回调\n                        console.log('onCheckForUpdate:', res);\n                    });\n\n                    updateManager.onUpdateReady(function () {\n                        console.log('onUpdateReady');\n                        // wx.showModal({\n                        //     title: '更新提示',\n                        //     content: '新版本已经准备好，即将重启应用',\n                        //     showCancel: false,\n                        //     success(res) {\n                        //         if (res.confirm) {\n                        //         }\n                        //     }\n                        // });\n\n                        // 新的版本已经下载好，调用 applyUpdate 应用新版本并重启\n                        updateManager.applyUpdate();\n                    });\n\n                    updateManager.onUpdateFailed(function () {\n                        // 新的版本下载失败\n                        console.log('onUpdateFailed');\n                    });\n                }\n\n            } else if (cc.sys.os === cc.sys.OS_IOS) {\n                PlatformMgr.platformType = PlatformType.IOS;\n            } else if (cc.sys.os === cc.sys.OS_ANDROID) {\n                PlatformMgr.platformType = PlatformType.ANDROID;\n\n                PlatformMgr.hawkeye_gameid = 1004;\n\n                // PlatformMgr.channelType = ChannelType.RiceBall;\n\n                PlatformMgr.channelType = ChannelType.RiceBall_2;\n\n                switch (PlatformMgr.channelType) {\n                    case ChannelType.RiceBall:\n                        PlatformMgr.cid = 'lSeLUbAWNZ';\n                        break;\n                    case ChannelType.RiceBall_1:\n                        PlatformMgr.cid = 'bQj2uesh9C';\n                        break;\n                    case ChannelType.RiceBall_2:\n                        PlatformMgr.cid = 'lSeLUbAWNZ';\n                        break;\n                }\n\n            } else {\n                PlatformMgr.platformType = PlatformType.BROWSER;\n            }\n\n            if (PlatformMgr.systemInfo && PlatformMgr.systemInfo.platform === 'devtools') {\n                PlatformMgr.isDevTool = true;\n                // PlatformMgr.isUserRefuseUserInfo = true;\n            }\n\n            Tools.init(PlatformMgr.platformType, PlatformMgr.systemInfo);\n\n        },\n\n        setPlayerData: function (playerData) {\n            PlatformMgr.playerData = playerData;\n        },\n\n        isIOS: function () {\n            return PlatformMgr.osType === OSType.IOS;;\n        },\n\n        isIosApp: function () {\n            return PlatformMgr.platformType === PlatformType.IOS;\n        },\n\n        isAndroidApp: function () {\n            return PlatformMgr.platformType === PlatformType.ANDROID;\n        },\n\n        isApp: function () {\n            return PlatformMgr.isIosApp() || PlatformMgr.isAndroidApp();\n        },\n\n        isAndroidRiceBall1() {\n            return PlatformMgr.channelType === ChannelType.RiceBall_1;\n        },\n\n        doLogin: function (callback, param) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    PlatformMgr.wxLogin((res) => {\n                        if (res.result) {\n                            console.log('login success');\n                            PlatformMgr.k6_userDate();\n                            // PlatformMgr.oldUserVisit();\n                            // PlatformMgr.eolinkerShare();\n                            // PlatformMgr.openStatis();\n                            if (PlatformMgr.is_new) {\n                                // PlatformMgr.enlinkerGameNumber();\n                                // PlatformMgr.enlinkerUserLevel();\n                            }\n                            if (callback) callback(res);\n                            // PlatformMgr.getSessionID((res) => {\n                            //     if (res.result) {\n                            //         PlatformMgr.sessionID = res.sessionID;\n                            //         PlatformMgr.channelOpenID = res.openID;\n                            //         PlatformMgr.getUserInfo((res) => {\n                            //             if (res.result && res.userInfo && res.userInfo.nickName) PlatformMgr.isAuthed = true;\n                            //             callback(res);\n                            //         }, param);\n                            //     } else {\n                            //         callback(res);\n                            //     }\n                            // });\n                        } else {\n                            console.log('login fail');\n                            if (callback) callback(res);\n                            // if (callback) callback({\n                            //     result: false,\n                            //     errType: LoginErrorType.SESSION_CHANNEL,\n                            //     errMsg: res.errMsg,\n                            // });\n                        }\n                    });\n                    break;\n                }\n                case PlatformType.BROWSER: {\n                    PlatformMgr.browserLogin((res) => {\n                        if (res.result) {\n                            console.log('login success');\n                            PlatformMgr.k6_userDate();\n                            if (PlatformMgr.is_new) {}\n                            if (callback) callback(res);\n\n                        } else {\n                            console.log('login fail');\n                            if (callback) callback(res);\n                        }\n                    });\n                    break;\n                }\n                case PlatformType.IOS:\n                case PlatformType.ANDROID: {\n                    let uuid = Tools.getItem('user_uuid');\n                    console.log('uuid: ' + uuid);\n\n                    if (uuid) {\n                        PlatformMgr.k6_Token = uuid; //obj.token;\n                        PlatformMgr.is_new = false; //obj.is_new;\n                        PlatformMgr.uid = uuid; //obj.uid;\n                    } else {\n                        // 新玩家\n                        let newUUID = PlatformMgr.isAndroidApp() ? jsb.reflection.callStaticMethod(\n                            'org/cocos2dx/javascript/Utils',\n                            'getUUID',\n                            '()Ljava/lang/String;'\n                        ) : jsb.reflection.callStaticMethod(\n                            'Utils',\n                            'getUUID'\n                        );\n                        console.log('newUUID: ' + newUUID);\n\n                        PlatformMgr.k6_Token = newUUID; //obj.token;\n                        PlatformMgr.is_new = true; //obj.is_new;\n                        PlatformMgr.uid = newUUID; //obj.uid;\n\n                        Tools.setItem('user_uuid', newUUID);\n                    }\n\n                    if (callback) callback({\n                        result: true\n                    });\n                    break;\n                }\n                default: {\n                    if (callback) callback({\n                        result: true\n                    });\n                    break;\n                }\n            }\n        },\n\n        //浏览器模拟微信登录\n        browserLogin: function (callback) {\n            var res = {\n                code: '11122222qwewww5'\n            }\n            PlatformMgr.code = res.code;\n\n            PlatformMgr.k6_login({\n                // code: 'x9ae2a3f4',\n                code: res.code,\n                // cid: PlatformMgr.eolinkerChannelCode,\n            }, (obj) => {\n                if (GameData.instance.isShowLog()) {\n                    console.log('k6_login login resonse data:' + JSON.stringify(obj));\n                }\n                if (obj.token !== undefined && obj.is_new !== undefined && obj.uid != undefined) {\n                    PlatformMgr.k6_Token = obj.token;\n                    PlatformMgr.is_new = obj.is_new;\n                    PlatformMgr.uid = obj.uid;\n                    if (callback) {\n                        callback({\n                            result: true\n                        });\n                    }\n                } else {\n                    // 网络连接成功 但sdk登录失败\n                    if (callback) {\n                        callback({\n                            result: true,\n                            errMsg: 'SDK登录失败，请稍后重试'\n                        });\n                    }\n                }\n            }, () => {\n                if (callback) {\n                    callback({\n                        result: true,\n                        errMsg: 'SDK登录失败，请稍后重试'\n                    });\n                }\n            });\n        },\n\n        // 发行SDK登录\n        wxLogin: function (callback) {\n            wx.login({\n                success: (res) => {\n                    PlatformMgr.code = res.code;\n\n                    PlatformMgr.k6_login({\n                        // code: 'x9ae2a3f4',\n                        code: res.code,\n                        // cid: PlatformMgr.eolinkerChannelCode,\n                    }, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('k6_login login resonse data:' + JSON.stringify(obj));\n                        }\n                        if (obj.token !== undefined && obj.is_new !== undefined && obj.uid != undefined) {\n                            PlatformMgr.k6_Token = obj.token;\n                            PlatformMgr.is_new = obj.is_new;\n                            PlatformMgr.uid = obj.uid;\n                            if (callback) {\n                                callback({\n                                    result: true\n                                });\n                            }\n                        } else {\n                            // 网络连接成功 但sdk登录失败\n                            if (callback) {\n                                callback({\n                                    result: false,\n                                    errMsg: 'SDK登录失败，请稍后重试'\n                                });\n                            }\n                        }\n                    }, () => {\n                        if (callback) {\n                            callback({\n                                result: false,\n                                errMsg: 'SDK登录失败，请稍后重试'\n                            });\n                        }\n                    });\n                },\n                fail: () => {\n                    if (callback) {\n                        callback({\n                            result: false,\n                            errMsg: '微信登录失败，请稍后重试',\n                        });\n                    }\n                }\n            });\n        },\n\n        oldUserVisit: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    if (PlatformMgr.eolinkerChannelCode && PlatformMgr.eolinkerChannelCode !== '' && PlatformMgr.oldVisitCids && !PlatformMgr.oldVisitCids.includes(PlatformMgr.eolinkerChannelCode)) {\n                        PlatformMgr.oldVisitCids.push(PlatformMgr.eolinkerChannelCode);\n                        PlatformMgr.createEolinkerRequest('user/old-user-visit', {\n                            token: PlatformMgr.eolinkerToken,\n                            cid: PlatformMgr.eolinkerChannelCode\n                        }, (obj) => {\n                            if (GameData.instance.isShowLog()) {\n                                console.log('eolinker old-user-visit resonse data:' + JSON.stringify(obj));\n                            }\n                        });\n                    }\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        },\n\n        openStatis() { //打开应用上报\n            PlatformMgr.createEolinkerRequest('/data-statistics/open-app', {\n                // this.$post(this.constellUrl + '/data-statistics/open-app', {\n                // app: this.appName,\n                token: PlatformMgr.eolinkerToken,\n                scene: PlatformMgr.eolinkerScene\n            }, res => {\n                if (GameData.instance.isShowLog()) {\n                    console.log(\"eolinker openStatis 打开应用上报:\", res);\n                }\n            });\n        },\n\n        /**\n         * 判断此次玩家登录是否由分享点击进入并上传分享数据\n         */\n        eolinkerShare: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    if (PlatformMgr.shareRecord && PlatformMgr.shareRecord !== '' && PlatformMgr.eolinkerToken && PlatformMgr.eolinkerToken != '') {\n\n                        PlatformMgr.createEolinkerRequest('knife666/share', {\n                            token: PlatformMgr.eolinkerToken,\n                            shareRecord: PlatformMgr.shareRecord,\n                            share_point: PlatformMgr.share_point,\n                            share_picture: PlatformMgr.share_picture\n                        }, (obj) => {\n                            if (GameData.instance.isShowLog()) {\n                                console.log('eolinker eolinkerShare resonse data:' + JSON.stringify(obj));\n                            }\n                        });\n                    }\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        },\n\n        /**\n         * 记录新增玩家首日战斗场次\n         */\n        enlinkerGameNumber: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    PlatformMgr.createEolinkerRequest('knife666/game-number', {\n                        token: PlatformMgr.eolinkerToken,\n                    }, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('eolinker enlinkerGameNumber resonse data:' + JSON.stringify(obj));\n                        }\n                    });\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        },\n\n        /**\n         * 记录新增玩家首日段位等级\n         */\n        enlinkerUserLevel: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    PlatformMgr.createEolinkerRequest('knife666/user-level', {\n                        token: PlatformMgr.eolinkerToken,\n                    }, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('eolinker enlinkerUserLevel resonse data:' + JSON.stringify(obj));\n                        }\n                    });\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        },\n\n        // 发行SDK获取服务器时间戳\n        eolinkerUpdateDate: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    PlatformMgr.createEolinkerRequest('user/date', {\n                        app: PlatformMgr.eolinkerApp,\n                        version: '',\n                    }, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('eolinker date resonse data:' + JSON.stringify(obj));\n                        }\n                        var serverTime = obj.data.now_time * 1000;\n                        var curTime = Number(new Date().getTime());\n                        PlatformMgr.timeDefence = curTime - serverTime;\n                        if (callback) callback();\n                        if (GameData.instance.isShowLog()) {\n                            console.log(new Date(curTime), new Date(serverTime));\n                            console.log('时间差：' + PlatformMgr.timeDefence)\n                        }\n                    });\n                    break;\n                }\n                default: {\n                    if (callback) callback();\n                    break;\n                }\n            }\n\n        },\n\n        updateUserInfo: function (userInfo) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    PlatformMgr.createEolinkerRequest('user/update-user-info', {\n                        token: PlatformMgr.eolinkerToken,\n                        cid: PlatformMgr.eolinkerChannelCode,\n                        nickname: userInfo.nickName,\n                        avatar: userInfo.avatarUrl,\n                        gender: userInfo.gender,\n                        country: userInfo.country,\n                        province: userInfo.province,\n                        city: userInfo.city\n                    }, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('eolinker updateUserInfo resonse data:' + JSON.stringify(obj));\n                        }\n                    });\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        },\n\n        createEolinkerRequest: function (url, param, callback) {\n            param.app = PlatformMgr.eolinkerApp;\n            PlatformMgr.createHttpRequest('https://constellation.mamapai.net/' + url, param, (data) => {\n                if (callback) callback(data);\n            }, () => {\n                if (GameData.instance.isShowLog()) {\n                    console.error('createEolinkerRequest error, url:' + url + ' param:' + JSON.stringify(param));\n                }\n            });\n        },\n\n        /** 更新发行SDK配置 */\n        updateEolinkerSettings: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    var timestamp = Tools.getTimestampMS();\n                    if (PlatformMgr.eolinkerSettings === null || timestamp - PlatformMgr.eolinkerUpdateTimestamp >= 0 /*10 * 1000*/ ) {\n                        // 发行SDK获取配置\n                        PlatformMgr.createEolinkerRequest('common/get-config', {}, (data) => {\n                            if (GameData.instance.isShowLog()) {\n                                console.log('settings:' + JSON.stringify(data));\n                            }\n                            PlatformMgr.eolinkerSettings = data;\n                            if (callback) callback(PlatformMgr.eolinkerSettings);\n                            PlatformMgr.eolinkerUpdateTimestamp = Tools.getTimestampMS();\n                        });\n                    } else {\n                        if (callback) callback(PlatformMgr.eolinkerSettings);\n                    }\n                }\n                break;\n            default:\n                break;\n            }\n        },\n\n        /**\n         * 创建http请求\n         * @param {string} url url\n         * @param {object} data body数据\n         * @param {function} successCallback 成功回调\n         * @param {function} failCallback 失败回调\n         * @param {string} method http方式:'POST'||'GET'\n         */\n        createHttpRequest: function (url, data, successCallback, failCallback, method = 'POST') {\n            if (GameData.instance.isShowLog()) {\n                try {\n                    console.log('createHttpRequest url:' + url + ' data:' + JSON.stringify(data));\n                } catch (e) {\n                    console.log('log excepiton:' + e);\n                }\n            }\n\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n\n                    wx.request({\n                        url: url,\n                        data: data,\n                        method: method,\n                        success: (res) => {\n                            cc.log('http success, response:', res);\n                            if (successCallback) {\n                                successCallback(res.data, res.statusCode, res.header);\n                            }\n                            // const responseData = res.data;\n                        },\n                        fail: (res) => {\n                            cc.log('http fail, response:', res);\n                            if (failCallback) {\n                                failCallback(res);\n                            }\n                        },\n                    });\n                    break;\n                }\n                default: {\n                    var xhr = cc.loader.getXMLHttpRequest();\n                    xhr.open(method, url, true);\n                    xhr.onreadystatechange = function () {\n                        if (xhr.readyState === 4 && (xhr.status >= 200 && xhr.status < 400)) {\n                            // console.log('http       success');\n                            var response = xhr.responseText;\n                            // console.log('http success, response:' + response);\n                            // if (CC_DEBUG) cc.log('http success, response:' + response);\n                            var responseData = null;\n                            try {\n                                if (response && response.length > 0) {\n                                    responseData = JSON.parse(response);\n                                }\n                            } catch (e) {\n                                cc.error('parse reponse to json exception:' + e);\n                            }\n                            if (successCallback) {\n                                successCallback(responseData, xhr.status, null);\n                            }\n                        } else {\n                            // console.log('http       other status');\n                            // switch (xhr.readyState) {\n                            //     case 0: {\n                            //         CC_DEBUG && cc.log(\"http 等待send方法的调用\");\n                            //         break;\n                            //     }\n                            //     case 1: {\n                            //         CC_DEBUG && cc.log(\"http 正在发送请求\");\n                            //         break;\n                            //     }\n                            //     case 2: {\n                            //         CC_DEBUG && cc.log(\"http 已获取响应头\");\n                            //         break;\n                            //     }\n                            //     case 3: {\n                            //         CC_DEBUG && cc.log(\"http 正在下载响应体\");\n                            //         break;\n                            //     }\n                            //     default: {\n                            //         CC_DEBUG && cc.log(\"http onreadystatechange:\" + xhr.readyState);\n                            //         break;\n                            //     }\n                            // }\n                        }\n                    };\n                    xhr.onerror = function () {\n                        cc.log('http fail onerror');\n                        if (failCallback) {\n                            failCallback();\n                        }\n                    };\n                    xhr.ontimeout = function () {\n                        cc.log('http fail time out');\n                        if (failCallback) {\n                            failCallback();\n                        }\n                    };\n                    var sendStr = JSON.stringify(data);\n                    xhr.send(sendStr);\n                    break;\n                }\n            }\n        },\n\n        hawkeye_getConfig: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT:\n                case PlatformType.ANDROID:\n                case PlatformType.IOS:\n                case PlatformType.BROWSER: {\n                    var timestamp = Tools.getTimestampMS();\n                    if (PlatformMgr.eolinkerSettings === null || timestamp - PlatformMgr.eolinkerUpdateTimestamp >= 0 /*10 * 1000*/ ) {\n                        // 获取配置\n                        var url = PlatformMgr.hawkeye_baseUrl + 'manager/getConfig';\n                        var param = {};\n                        param.app = PlatformMgr.hawkeye_app;\n                        PlatformMgr.createHttpRequest(url, param, (data) => {\n                            if (GameData.instance.isShowLog()) {\n                                console.log('settings:' + JSON.stringify(data));\n                            }\n                            PlatformMgr.eolinkerSettings = data;\n                            if (callback) callback(PlatformMgr.eolinkerSettings);\n                            PlatformMgr.eolinkerUpdateTimestamp = Tools.getTimestampMS();\n                        }, () => {\n                            if (GameData.instance.isShowLog()) {\n                                console.error('hawkeye_getConfig error, url:' + url + ' param:' + JSON.stringify(param));\n                            }\n                        });\n                    } else {\n                        if (callback) callback(PlatformMgr.eolinkerSettings);\n                    }\n                }\n                break;\n            default:\n                break;\n            }\n        },\n\n        hawkeye_report: function (param) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT:\n                case PlatformType.ANDROID:\n                case PlatformType.IOS: {\n                    // 获取配置\n                    var url = PlatformMgr.hawkeye_baseUrl + 'report';\n                    // var param = {};\n                    // param.app = PlatformMgr.hawkeye_app;\n                    param.gameId = PlatformMgr.hawkeye_gameid;\n                    param.userId = PlatformMgr.uid;\n                    param.registerTime = PlatformMgr.hawkeye_registerTime;\n                    param.level = PlatformMgr.hawkeye_level;\n                    param.cid = PlatformMgr.cid;\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('hawkeye_report resonse data:' + JSON.stringify(obj));\n                        }\n                    }, () => {\n                        if (GameData.instance.isShowLog()) {\n                            console.error('hawkeye_report error, url:' + url + ' param:' + JSON.stringify(param));\n                        }\n                    });\n                    break;\n                }\n                default: {\n                    break;\n                }\n            }\n        },\n\n        hawkeye_report_login: function () {\n            PlatformMgr.hawkeye_report({\n                reportId: '01'\n            });\n        },\n\n        hawkeye_report_heartbeat: function () {\n            PlatformMgr.hawkeye_report({\n                reportId: '02'\n            });\n        },\n\n        /**\n         * 打点局数和时长\n         * @param {*} time 单位（秒） \n         */\n        hawkeye_report_game: function (time) {\n            PlatformMgr.hawkeye_report({\n                reportId: '03-000-' + time\n            });\n        },\n\n        hawkeye_report_share_out: function (shareType, sharePicId) {\n            PlatformMgr.hawkeye_report({\n                reportId: '05-00-' + shareType + '-' + sharePicId\n            });\n        },\n\n        hawkeye_report_share_in: function () {\n            // console.log('PlatformMgr.shareType: ' + PlatformMgr.shareType + ', PlatformMgr.share_picture:' + PlatformMgr.share_picture)\n            if (PlatformMgr.shareType && PlatformMgr.share_picture && PlatformMgr.share_picture != '' && PlatformMgr.uid && PlatformMgr.uid != '') {\n                PlatformMgr.hawkeye_report({\n                    reportId: '05-01-' + PlatformMgr.shareType + '-' + PlatformMgr.share_picture + '-' + (PlatformMgr.is_new ? '01' : '00')\n                });\n                PlatformMgr.shareType = null;\n                PlatformMgr.share_picture = null;\n            }\n        },\n\n        hawkeye_report_level: function () {\n            PlatformMgr.hawkeye_report({\n                reportId: '07-' + PlatformMgr.hawkeye_level\n            });\n        },\n\n        hawkeye_report_advert_open: function (advertId) {\n            PlatformMgr.hawkeye_report({\n                reportId: '06-00-' + advertId\n            });\n        },\n\n        hawkeye_report_advert_show: function (advertId) {\n            PlatformMgr.hawkeye_report({\n                reportId: '06-01-' + advertId\n            });\n        },\n\n        hawkeye_report_advert_end: function (advertId) {\n            PlatformMgr.hawkeye_report({\n                reportId: '06-02-' + advertId\n            });\n        },\n\n        /**\n         * \n         * @param {*} money 金额，精确到分\n         * @param {*} id 充值配置id\n         */\n        hawkeye_report_purchase: function (money, id) {\n            PlatformMgr.hawkeye_report({\n                reportId: '08-' + money + '-' + id + '0'\n            });\n        },\n\n        hawkeye_report_funnel: function (customEvent) {\n            // var key = '';\n            // key = 'KEY_Hawkeye_Funnel_EVENT_' + customEvent;\n            // var value = Tools.getItem(key);\n            if (PlatformMgr.playerData.hawkeyeFunnelcontains(customEvent)) {\n                // if (Tools.arrContains(PlatformMgr.playerData.hawkeyeFunnelIDs, customEvent)) {\n                if (GameData.instance.isShowLog()) {\n                    console.log('skip hawkeye_funnel for event:' + customEvent);\n                }\n                return;\n            }\n            if (GameData.instance.isShowLog()) {\n                console.log('HawkeyeFunnelEvent[customEvent]:' + CustomFunnelEvent[customEvent] + ',' + customEvent);\n            }\n\n            // Tools.setItem(key, Tools.getTimestampMS().toString());\n            PlatformMgr.playerData.addHawkeyeFunnelIDs(customEvent);\n\n            PlatformMgr.hawkeye_report({\n                reportId: '04-00-' + customEvent.toString()\n            });\n        },\n\n        /** 上行玩家数据 */\n        k6_uploadData: function (data, callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.BROWSER:\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'common/upload-data';\n                    var param = {};\n                    param.app = PlatformMgr.k6_app;\n                    param.token = PlatformMgr.k6_Token;\n                    param.data = data;\n                    PlatformMgr.createHttpRequest(url, param, () => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('k6_uploadData  success');\n                        }\n                        if (callback) callback();\n                    }, () => {\n                        if (GameData.instance.isShowLog()) {\n                            console.error('k6_uploadData error, url:' + url + ' param:' + JSON.stringify(param));\n                        }\n                    });\n                    break;\n                }\n            }\n        },\n\n        /** 下载玩家数据 */\n        k6_downloadData: function (callback, errCallback) {\n            var url = PlatformMgr.k6_baseUrl + 'common/download-data';\n            var param = {};\n            param.app = PlatformMgr.k6_app;\n            param.token = PlatformMgr.k6_Token;\n            PlatformMgr.createHttpRequest(url, param, (obj) => {\n                if (GameData.instance.isShowLog()) {\n                    console.log('k6_downloadData success:' + JSON.stringify(obj));\n                }\n                if (obj && obj.data) {\n                    if (callback) callback(obj.data.data);\n                } else {\n                    if (errCallback) errCallback();\n                }\n            }, () => {\n                if (errCallback) errCallback();\n                if (GameData.instance.isShowLog()) {\n                    console.error('k6_downloadData error, url:' + url + ' param:' + JSON.stringify(param));\n                }\n            });\n        },\n\n        /** 用户登录 */\n        k6_login: function (param, callback, errCallback) {\n            var url = PlatformMgr.k6_baseUrl + 'user/login';\n            // var param = {};\n            param.app = PlatformMgr.k6_app;\n            // 106021\n            // param.sharer = '106021';\n            // param.shareType = 1;\n            param.sharer = PlatformMgr.shareUid;\n            param.shareType = PlatformMgr.shareType;\n            param.ios = PlatformMgr.isIOS() ? 1 : 0;\n            // param.token = PlatformMgr.eolinkerToken;\n            PlatformMgr.createHttpRequest(url, param, (obj) => {\n                if (GameData.instance.isShowLog()) {\n                    console.log('k6_login success:' + JSON.stringify(obj));\n                }\n                if (obj) {\n                    if (callback) callback(obj.data);\n                } else {\n                    if (errCallback) errCallback();\n                }\n            }, () => {\n                if (errCallback) errCallback();\n                if (GameData.instance.isShowLog()) {\n                    console.error('k6_login error, url:' + url + ' param:' + JSON.stringify(param));\n                }\n            });\n        },\n\n        // 发行SDK获取服务器时间戳\n        k6_userDate: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/date';\n                    var param = {};\n                    param.app = PlatformMgr.k6_app;\n                    param.version = '';\n                    param.token = PlatformMgr.k6_Token;\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('k6_userDate response data:' + JSON.stringify(obj));\n                        }\n                        if (obj) {\n                            var serverTime = obj.data.now_time * 1000;\n                            var curTime = Number(new Date().getTime());\n                            PlatformMgr.timeDefence = curTime - serverTime;\n                            if (GameData.instance.isShowLog()) {\n                                console.log(curTime, serverTime);\n                                console.log('时间差：' + PlatformMgr.timeDefence)\n                            }\n                        }\n                        if (callback) callback();\n                    }, () => {\n                        if (GameData.instance.isShowLog()) {\n                            console.error('k6_userDate error, url:' + url + ' param:' + JSON.stringify(param));\n                        }\n                    });\n                    break;\n                }\n                default: {\n                    if (callback) callback();\n                    break;\n                }\n            }\n\n        },\n\n        // 发行sdk跳转上报\n        // adStatis: function (appid) {\n\n        //     PlatformMgr.createEolinkerRequest('common/ad-statistics', {\n        //         token: PlatformMgr.eolinkerToken,\n        //         ad_appid: appid //广告位对应的小游戏appid\n        //     }, (res) => {\n        //         if (GameData.instance.isShowLog()) {\n        //             console.log(\"result: \", res); //上报统计成功\n        //             // console.log('eolinker adStatis resonse data:' + JSON.stringify(obj));\n        //         }\n        //     });\n\n        // },\n\n        /**\n         * 广告位统计-ad上报\n         * @param navIf 跳转信息配置\n         * @param spotId 中转识别id\n         */\n        adStatis: function (navIf, spotId = \"\") {\n            let middle_id = \"\";\n            if (spotId) middle_id = navIf.appid;\n            PlatformMgr.createEolinkerRequest('common/ad-statistics', {\n                // app: this.appName,\n                token: PlatformMgr.eolinkerToken,\n                ad_appid: navIf.distid,\n                middle_appid: middle_id,\n                ad_id: spotId\n            }, res => {\n                if (GameData.instance.isShowLog()) {\n                    console.log(\"result: \", res); //上报统计成功\n                    // console.log('eolinker adStatis resonse data:' + JSON.stringify(obj));\n                }\n            });\n        },\n\n        /**\n         * 小游戏跳转\n         * @param navIf 跳转信息配置\n         * @param susCbk 成功回调\n         * @param failCbk 失败回调\n         */\n        navgateTo(navIf, susCbk = null, failCbk = null) {\n            let spotId = \"\";\n            if (navIf.path.search(new RegExp('(^|&)?reJ=([^&]*)(&|$)')) != -1) { //是中转模式\n                spotId = PlatformMgr.eolinkerApp + PlatformMgr.uid + Math.round((new Date()).getTime() / 1000) + \"\";\n                if (spotId.length > 25) spotId = spotId.substr(spotId.length - 25, spotId.length); //若超过25字符，截取后面25字符\n                navIf.path += \"&ad_id=\" + spotId; //把中转识别id带过去\n            }\n\n            // let self = this;\n            if (window['wx'].navigateToMiniProgram) {\n                window['wx'].navigateToMiniProgram({\n                    appId: navIf.appid,\n                    path: navIf.path,\n                    success(res) {\n                        if (spotId) {\n                            PlatformMgr.adStatis(navIf, spotId); //广告位中转上报\n                        } else {\n                            PlatformMgr.adStatis(navIf); //广告位上报(不中转)\n                        }\n                        susCbk && susCbk();\n                        // console.log(\"nav successed\");\n                    },\n                    fail() {\n                        failCbk && failCbk();\n                    }\n                });\n            }\n        },\n\n        /**\n         * 预览二维码\n         * @param preIf 预览信息\n         * @param susCbk 成功回调\n         */\n        onPreView(preIf, susCbk = null) {\n            let url = PlatformMgr.baseUrl + \"QR_code/\" + preIf.path;\n            // let self = this;\n            window['wx'].previewImage({\n                current: url, // 当前显示图片的http链接\n                urls: [url], // 需要预览的图片http链接列表\n                success() {\n                    // console.log(\"prev successed\");\n                    PlatformMgr.adStatis(preIf);\n                    susCbk && susCbk();\n                }\n            });\n        },\n\n        // 打开子域内容\n        showOpenDataContext: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    const open = qq.getOpenDataContext();\n                    open.postMessage({\n                        messageType: OpenDataMsgType.Show,\n                        code: PlatformMgr.code,\n                    });\n                }\n                break;\n            default:\n                break;\n            }\n        },\n\n        closeOpenDataContext: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    const open = qq.getOpenDataContext();\n                    open.postMessage({\n                        messageType: OpenDataMsgType.Close,\n                    });\n                }\n                break;\n            default:\n                break;\n            }\n        },\n\n        leftOpenDataContext: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    const open = qq.getOpenDataContext();\n                    open.postMessage({\n                        messageType: OpenDataMsgType.Left,\n                    });\n                }\n                break;\n            default:\n                break;\n            }\n        },\n\n        rightOpenDataContext: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    const open = qq.getOpenDataContext();\n                    open.postMessage({\n                        messageType: OpenDataMsgType.Right,\n                    });\n                }\n                break;\n            default:\n                break;\n            }\n        },\n\n        showMiniOpenDataContext: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    const open = qq.getOpenDataContext();\n                    open.postMessage({\n                        messageType: OpenDataMsgType.Mini,\n                        code: PlatformMgr.code,\n                    });\n                }\n                break;\n            default:\n                break;\n            }\n        },\n\n        closeMiniOpenDataContext: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    const open = qq.getOpenDataContext();\n                    open.postMessage({\n                        messageType: OpenDataMsgType.CloseMini,\n                    });\n                }\n                break;\n            default:\n                break;\n            }\n        },\n\n        setUserCloudStorage: function (rankScore) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    var kvList = [];\n\n                    var kvData = {\n                        key: 'rankStar',\n                        value: '' + rankScore,\n                    };\n                    kvList.push(kvData);\n\n                    var timeStampData = {\n                        key: 'TIMESTAMP',\n                        value: Tools.getTimestampMS().toString()\n                    };\n                    kvList.push(timeStampData);\n\n                    var uidData = {\n                        key: 'uuid',\n                        value: PlatformMgr.code\n                    };\n                    kvList.push(uidData);\n\n                    // 微信排行榜数据由服务器上报\n                    wx.setUserCloudStorage({\n                        KVDataList: kvList,\n                        complete: (res) => {\n                            if (GameData.instance.isShowLog()) {\n                                console.log('setUserCloudStorage complete:', res);\n                            }\n                        }\n                    });\n                }\n                break;\n            default:\n                break;\n            }\n\n        },\n\n        /**\n         * 上报BI自定义事件\n         * @param {CustomFunnelEvent} customEvent 自定义BI事件类型\n         */\n        notifyFunnelEvent: function (customEvent) {\n            if (PlatformMgr.reportFunnels && PlatformMgr.reportFunnels[customEvent]) {\n                return;\n            }\n\n            PlatformMgr.hawkeye_report_funnel(customEvent);\n            PlatformMgr.mta_report_funnel(customEvent);\n\n            if (PlatformMgr.reportFunnels) {\n                PlatformMgr.reportFunnels[customEvent] = true;\n            }\n        },\n\n        mta_report_funnel: function (customEvent) {\n\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    var key = '';\n                    key = 'KEY_CUSTOM_Funnel_EVENT_' + customEvent;\n                    var value = Tools.getItem(key);\n                    if (value) {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('skip funnel for event:' + customEvent);\n                        }\n                        return;\n                    }\n                    if (GameData.instance.isShowLog()) {\n                        console.log('CustomFunnelEvent[customEvent]:' + CustomFunnelEvent[customEvent] + ',' + customEvent);\n                    }\n\n                    var obj = {};\n                    obj[customEvent.toString()] = 'true';\n                    mta.Event.stat('startfirstgame', obj);\n\n                    Tools.setItem(key, Tools.getTimestampMS().toString());\n                    break;\n                }\n                default:\n                    break;\n            }\n        },\n\n\n\n        getAreaInfo: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/getArea';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('getArea response data:' + JSON.stringify(obj));\n                        }\n\n                        if (obj && obj.data && obj.data.cityInfo) {\n                            if (callback) callback(obj.data.cityInfo);\n                        }\n                    })\n                    break;\n                }\n                default:\n                    break;\n            }\n        },\n\n        getShareScore: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/getShareScore';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('getShareScore response data:' + JSON.stringify(obj));\n                        }\n\n                        if (obj && obj.data) {\n                            if (callback) callback(obj.data.score);\n                        }\n                    })\n                    break;\n                }\n                default:\n                    if (callback) callback(0);\n                    break;\n            }\n        },\n\n        //#region ios appsflyer 上报\n        af_report_user: function () {\n            if (cc.sys.os === cc.sys.OS_IOS) {\n                // jsb.reflection.callStaticMethod(\"PlatMgr\", \"reportUser\");\n            }\n        },\n\n\n        getInviteInfo: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/getShareNew';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('getInviteInfo response data:' + JSON.stringify(obj));\n                        }\n\n                        if (obj && obj.data && obj.data.newUsers) {\n                            if (callback) callback(obj.data.newUsers);\n                        }\n                    })\n                    break;\n                }\n                default:\n                    var info = [{\n                        iconUrl: 1\n                    }, {\n                        iconUrl: 2\n                    }, {\n                        iconUrl: 3\n                    }]\n                    if (callback) callback(info);\n                    break;\n            }\n        },\n\n        resetShareDailyRequest: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'fake/resetShareDaily';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('resetShareDailyRequest response data:' + JSON.stringify(obj));\n                        }\n                        if (callback) callback();\n                    })\n                    break;\n                }\n                default:\n                    break;\n            }\n        },\n\n        /**\n         * 当前平台是否使用微信的API，头条小游戏、QQ小游戏等平台可直接使用微信的API\n         * @returns {boolean} 是否使用微信的API\n         */\n        isPlatformUseWxApi: function () {\n            return PlatformMgr.platformType === PlatformType.WECHAT\n            //  || PlatformMgr.platformType === PlatformType.TOUTIAO\n            //  || PlatformMgr.platformType === PlatformType.QQMINIAPP\n            ;\n        },\n\n        reportAnalytics: function () {\n            if (PlatformMgr.isReportAnalytics) {\n                return;\n            }\n\n            switch (PlatformMgr.platformType) {\n                case PlatformType.WECHAT: {\n                    PlatformMgr.isReportAnalytics = true;\n                    if (qq && qq.reportAnalytics && typeof qq.reportAnalytics === 'function') {\n                        qq.reportAnalytics('finishShow');\n                    }\n                    break;\n                }\n                default:\n                    break;\n            }\n        },\n\n\n        //暑期排行相关\n        setHolidayScore: function (score, callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.BROWSER:\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/uploadScore';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token,\n                        score: score,\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('setHolidayScore response data:' + JSON.stringify(obj));\n                        }\n                        if (callback) callback();\n                    })\n                    break;\n                }\n                default:\n                    break;\n            }\n        },\n\n        getHolidayPKRank: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.BROWSER:\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/smallRank';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token,\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('getHolidayPKRank response data:' + JSON.stringify(obj));\n                        }\n                        if (obj) {\n                            if (callback) callback(obj.data);\n                        }\n                    })\n                    break;\n                }\n                default:\n                    break;\n            }\n        },\n\n        getHolidayWorldRank: function (round, callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.BROWSER:\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/worldRank';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token,\n                        round: round,\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('getHolidayWorldRank response data:' + JSON.stringify(obj));\n                        }\n                        if (obj) {\n                            if (callback) callback(obj.data);\n                        }\n                    })\n                    break;\n                }\n                default:\n                    break;\n            }\n        },\n\n        getHolidayPKReward: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.BROWSER:\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/lastSmallRank';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token,\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('getHolidayPKReward response data:' + JSON.stringify(obj));\n                        }\n                        if (obj && obj.data) {\n                            if (callback) callback(obj.data);\n                        }\n                    })\n                    break;\n                }\n                default:\n                    if (callback) callback();\n                    break;\n            }\n        },\n\n        getHolidayWorldReward: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.BROWSER:\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/lastWorldRank';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token,\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('getHolidayWorldReward response data:' + JSON.stringify(obj));\n                        }\n                        if (obj && obj.data) {\n                            if (callback) callback(obj.data);\n                        }\n                    })\n                    break;\n                }\n                default:\n                    if (callback) callback();\n                    break;\n            }\n        },\n\n\n        getHolidayWorldRewardInfo: function (callback) {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.BROWSER:\n                case PlatformType.WECHAT: {\n                    var url = PlatformMgr.k6_baseUrl + 'user/worldRewardInfo';\n                    var param = {\n                        app: PlatformMgr.k6_app,\n                        token: PlatformMgr.k6_Token,\n                    };\n\n                    PlatformMgr.createHttpRequest(url, param, (obj) => {\n                        if (GameData.instance.isShowLog()) {\n                            console.log('getHolidayWorldRewardInfo response data:' + JSON.stringify(obj));\n                        }\n                        if (obj && obj.data) {\n                            if (callback) callback(obj.data);\n                        }\n                    })\n                    break;\n                }\n                default:\n                    if (callback) callback();\n                    break;\n            }\n        },\n\n        getCountry: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.ANDROID: {\n                    var country = jsb.reflection.callStaticMethod(\n                        'org/cocos2dx/javascript/Utils',\n                        'getCountry',\n                        '()Ljava/lang/String;'\n                    )\n                    console.log('PlatformMgr.getCountry: ' + country);\n                    return country;\n                }\n                break;\n            case PlatformType.IOS: {\n                var country = jsb.reflection.callStaticMethod(\n                    'Utils',\n                    'getCountry');\n                console.log('PlatformMgr.getCountry: ' + country);\n                return country;\n            }\n            break;\n            default:\n                break;\n            }\n        },\n\n        getLanguageCode: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.ANDROID: {\n                    var language = jsb.reflection.callStaticMethod(\n                        'org/cocos2dx/javascript/Utils',\n                        'getLanguageCode',\n                        '()Ljava/lang/String;'\n                    )\n                    console.log('PlatformMgr.getLanguageCode: ' + language);\n                    return language;\n                }\n                break;\n            case PlatformType.IOS: {\n                var language = jsb.reflection.callStaticMethod(\n                    'Utils',\n                    'getLanguageCode');\n                console.log('PlatformMgr.getLanguageCode: ' + language);\n                return language;\n            }\n            break;\n            default:\n                break;\n            }\n        },\n\n        /**\n         * 打开或跳转评论页面\n         */\n        openStoreComment: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.ANDROID: {\n                    jsb.reflection.callStaticMethod(\n                        'org/cocos2dx/javascript/Utils',\n                        'openStoreComment',\n                        '()V'\n                    );\n                }\n                break;\n            case PlatformType.IOS: {\n                const url = 'itms-apps://itunes.apple.com/app/id1460796876?action=write-review';\n                cc.sys.openURL(url);\n            }\n            break;\n            default:\n                break;\n            }\n        },\n        //-----------------------------------------------------------------------//\n        /**\n         * 链接钱包\n         */\n        connectBitverse: function () {\n            switch (PlatformMgr.platformType) {\n                case PlatformType.ANDROID: {\n                    console.log(\"connectBitverse ===>\")\n                    jsb.reflection.callStaticMethod(\n                        'org/cocos2dx/javascript/BitverseManager',\n                        'Connect',\n                        '()V'\n                    );\n                }\n                break;\n            case PlatformType.IOS: {\n                jsb.reflection.callStaticMethod(\n                    'BitverseManager',\n                    'Connect');\n            }\n            break;\n            default:\n                break;\n            }\n        },\n\n        web3_gm_api: function (method, pramStr, cb1, cb2) {\n            let url = PlatformMgr.gm_baseUrl + \"/gmapi/game/\" + method + \"?\" + pramStr\n            PlatformMgr.createHttpRequest(url, \"\", (obj) => {\n                if (GameData.instance.isShowLog()) {\n                    console.log('web3_gm_api resonse data:' + JSON.stringify(obj));\n                    // cb1 && cb1(obj)\n                }\n                if(cb1){\n                    cb1(obj)\n                }\n            }, () => {\n                if (GameData.instance.isShowLog()) {\n                    console.error('web3_gm_api error, url:' + url + ' param:' + JSON.stringify(param));\n                    // cb2 && cb2(obj) \n                }\n                if(cb2){\n                    cb2()\n                }\n            });\n        },\n\n        //查询是否还有余额，表示可以领取\n        qureyBalance: function () {\n            if(!PlatformMgr.open_nft_moudle){\n                return\n            }\n            // PlatformMgr.web3_gm_api(\"qureyBalanceFromChain\", \"\",\n            var curTime = Number(new Date().getTime());\n            PlatformMgr.web3_gm_api(\"qureyBalanceFromDB\", `time=${curTime}`,\n                (rsp) => {\n                    if (rsp.result == 0) {\n                        if (rsp.data) {\n                            //tokenid拼接字符串\n                            let dataStr = rsp.data\n                            let id_index_ar = dataStr.split(\"_\")\n                            let ids = {}\n                            for (let index = 0; index < id_index_ar.length; index++) {\n                                let _strs = id_index_ar[index].split(\"=\")\n                                //在钱包里page的顺序，暂时不用\n                                let _i = _strs[0]\n                                //tokenid：nft标识，erc1155协议 1对多，对应游戏里的商品id; \n                                //tokenId : count 即 该皮肤还有多少个NFT\n                                let tokenid = _strs[1]\n                                if (ids.hasOwnProperty(tokenid)) {\n                                    ids[tokenid] = ids[tokenid] + 1\n                                } else {\n                                    ids[tokenid] = 1\n                                }\n                            }\n                            PlatformMgr.nft_balance_ids = ids\n                            return ids\n                        } else {\n                            console.log(\"rsp.data null\")\n                            return {}\n                        }\n                    } else {\n                        console.log(\"rsp result error\", rsp.result)\n                        return {}\n\n                    }\n                },\n                () => {\n                    console.log(\"gm query failed\")\n                    return {}\n                }\n            )\n        },\n\n        //查询玩家NFT资产\n        checkUserNFT: function () {\n            if(!PlatformMgr.open_nft_moudle){\n                return\n            }\n            // if(PlatformMgr.playerData.bitverseWallet==\"\"){\n            //     PlatformMgr.connectBitverse()\n            //     // AdvertMgr.instance.showUITips(Tools.getStringByFormat(\"请先链接Bitverse钱包\"))\n            //     return\n            // }\n\n            let uuid = Tools.getItem('user_uuid') || 0\n            let country = PlatformMgr.getCountry() || \"\"\n            let adress = PlatformMgr.playerData.bitverseWallet || \"1\"\n\n            let pramStr = `uuid=${uuid}&country=${country}&adress=${adress}`\n            PlatformMgr.web3_gm_api(\"checkNFTFormDB\", pramStr,\n                (rsp) => {\n                    if (rsp.result == 200) {\n                        if (rsp.data) {\n                            //tokenid拼接字符串\n                            let dataStr = rsp.data\n                            let id_index_ar = dataStr.split(\"_\")\n                            let ids = {}\n                            for (let index = 0; index < id_index_ar.length; index++) {\n                                let _strs = id_index_ar[index].split(\"=\")\n                                //在钱包里page的顺序，暂时不用\n                                let _i = _strs[0]\n                                //tokenid：nft标识，erc1155协议 1对多，对应游戏里的商品id; \n                                //tokenId : count 即 该皮肤还有多少个NFT\n                                let tokenid = _strs[1]\n                                if (ids.hasOwnProperty(tokenid)) {\n                                    ids[tokenid] = ids[tokenid] + 1\n                                } else {\n                                    ids[tokenid] = 1\n                                }\n                            }\n                            PlatformMgr.nft_user_datas = ids\n                            return ids\n                        } else {\n                            console.log(\"rsp.data null\")\n                            return {}\n                        }\n                    } else {\n                        console.log(\"rsp result error\", rsp.result)\n                        return {}\n\n                    }\n                },\n                () => {\n                    console.log(\"gm query failed\")\n                    return {}\n                }\n            )\n        },\n\n        //发起一条NFT领取请求\n        requestNFTGet: function (data) {\n            if(!PlatformMgr.open_nft_moudle){\n                return\n            }\n            if(data.getWay!=100) return\n\n            // if(PlatformMgr.playerData.bitverseWallet==\"\"){\n            //     PlatformMgr.connectBitverse()\n            //     // AdvertMgr.instance.showUITips(Tools.getStringByFormat(\"请先链接Bitverse钱包\"))\n            //     return\n            // }\n\n            let uuid = Tools.getItem('user_uuid') || \"\"\n            let country = PlatformMgr.getCountry() || \"\"\n            let adress = PlatformMgr.playerData.bitverseWallet || \"\"\n            let goodsId = data.goodsId\n            let goodsName = encodeURIComponent(data.goodsName)\n            let name = encodeURIComponent(data.name)\n            let token = data.token\n            let pramStr = `uuid=${uuid}&country=${country}&adress=${adress}&id=${goodsId}&name=${name}&name2=${goodsName}&token=${token}`\n            PlatformMgr.web3_gm_api(\"requestNFT\", pramStr,\n                (rsp) => {\n                    if (rsp.result == 200) {\n                        if (rsp.data) {\n                            //tokenid拼接字符串\n                            let dataStr = rsp.data\n                            AdvertMgr.instance.showUITips(Tools.getStringByFormat(dataStr))\n                            return null\n                        } else {\n                            console.log(\"rsp.data null\")\n                            return null\n                        }\n                    } else {\n                        if (rsp.data) {\n                            AdvertMgr.instance.showUITips(Tools.getStringByFormat(rsp.data))\n                        } else {\n                            console.log(\"rsp result error\", rsp.result)\n                        }\n                        return null\n\n                    }\n                },\n                () => {\n                    console.log(\"gm query failed\")\n                    return null\n                }\n            )\n        }\n    },\n\n});"]}